[ë¬¸ì„œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°](README.md)

> # STEP 24
>
> ğŸ’¡ì§ˆì˜ì‘ë‹µì€ <https://github.com/pul8219/TIL> `Issues` íƒ­ì˜ ì•Œë§ì€ step ì´ìŠˆì•ˆì— ë‚¨ê²¨ì£¼ì„¸ìš”. â¡ï¸ [Issueíƒ­ìœ¼ë¡œ ì´ë™](https://github.com/pul8219/TIL/issues)
>
> - ì‘ì„±ì: Wol-dan (@pul8219)
> - ìŠ¤í„°ë”” ì£¼ì œ: FrontEnd ë©´ì ‘ ìŠ¤í„°ë”” <https://gitlab.com/siots-study/topics/-/wikis/home>
> - ê³µë¶€ ë²”ìœ„: [CORS]()
> - ê¸°í•œ: 01/23(í† ) ~ 01/25(í™”)

# ë³´ì¶© í•„ìš”

- [ìº¡í‹´ íŒêµ - í”„ëŸ°íŠ¸ì—”ë“œ ê°œë°œìê°€ ì•Œì•„ì•¼í•˜ëŠ” HTTP í”„ë¡œí† ì½œ Part 1](https://joshua1988.github.io/web-development/http-part1/)

- `XMLHttpRequest`

# ëª©ì°¨

- [URI](#URI)
  - [URL](#urluniform-resource-locator)
  - [URN](#urnuniform-resource-name)
- [Same Origin Policy](#same-origin-policyë™ì¼-ì¶œì²˜-ì •ì±…)
  - [origin](#originì¶œì²˜)
- [CORS](#cors)
  - [CORSë€?](#corsë€)
  - [CORSì™€ ë¸Œë¼ìš°ì €](#corsì™€-ë¸Œë¼ìš°ì €)
  - [CORS ì‘ë™ ë°©ì‹](#cors-ì‘ë™-ë°©ì‹)
  - [CORSì— ê´€ì—¬í•˜ëŠ” ì‘ë‹µ í—¤ë”](#corsì—-ê´€ì—¬í•˜ëŠ”-ì‘ë‹µ-í—¤ë”)
  - [Simple Request](#simple-request)
  - [Credentialed Request](#credentialed-request)

ğŸ’¬

- [Comment](#comment)
- [References](#references)
- [íŒ€ì›ë“¤ ê²°ê³¼ë¬¼â€](#íŒ€ì›ë“¤-ê²°ê³¼ë¬¼)

# URI

URI(Uniform Resource Identifier)

HTTP ìš”ì²­ì˜ ëª©í‘œëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì¸ë° ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ URI(Uniform Resource Identifier)ì´ë‹¤. URIëŠ” ì›¹ ì„œë²„ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë©° í•˜ìœ„ ê°œë…ìœ¼ë¡œëŠ” URLê³¼ URNì´ ìˆë‹¤.

## URL(Uniform Resource Locator)

íŠ¹ì • ì„œë²„ì˜ í•œ ë¦¬ì†ŒìŠ¤ê°€ ì–´ë”” ìˆëŠ”ì§€ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ê·œì•½ì´ë‹¤.

í”íˆ ì›¹ ì‚¬ì´íŠ¸ ì£¼ì†Œë¡œ ì•Œê³  ìˆì§€ë§Œ URLì€ ì›¹ ì‚¬ì´íŠ¸ ì£¼ì†Œ ë¿ë§Œ ì•„ë‹ˆë¼ ì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ìƒì˜ ìì›ì„ ëª¨ë‘ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.

### êµ¬ì¡°

> `<ìŠ¤í‚¤ë§ˆ>`://`<í˜¸ìŠ¤íŠ¸>`:`<í¬íŠ¸>`/`<ê²½ë¡œ>`?`<ì§ˆì˜>`#`<í”„ë ˆê·¸ë¨¼íŠ¸>`

1. ìŠ¤í‚¤ë§ˆ(scheme)
   ì‚¬ìš©í•  í”„ë¡œí† ì½œì„ ì˜ë¯¸í•œë‹¤. ì›¹ì—ì„œëŠ” ì£¼ë¡œ HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©

2. í˜¸ìŠ¤íŠ¸(Host)ì™€ í¬íŠ¸(Port)

- í•˜ë‚˜ì˜ Host(ì»´í“¨í„°)ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ Process(í”„ë¡œê·¸ë¨)ì´ ê°ê°ì˜ Socket(ì†Œì¼“)ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° í†µì‹ ì„ í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ê°ê°ì˜ ì†Œì¼“ì„ êµ¬ë¶„í•  í•„ìš”ê°€ ìˆë‹¤.
- ì´ ë•Œ ì†Œì¼“ì„ êµ¬ë¶„í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒì´ Port(í¬íŠ¸).
- ex) Tomcatì„ ë‹¤ë¤„ë´¤ë‹¤ë©´, ë¡œì»¬ì—ì„œ ê°œë°œì„ í–ˆì„ ë•Œ ì ‘ê·¼í•˜ëŠ” URLì€ localhost:8080 ì¼ ê²ƒì´ë‹¤. ì´ì²˜ëŸ¼ ì„œë²„ì—ëŠ” í¬íŠ¸ì— ë”°ë¼ ì†Œì¼“ì´ ì—°ê²°ë˜ì–´ ìˆê³ , í¬íŠ¸ ë²ˆí˜¸ì— ë”°ë¼ ë‹¤ë¥¸ í”„ë¡œí† ì½œì´ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
- HTTP í”„ë¡œí† ì½œì—ì„œ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´, 80ë²ˆ í¬íŠ¸ë¥¼ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì‚¬ìš©
- HTTPS í”„ë¡œí† ì½œì—ì„œ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´, 443ë²ˆ í¬íŠ¸ë¥¼ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì‚¬ìš©

3. ê²½ë¡œ

í˜¸ìŠ¤íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ìì›ì˜ ê²½ë¡œë¥¼ ì˜ë¯¸.

4. ì§ˆì˜

- `=` ì¿¼ë¦¬ ìŠ¤íŠ¸ë§(Query String)

## URN(Uniform Resource Name)

ë¦¬ì†ŒìŠ¤ê°€ ì–´ë””ì— ìœ„ì¹˜í•´ ìˆë“  ì°¾ì„ ìˆ˜ ìˆëŠ” ë°©ì‹(íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë„¤ì„ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„)

# Same Origin Policy(ë™ì¼ ì¶œì²˜ ì •ì±…)

ì›¹í˜ì´ì§€ì—ì„œ ë‹¤ë¥¸ originìœ¼ë¡œë¶€í„°ì˜ ë¶ˆëŸ¬ì˜¤ëŠ” ë¦¬ì†ŒìŠ¤ëŠ” ì•ˆì „í•˜ì§€ ì•Šë‹¤ê³  ë³´ëŠ” ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜ (`=`ê°™ì€ ì¶œì²˜ì—ì„œë§Œ ë¦¬ì†ŒìŠ¤ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤)

ì´ ì •ì±…ì— ì˜í•´ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë‹¤ë¥¸ ì›¹í˜ì´ì§€ì— ì ‘ê·¼í•  ë•ŒëŠ” ê°™ì€ originì˜ í˜ì´ì§€ì—ë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

> ì™¸ë¶€ ì„œë²„ ê²½ë¡œë¡œ ajax ìš”ì²­ì„ ë³´ë‚´ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©° ìš”ì²­ì´ ì‹¤íŒ¨í•œë‹¤. ì´ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ í‘œì¤€ ìŠ¤í™ì— Same-Origin Policy(ë™ì¼ ì¶œì²˜ ì •ì±…)ì´ë¼ëŠ” ë³´ì•ˆê·œì¹™ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

## origin(ì¶œì²˜)

ë‘ URLì´ ê°™ì€ origin ì„ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì€ ë‘˜ì˜ **í”„ë¡œí† ì½œ, í¬íŠ¸, í˜¸ìŠ¤íŠ¸**ê°€ ê°™ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

### Ex)

ì•„ë˜ ë‘ URLì€ ê°™ì€ originì´ ì•„ë‹ˆë‹¤. http:// ì˜ ê¸°ë³¸ í¬íŠ¸ ë²ˆí˜¸ëŠ” `80`ë¼ì„œ ë‘˜ì€ í¬íŠ¸ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.

`http://store.company.com/dir2/other.html`

`http://store.company.com:81/dir/page.html`

> ê·¸ëŸ¬ë‚˜ ì—¬ëŸ¬ ë„ë©”ì¸ìœ¼ë¡œ êµ¬ì„±ë˜ëŠ” ëŒ€ê·œëª¨ ì›¹ í”„ë¡œì íŠ¸ ì¦ê°€, REST APIë¥¼ ì´ìš©í•œ ì™¸ë¶€ í˜¸ì¶œì´ ë§ì•„ì§€ëŠ” ìƒí™©ì—ì„œ SOPëŠ” ì ì ˆì¹˜ ì•Šì€ ì •ì±…ì´ ë˜ê¸°ë„ í•˜ê³ ìˆë‹¤. ê·¸ë˜ì„œ ì¶”ê°€ì ìœ¼ë¡œ CORSë¼ëŠ” ì •ì±…ì´ ë§Œë“¤ì–´ì¡Œë‹¤.

# CORS

## CORSë€?

Cross-Origin Resource Sharing(êµì°¨ ì¶œì²˜ ìì› ê³µìœ )

ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì™¸ë¶€ ë„ë©”ì¸ ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ë°©ì‹ì„ í‘œì¤€í™”í•œ ë©”ì»¤ë‹ˆì¦˜.
ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì •í•´ì§„ í—¤ë”ì— ë”°ë¼ ì„œë¡œ ìš”ì²­ì´ë‚˜ ì‘ë‹µì— ë°˜ì‘í• ì§€ ê²°ì •í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ, ìš”ì²­ì„ ë°›ì€ ì›¹ì„œë²„ê°€ í—ˆìš©í•  ê²½ìš° ë‹¤ë¥¸ ë„ë©”ì¸ì˜ ì›¹í˜ì´ì§€ ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ìì›ì„ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê²Œëœë‹¤.

ì„ íƒì  ìì›ì— ëŒ€í•´ í—ˆìš©í•œ originë“¤ë§Œ ìš”ì²­í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ë•Œë¬¸ì— í•„ìš”í•˜ë‹¤.

![](https://mdn.mozillademos.org/files/14295/CORS_principle.png)

ì¶œì²˜: [MDN - CORS](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS)

## CORSì™€ ë¸Œë¼ìš°ì €

origin(ì¶œì²˜)ëŠ” ë¸Œë¼ìš°ì €ê°€ íŒë³„í•œë‹¤.

CORSë¥¼ ìœ„ë°˜í–ˆì„ ë•Œ

- ì„œë²„ëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë‹µ
- ì‘ë‹µì˜ íŒŒê¸° ì—¬ë¶€ëŠ” ë¸Œë¼ìš°ì €ê°€ ê²°ì •

![](https://user-images.githubusercontent.com/31977543/89126088-f89c9280-d51d-11ea-8b47-9d540b57c194.png)

## CORS ì‘ë™ ë°©ì‹

ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ìì‹ ì˜ originê³¼ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ, CORSë¥¼ ì‹¤í–‰í•œë‹¤.

1. ì‚¬ìš©ìì˜ ì²« ìš”ì²­

- HTTPë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
- ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ í—¤ë”ì˜ `Origin` í•„ë“œì— ìš”ì²­ì„ ë³´ë‚´ëŠ” origin(ì¶œì²˜)ë¥¼ í•¨ê»˜ ë‹´ì•„ ë³´ë‚¸ë‹¤.

2. ì„œë²„ì˜ ì‘ë‹µ

- ì‘ë‹µ í—¤ë” `Access-Controll-Allow-Origin`ì„ ë³´ë‚¸ë‹¤. (ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼ê°€ëŠ¥í•œ í—ˆìš©ëœ ì¶œì²˜ë“¤ì˜ ì •ë³´ê°€ ë‹´ê¹€)

> ì„œë²„ì¸¡ì—ì„œë„ CORSì— ëŒ€í•œ ì²˜ë¦¬ê°€ _ë‹¹ì—°íˆ_ í•„ìš”í•˜ë‹¤.

3. ì‘ë‹µì„ ë°›ì€ ë¸Œë¼ìš°ì €

- ìì‹ ì´ ë³´ëƒˆë˜ `Origin`ê³¼ ë°›ì€ ì‘ë‹µì˜ `Access-Controll-Allow-Origin`ì„ ë¹„êµí•˜ì—¬ í•´ë‹¹ originì—ì„œ ìš”ì²­í•  ìˆ˜ ìˆëŠ”ê±°ë¼ë©´ ë¦¬ì†ŒìŠ¤ ì „ì†¡ì„ í—ˆìš©í•˜ê³  ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

### Preflight

ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— preflight ìš”ì²­(ì‚¬ì „ ìš”ì²­)ì„ ë¨¼ì € ë‚ ë¦°ë‹¤. ì´ë¥¼ í†µí•´ ì‹¤ì œ ìš”ì²­í•˜ë ¤ëŠ” ê²½ë¡œì™€ ê°™ì€ URLì— ëŒ€í•´ì„œ ì˜µì…˜ ë©”ì„œë“œë¡œ ìš”ì²­ì„ ë¯¸ë¦¬ ë‚ ë ¤ë³´ê³  ìš”ì²­ì„ í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.

- HTTPì˜ `OPTIONS` ë©”ì„œë“œê°€ ì‚¬ìš©ëœë‹¤.

![](https://user-images.githubusercontent.com/31977543/89126538-42d34300-d521-11ea-90a4-beae5ab70188.png)

![](https://user-content.gitlab-static.net/b08e6a235bfe1a6e36c2e0373abf502cdc70b153/68747470733a2f2f6769746875622e636f6d2f6b696d7365756c62692f54494c2f7261772f6d61737465722f4a6176615363726970742f61737365742f636f72732e706e67)

2. ì‹¤ì œ ìš”ì²­

## CORSì— ê´€ì—¬í•˜ëŠ” ì‘ë‹µ í—¤ë”

### Request headers(í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ í—¤ë”)

- Origin
  ìš”ì²­ì„ ë³´ë‚´ëŠ” í˜ì´ì§€ì˜ origin(ì¶œì²˜)

- Access-Control-Request-Method
  ì‹¤ì œ ìš”ì²­ì—ì„œ ì–´ë–¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì•Œë¦¬ê¸° ìœ„í•¨

- Access-Control-Request-Headers
  ì‹¤ì œ ìš”ì²­ì—ì„œ ì–´ë–¤ í—¤ë”ë¥¼ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì•Œë¦¬ê¸° ìœ„í•¨

### Reponse headers(í´ë¼ì´ì–¸íŠ¸ì˜ ì‘ë‹µ í—¤ë”)

- Access-Control-Allow-Origin

  `*`ì´ë©´ ëª¨ë“  ì™¸ë¶€ ë„ë©”ì¸ì—ì„œ ëª¨ë“  ìš”ì²­ì„ í—ˆìš©í•œë‹¤ëŠ” ê²ƒ (`Access-Control-Allow-Origin: *`)

## Simple Request

- ì˜ˆë¹„ ìš”ì²­ì´ ì—†ë‹¤.

![](https://user-images.githubusercontent.com/31977543/89157338-54f7c480-d5a7-11ea-9daf-131893d4db68.png)

## Credentialed Request

ìš”ì²­ì— ì¸ì¦ê³¼ ê´€ë ¨ëœ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆê²Œ í•˜ì—¬ CORSì—ì„œ ë³´ì•ˆì„ ì¢€ ë” ê°•í™”í•  ìˆ˜ ìˆëŠ” ë°©ë²•

### credential ì˜µì…˜ì˜ ì¢…ë¥˜

> â— TODO

[ë” ì•Œì•„ë³´ê¸°](https://eyabc.github.io/Doc/dev/network/CORS.html#credentialed-request)

# Comment

ì›¹ ë³´ì•ˆìƒ ê¸°ë³¸ì ìœ¼ë¡œ SOP ì •ì±…ì´ ì ìš©ëœë‹¤ëŠ” ê²ƒì„ ì²˜ìŒ ì•Œê²Œë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  CORSë„ ì²˜ìŒ ì ‘í•´ë³´ëŠ” ê°œë…ì¸ë° ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ëŠ” ì´í•´ê°€ ê°€ë‚˜, êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤. íŒ€ì›ë¶„ë“¤ ë¬¸ì„œë„ ì‚´í´ë³´ê³  ì¶”ê°€ì ìœ¼ë¡œ ë” ê³µë¶€í•˜ë©´ì„œ ì •ë¦¬í•„ìš”

# References

- URI&URL https://velog.io/@jch9537/URI-URL

- URI, URL êµ¬ì¡° https://victorydntmd.tistory.com/287

- MDN - Identifying resources on the Web https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Identifying_resources_on_the_Web

- MDN - Same-origin policy https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy

- MDN - CORS https://developer.mozilla.org/ko/docs/Web/HTTP/CORS

- REST API https://meetup.toast.com/posts/92

- HTTP ì ‘ê·¼ ì œì–´(CORS)ë€? https://velog.io/@suseodd/HTTP-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4-CORS-%EB%9E%80

- CORSë€ ë¬´ì—‡ì¸ê°€? https://hannut91.github.io/blogs/infra/cors

- CORS&HTTP&HTTPS&HTTPCache https://gitlab.com/siots-study/topics/-/wikis/CORS&HTTP&HTTPS&HTTPCache

- CORSëŠ” ì™œ ì´ë ‡ê²Œ ìš°ë¦¬ë¥¼ í˜ë“¤ê²Œ í•˜ëŠ”ê±¸ê¹Œ? https://evan-moon.github.io/2020/05/21/about-cors/

- eyabc - CORS https://eyabc.github.io/Doc/dev/network/CORS.html

- [ë¡œì»¬ì—ì„œ CORS policy ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ](https://velog.io/@takeknowledge/%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C-CORS-policy-%EA%B4%80%EB%A0%A8-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0-3gk4gyhreu)

# íŒ€ì›ë“¤ ê²°ê³¼ë¬¼

- [@pul8219](https://github.com/pul8219/TIL/blob/master/Documents/FrontEnd-Study/step24.md)
- [@eyabc](https://eyabc.github.io/Doc/dev/network/CORS.html)
- [@khw970421](https://velog.io/@khw970421/CORS-step23)
- [@JeongShin](https://www.notion.so/CORS-05a8053d9e1d4d84842a38a7d64502e1)
