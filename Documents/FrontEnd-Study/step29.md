[문서 목록으로 돌아가기](README.md)

> # STEP 29
>
> 💡질의응답은 <https://github.com/pul8219/TIL> `Issues` 탭의 알맞은 step 이슈안에 남겨주세요. ➡️ [Issue탭으로 이동](https://github.com/pul8219/TIL/issues)
>
> - 작성자: Wol-dan (@pul8219)
> - 스터디 주제: FrontEnd 면접 스터디 <https://gitlab.com/siots-study/topics/-/wikis/%EC%8B%AC%ED%99%941>
> - 공부 범위: STEP 28 [Scrolling](https://ko.javascript.info/onscroll)
> - 기한: 02/27(토) ~ 03/02(화)

# 보충 필요

# 목차

💬

- [Comment](#comment)
- [References](#references)
- [팀원들 결과물‍](#팀원들-결과물)

# Danfo.js란?

- 높은 성능을 제공하고 직관적이며 데이터 구조를 조작하거나 구조화된 데이터를 가공하기 쉬운 오픈 소스 자바스크립트 라이브러리이다.
- Python의 Pandas를 자바스크립트에서 유사하게 사용할 수 있도록 해주는 인터페이스이다. (Pandas API에 친숙하다면 Danfo.js를 쉽게 사용할 수 있을 것)

## 데이터 타입

- Series: 컬럼 하나. 1차원 배열
- Dataframe: 컬럼들이 모인 표. 2차원 배열

## Danfo.js 설치

```
npm install danfojs-node
```

`html`에 추가

```html
<script src="https://cdn.jsdelivr.net/npm/danfojs@0.1.2/dist/index.min.js"></script>
```

## Object Creation

![image](https://user-images.githubusercontent.com/33214449/109673182-1d8edc00-7bb9-11eb-8aa8-297bdce26f4a.png)

여기서 온도에 해당하는 정보만을 담고 싶다면 시리즈를 생성하면 됨

> `dfd`: Danfo.js의 모든 기능이 들어가있는 키워드

### Series 생성

배열로 `Series` 생성하기

- 정수 인덱스가 기본으로 생성된다.

```js
const s = new dfd.Series([20, 21, 22, 23]);
s.print();
```

```
//output // console에서 확인
╔═══╤══════════════════════╗
║   │ 0                    ║
╟───┼──────────────────────╢
║ 0 │ 20                   ║
╟───┼──────────────────────╢
║ 1 │ 21                   ║
╟───┼──────────────────────╢
║ 2 │ 22                   ║
╟───┼──────────────────────╢
║ 3 │ 23                   ║
╚═══╧══════════════════════╝
```

생성된 시리즈에 대한 통계정보를 담은 새로운 시리즈를 출력하기

```js
s.describe().print();
```

```
// output
╔══════════╤══════════════════════╗
║          │ 0                    ║
╟──────────┼──────────────────────╢
║ count    │ 4                    ║
╟──────────┼──────────────────────╢
║ mean     │ 21.5                 ║
╟──────────┼──────────────────────╢
║ std      │ 1.2909944487358056   ║
╟──────────┼──────────────────────╢
║ min      │ 20                   ║
╟──────────┼──────────────────────╢
║ median   │ 21.5                 ║
╟──────────┼──────────────────────╢
║ max      │ 23                   ║
╟──────────┼──────────────────────╢
║ variance │ 1.6666666666666667   ║
╚══════════╧══════════════════════╝
```

시각화

```html
<div id="s_table"></div>
<div id="s_line"></div>
```

```js
s.plot('s_table').table(); // 시리즈에 대한 표가 생성됨
s.plot('s_line').line(); // 시리즈에 대한 선 그래프를 그리고 싶을 때
```

![image](https://user-images.githubusercontent.com/33214449/109818895-d6ffb700-7c76-11eb-823c-682bf8f90d63.png)

![image](https://user-images.githubusercontent.com/33214449/109819376-568d8600-7c77-11eb-843a-0a047220a234.png)

### Dataframe 생성

배열로 Dataframe 생성

```js
const d1 = new dfd.DataFrame([
  { 온도: 20, 요일: '월', 판매량: 40 },
  { 온도: 21, 요일: '월', 판매량: 42 },
  { 온도: 22, 요일: '월', 판매량: 44 },
  { 온도: 23, 요일: '월', 판매량: 46 },
]);
d1.print();
```

```
// output
╔═══╤═══════════════════╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 요일              │ 판매량            ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 0 │ 20                │ 월                │ 40                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 월                │ 42                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 2 │ 22                │ 월                │ 44                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 월                │ 46                ║
╚═══╧═══════════════════╧═══════════════════╧═══════════════════╝
```

객체로 Dataframe 생성

- 객체의 프로퍼티 하나하나는 컬럼과 그 컬럼의 값들

```js
const d2 = new dfd.DataFrame({
  온도: [20, 21, 22, 23],
  요일: ['월', '월', '월', '월'],
  판매량: [40, 42, 44, 46],
});
d2.print();
```

```
// output
// 위의 d1 예시와 같음
```

파일로부터 데이터프레임 생성

```js
dfd
  .read_csv(
    'https://gist.githubusercontent.com/egoing/43799f48b55b5eb2a8b37652eab72318/raw/3a207dd85d0b74968426e65ae2cee4cb1d4aef4f/lemon.csv'
  )
  .then(function (data) {
    //
    data.print();
  });
```

json데이터로 데이터프레임 생성

```js
json_data = [
  { 온도: 20, 요일: '월', 판매량: 40 },
  { 온도: 21, 요일: '월', 판매량: 42 },
  { 온도: 22, 요일: '월', 판매량: 44 },
  { 온도: 23, 요일: '월', 판매량: 46 },
];

df = new dfd.DataFrame(json_data);
df.print();
```

```js
// 시각화 (1)
d1.describe().print();

// 그래프 그리기 (2)
d1.plot('d_table').table();
d1.plot('d_line').line();
```

```
// (1) output
╔══════════╤═══════════════════╤═══════════════════╗
║          │ 온도              │ 판매량            ║
╟──────────┼───────────────────┼───────────────────╢
║ count    │ 4                 │ 4                 ║
╟──────────┼───────────────────┼───────────────────╢
║ mean     │ 21.5              │ 43                ║
╟──────────┼───────────────────┼───────────────────╢
║ std      │ 1.290994          │ 2.581989          ║
╟──────────┼───────────────────┼───────────────────╢
║ min      │ 20                │ 40                ║
╟──────────┼───────────────────┼───────────────────╢
║ median   │ 21.5              │ 43                ║
╟──────────┼───────────────────┼───────────────────╢
║ max      │ 23                │ 46                ║
╟──────────┼───────────────────┼───────────────────╢
║ variance │ 1.666667          │ 6.666667          ║
╚══════════╧═══════════════════╧═══════════════════╝
```

```
// (2) output
```

![image](https://user-images.githubusercontent.com/33214449/109824117-dddcf880-7c7b-11eb-9fa2-076309e0e76b.png)

![image](https://user-images.githubusercontent.com/33214449/109824322-0fee5a80-7c7c-11eb-8d78-327c2f088a3f.png)

## 데이터 선택

```js
const d1 = new dfd.DataFrame([
  { 온도: 20, 요일: '월', 판매량: 40 },
  { 온도: 21, 요일: '월', 판매량: 42 },
  { 온도: 22, 요일: '월', 판매량: 44 },
  { 온도: 23, 요일: '월', 판매량: 46 },
]);

const s = new dfd.Series([20, 21, 22, 23]);

console.log(s, d1['온도'], d1);
// d1['온도'] 이렇게 하면 시리즈가 생성됨
```

![image](https://user-images.githubusercontent.com/33214449/109828834-5776e580-7c80-11eb-91ca-02ef6702ed58.png)

### loc

```js
d1.loc({ columns: ['온도', '판매량'] }).print(); // 컬럼 이름으로 가져오기 // 위치기반으로 가져올 땐 iloc 사용

d1.loc({ rows: [1, 3] }).print(); // 특정 행만 가져오고 싶을 때 (1,3행만 가져옴. 0,2행 제외)

d1.loc({ columns: ['온도', '판매량'], rows: [1, 3] }).print();
```

```
// output
╔═══╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 판매량            ║
╟───┼───────────────────┼───────────────────╢
║ 0 │ 20                │ 40                ║
╟───┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 42                ║
╟───┼───────────────────┼───────────────────╢
║ 2 │ 22                │ 44                ║
╟───┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 46                ║
╚═══╧═══════════════════╧═══════════════════╝

╔═══╤═══════════════════╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 요일              │ 판매량            ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 월                │ 42                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 월                │ 46                ║
╚═══╧═══════════════════╧═══════════════════╧═══════════════════╝

╔═══╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 판매량            ║
╟───┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 42                ║
╟───┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 46                ║
╚═══╧═══════════════════╧═══════════════════╝
```

## 논리 비교를 이용한 필터링

```js
//온도(컬럼)가 20보다 큰 경우 데이터 가져오기 // 이렇게 query로 가져오면 새로운 데이터프레임이 만들어지고 이걸 print() 로 출력
d1.query({ column: '온도', is: '>', to: 20 }).print();

d1.query({ column: '온도', is: '>', to: 20 })
  .query({ column: '판매량', is: '<', to: 46 })
  .print();
// 이렇게 줄줄이 함수를 붙이는 방법은 체이닝 이라고 함
```

## 데이터 추가, 삭제

```js
// 행 추가
const newRow = new dfd.DataFrame({
  온도: [24, 25],
  요일: ['월', '월'],
  판매량: [48, 50],
});
d1.append(newRow).print();
```

```
//output
╔═══╤═══════════════════╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 요일              │ 판매량            ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 0 │ 20                │ 월                │ 40                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 월                │ 42                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 2 │ 22                │ 월                │ 44                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 월                │ 46                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 4 │ 24                │ 월                │ 48                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 5 │ 25                │ 월                │ 50                ║
╚═══╧═══════════════════╧═══════════════════╧═══════════════════╝
```

```js
// 열 추가
d1.addColumn({ column: '비', value: [1, 0, 1, 0] });
d1.print();
```

```
//output
╔═══╤═══════════════════╤═══════════════════╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 요일              │ 판매량            │ 비                ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 0 │ 20                │ 월                │ 40                │ 1                 ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 월                │ 42                │ 0                 ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 2 │ 22                │ 월                │ 44                │ 1                 ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 월                │ 46                │ 0                 ║
╚═══╧═══════════════════╧═══════════════════╧═══════════════════╧═══════════════════╝
```

```js
//행삭제(행, x축 -> axis:0)
d1.drop({ axis: 0, index: [0] }).print();
```

```
//output
╔═══╤═══════════════════╤═══════════════════╤═══════════════════╤═══════════════════╗
║   │ 온도              │ 요일              │ 판매량            │ 비                ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 1 │ 21                │ 월                │ 42                │ 0                 ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 2 │ 22                │ 월                │ 44                │ 1                 ║
╟───┼───────────────────┼───────────────────┼───────────────────┼───────────────────╢
║ 3 │ 23                │ 월                │ 46                │ 0                 ║
╚═══╧═══════════════════╧═══════════════════╧═══════════════════╧═══════════════════╝
```

```js
// 열삭제(열, y축 -> axis:1)
d1.drop({ axis: 1, columns: ['온도'] }).print();
```

```
//output
╔═══╤═══════════════════╤═══════════════════╤═══════════════════╗
║   │ 요일              │ 판매량            │ 비                ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 0 │ 월                │ 40                │ 1                 ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 1 │ 월                │ 42                │ 0                 ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 2 │ 월                │ 44                │ 1                 ║
╟───┼───────────────────┼───────────────────┼───────────────────╢
║ 3 │ 월                │ 46                │ 0                 ║
╚═══╧═══════════════════╧═══════════════════╧═══════════════════╝
```

# References

- Danfo.js Documentation https://danfo.jsdata.org/
- Pandas를 자바스크립트에서! Danfo.js - 생활코딩 https://youtu.be/rPCgsu0bcM4

# 팀원들 결과물

- [@pul8219](https://github.com/pul8219/TIL/blob/master/Documents/FrontEnd-Study/step29.md)
- [@eyabc](https://eyabc.github.io/Doc/dev/core-javascript/DanfoJS.html)
- [@khw970421](https://velog.io/@khw970421/Danfo.js-step-29)
- [@JeongShin](https://www.notion.so/Danfo-js-9c08201a423f42eaadc3ce6cc2f2ea18)
