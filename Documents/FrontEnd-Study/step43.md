[ë¬¸ì„œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°](README.md)

# STEP 43, 44, 45

> **STEP 43**
>
> - ì‘ì„±ì: Wol-dan (@pul8219)
> - ìŠ¤í„°ë”” ì£¼ì œ: FrontEnd ë©´ì ‘ ìŠ¤í„°ë”” <https://gitlab.com/siots-study/topics/-/wikis/%EC%8B%AC%ED%99%941>
> - ê³µë¶€ ë²”ìœ„: STEP 43 [ì½”ë“œìŠ¤í”¼ì¸ 76 CSS Rendering - 4íšŒì°¨](https://www.youtube.com/watch?v=Tf5KvpYNNv8c) `1/3`
> - ê¸°í•œ: 06/26(í† ) ~ 06/29(í™”) (STEP 43)

Post Process, Transform 3D

> ìˆ˜í•™ í•¨ìˆ˜ë¥¼ ì •í™•í•˜ê²Œ ì•Œì§€ ëª»í•´ë„ ê°œë…ì„ ì•Œê³  ì‚¬ìš©í•  ì¤„ì€ ì•Œì•„ì•¼í•œë‹¤.

# Post Process

- Post ProcessëŠ” Geometry, Fragment ì´í›„ ë˜ ê°€ê³µí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.
- ì˜ì—­ ê³„ì‚°í›„ ë°”ë¡œ ë¹„íŠ¸ë§µì— ì“°ëŠ”ê²Œ ì•„ë‹ˆë¼ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ ë©”ëª¨ë¦¬ì—ì„œ ì¡°ì‘í•œ í›„ì— ê·¸ë¦¬ëŠ” `ë²„í¼` ê°œë…ì´ í•„ìš”í•˜ë‹¤.
- IE5 ì´í›„ ëª¨ë“  ë¸Œë¼ìš°ì €ì— ë²„í¼ ê°œë…ì´ ì ìš©ë˜ì—ˆë‹¤. ë²„í¼ëŠ” ì‰½ê²Œ 2ì°¨ì› ë°°ì—´ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. (x, yì— í•´ë‹¹í•˜ëŠ” ì ì„ ì°ì–´ë†“ìœ¼ë‹ˆê¹Œ) ë°°ì—´ì— ìˆëŠ” ê°’ì„ ë³€ê²½í•˜ë©´(post process) ì—¬ëŸ¬ ë³€í˜•ì„ ì¤„ ìˆ˜ ìˆê³  ì´ ì´í›„ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ê²Œ ëœë‹¤.
- ëª¨ë˜ ë¸Œë¼ìš°ì €ì˜ ë°©ì‹: CPUë¥¼ ì´ìš©í•´ geometry ê³„ì‚°, fragment(ê¸°ë³¸ fragment ì±„ì›€)ì„ ìˆ˜í–‰í•œ í›„ ê°€ê³µëœ ë²„í¼ë¥¼ GPUì— ë„˜ê²¨ì¤€ë‹¤. GPUì—ì„œ post processë¥¼ ì²˜ë¦¬í•œë‹¤.(GPUì—ì„œ ì²˜ë¦¬í•˜ëŠ”ê²Œ í›¨ì”¬ ë¹ ë¥´ê¸° ë•Œë¬¸)
- CSSì˜ í‚¤ì›Œë“œ ì¤‘ ì¼ë¶€ëŠ” CPUì—ì„œ ì¼ë¶€ëŠ” GPUì—ì„œ ì‹¤í–‰ëœë‹¤.
- ê·¸ë˜í”½ì´ ì»´í“¨í„° ë¨¸ì‹ ì„ ë§ì´ ì“´ë‹¤(ê³ ìš©ëŸ‰) (ëŒ€ë¶€ë¶„ì˜ ì–¸ì–´ê°€ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ë¨¹ì–´ì„œ ë¹„íŠ¸ë§µ ë°ì´í„°ë§Œí¼ì€ ë©”ëª¨ë¦¬ë¥¼ ì¦‰ì‹œ í•´ì œ í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•´ì¤€ë‹¤.) ê·¸ë˜ì„œ ê·¸ë˜í”½ì—ì„œ CPUë‚˜ GPUë¡œ post processë‚˜ fragmentë¡œ ì¼ì„ ì ì ˆíˆ ë¶„ë°°í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.
- post processë¥¼ ì“°ëŠ” ëŒ€í‘œì ì¸ ì†ì„±: transform, keyframe animation (GPUì— ë§¡ê¸°ê¸° ë•Œë¬¸ì— CPUê°€ ë„ë„í•´ì§€ê³  jsê°€ ëŒê¸° í¸í•´ì§„ë‹¤.)
- CSSì—ì„œ 3Dì™€ ê´€ë ¨ëœ ëª¨ë“  ì²˜ë¦¬ëŠ” GPUì—ì„œ í•œë‹¤.(post processì—ì„œ ì²˜ë¦¬í•œë‹¤ëŠ” ê²ƒ)

![](https://images.velog.io/images/pul8219/post/e745e4b5-6f8e-42b4-a0d0-b6ed361bbb45/image.png)

ex) ì´ë ‡ê²Œ `ë¦¬í”Œ`ì´ë¼ëŠ” ìˆ˜í•™ì  ê³µì‹ìœ¼ë¡œ í”½ì…€ì„ í©ëœ¨ë¦¬ê³ , `ë¸”ëŸ¬`ë¼ëŠ” ê³µì‹ì„ í†µí•´ ì™„ì„±ëœ í”½ì…€ì— ë³€í˜•ì„ ì¤„ ìˆ˜ ìˆë‹¤. í”½ì…€ì˜ ìƒ‰ê¹”, ë°ê¸°, í•„í„°ë¥¼ ëª¨ë‘ ì¤„ ìˆ˜ ìˆê³  íšŒì˜¤ë¦¬ì¹˜ê²Œ ë§Œë“¤ìˆ˜ë„, ë¬¼ê²°ì¹˜ê²Œ ë§Œë“¤ìˆ˜ë„ ìˆë‹¤.

![](https://images.velog.io/images/pul8219/post/15555ac4-f2f0-4258-915e-6cd2abe661b9/image.png)

- 3Dë¥¼ ì£¼ê¸° ì „(fragment)ì™€ 3Dë¥¼ ì¤€ í›„(post process)ëŠ” ì•„ë¬´ëŸ° ìƒê´€ì´ ì—†ë‹¤. í›„ìëŠ” DOMê³¼ë„ ìƒê´€ì´ ì—†ë‹¤.
- float, relativeë“±ì˜ ê³„ì‚°ì„ fragmentë‹¨ê³„ì—ì„œ ëª¨ë‘ ëë‚¸ í›„ ë³€í˜•ì„ ì£¼ëŠ” ê°œë…ì´ post processì´ë‹¤.

## Transform 3D

### `perspective`

ëª¨ë‹ˆí„°ì™€ ì‚¬ëŒ ëˆˆ ì‚¬ì´ì˜ ê±°ë¦¬(ë¥¼ ê°€ì •í•˜ëŠ” ê°’)

- ê°™ì€ ì‚¬ê°í˜•ì´ì–´ë„ `perspective`ê°’ì„ í¬ê²Œ ì¤€ ì‚¬ê°í˜•ì€ ë” ì‘ì•„ë³´ì¸ë‹¤.(ë©€ë¦¬ì„œ ë³´ë©´ ë” ì‘ê²Œ ë³´ì´ëŠ” ê²ƒì²˜ëŸ¼)
- zê°’ì„ ì–¼ë§ˆë¥¼ ì£¼ë˜ê°„ì— `perspective`ì— ì˜í•´ í¬ê²Œ ì¢Œìš°ëœë‹¤.
- ê°€ê¹Œì´ ìˆìœ¼ë©´ ì¡°ê¸ˆì˜ ê±°ë¦¬ì°¨ì´ë„ í¬ê²Œ ëŠê»´ì§€ë©° ì™œê³¡ì´ ì‹¬í•œ ê²ƒì²˜ëŸ¼ `perspective`ê°’ì„ ì ê²Œ ì¤„ìˆ˜ë¡ ì™œê³¡ì´ ì»¤ì§„ë‹¤. (ë©€ë¦¬ìˆìœ¼ë©´ ë©€ë¦¬ìˆì„ ìˆ˜ë¡ 2D, í‰ë©´ì²˜ëŸ¼ ë³´ì¸ë‹¤)

### `perspective-origin`

- ë³€í˜•ì„ ì¤„ ë•Œ ì–´ë”œë³´ê³  3Dë¥¼ ì¸ì‹í•  ê²ƒì¸ì§€ (`perspective`ëŠ” ëª¨ë‹ˆí„° ì •ê°€ìš´ë°ë¥¼ ê°€ì •í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤.)

```
perspective-origin: 50% 50% // í•œê°€ìš´ë°
perspective-origin: 0 0 // ì¢Œì¸¡ ìƒë‹¨
perspective-origin: 100% 100% // ìš°ì¸¡ í•˜ë‹¨ // ì´ ê²½ìš° ì¢Œì¸¡ ìƒë‹¨ê³¼ ìƒëŒ€ì ìœ¼ë¡œ ë©€ì–´ì§€ë‹ˆ ì¢Œì¸¡ ìƒë‹¨ì˜ ì™œê³¡ì´ ì œì¼ ì‹¬í•  ê²ƒì„
```

```html
<head>
  <!-- ... -->
  <style>
    @keyframes origin {
      0% {
        perspective-origin: 0% 50%;
      }
      50% {
        perspective-origin: 100% 50%;
      }
      100% {
        perspective-origin: 0% 50%;
      }
    }

    @keyframes spin {
      100% {
        transform: rotateX(360deg);
      }
    }
    html,
    body {
      height: 100%;
    }
    body {
      perspective: 600px;
      background: #404040;
      animation: origin 10s linear infinite;
    }
    .test {
      width: 500px;
      height: 500px;
      background: #aaa;
      position: absolute;
      left: 50%;
      top: 50%;
      margin-left: -250px;
      margin-top: -250px;
      animation: spin 30s linear infinite;
    }
  </style>
</head>

<body>
  <div class="test"></div>
</body>
```

ìœ„ ì˜ˆì œë¥¼ ì‹¤í–‰ì‹œì¼œë³´ì. íšŒì „ë§Œ ì¤¬ëŠ”ë°ë„ ì™œê³¡ë˜ì–´ ë³´ì¸ë‹¤. ê·¸ ì´ìœ ëŠ” ìš°ë¦¬ê°€ ë°”ë¼ë³´ëŠ” ìœ„ì¹˜(`perspective-origin`)ë¥¼ ê³„ì† ë°”ê¿¨ê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŸ¬í•œ ì›ê·¼ ì™œê³¡ì€ `perspective`ë¥¼ ì£¼ê¸° ì‹œì‘í•  ë•Œë¶€í„° ì‹œì‘ëœë‹¤.

> `rotateX`: xì¶•ì„ ê¸°ë°˜ìœ¼ë¡œ íšŒì „

### `transform-style`

```html
<div>
  <div></div>
</div>
```

- DOMì˜ ê³„ì¸µ êµ¬ì¡°ëŠ” fragmentë‹¨ê³„ê¹Œì§€ë§Œ ì ìš©ë˜ê³  GPUë¡œ ë„˜ì–´ê°€ë©´(3D) DOM êµ¬ì¡°ëŠ” ë¬´ì‹œëœë‹¤.
- ê·¸ëŸ°ë° ë§Œì•½ ìœ„ì™€ ê°™ì€ html êµ¬ì¡°ì—ì„œ ë¶€ëª¨ divì— ë”°ë¼ ìì‹ divë„ íšŒì „í•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?
- `transform-style` ì†ì„±ì„ `preserve-3d`ë¡œ ì„¤ì •í•˜ë©´ (ê¸°ë³¸ê°’ì€ `flat`) ìì‹ì´ ë¶€ëª¨ì˜ 3D ê´€ë ¨ ì†ì„±(`perspective` ë“±ì˜ ì†ì„±ë“¤)ì„ ì´ì–´ë°›ì•„ ì´ë¥¼ GPUê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

### `transform-origin`

ì–´ë””ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë³€í˜•ì´ ì¼ì–´ë‚˜ê²Œ í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì†ì„±

```
// x,yê°€ ëª¨ë‘ 50%ì´ë¯€ë¡œ ì •ê°€ìš´ë° ì ì„ ê¸°ì¤€ìœ¼ë¡œ íšŒì „í•  ê²ƒì´ë‹¤.
transform-origin: 50% 50% 0

/ yê°€ 100%ì´ë¯€ë¡œ ì´ë¯€ë¡œ ì •ê°€ìš´ë° ì ì„ ê¸°ì¤€ìœ¼ë¡œ íšŒì „í•  ê²ƒì´ë‹¤.
transform-origin: 50% 100% 0
```

```html
<head>
  <style>
    @keyframes spin {
      to {
        transform: rotateX(360deg);
      }
    }
    html,
    body {
      height: 100%;
    }
    body {
      perspective: 800px;
      background: #404040;
    }
    .test {
      width: 300px;
      height: 300px;
      background: #aaa;
      position: absolute;
      margin-left: -150px;
      margin-top: -150px;
      animation: spin 4s linear infinite;
    }
  </style>
</head>
<body>
  <div class="test" style="left:25%;top:50%;transform-origin:50% 0%"></div>
  <div class="test" style="left:50%;top:50%;transform-origin:50% 50%"></div>
  <div class="test" style="left:75%;top:50%;transform-origin:50% 100%"></div>
</body>
```

ìœ„ ì˜ˆì œëŠ” `transform-origin` ì„ ë‹¤ë¥´ê²Œ ì¤¬ì„ ë¿ì¸ë° ê°ê°ì˜ ì‚¬ê°í˜•ì´ `transform-origin` ê°’ì— ë”°ë¼ ë‹¤ë¥¸ ìœ„ì¹˜(ì¶•)ì„ ê¸°ì¤€ìœ¼ë¡œ íšŒì „í•œë‹¤.

### `backface-visibility`

- frontfaceëŠ” ì•ë©´, backfaceëŠ” ë’·ë©´
- backfaceë¥¼ ë³´ì´ê²Œ í•˜ê³  ìš”ì†Œë¥¼ íšŒì „ì‹œí‚¬ê²½ìš°(ê°€ì •) ì•ë©´ê³¼ ê°™ì€ ì´ë¯¸ì§€ê°€ ë³´ì¸ë‹¤. (backfaceë¥¼ ì•ˆ ë³´ì´ê²Œ í•˜ëŠ” ê²½ìš° ë’·ë©´ì´ ë³´ì´ë„ë¡ íšŒì „ë˜ëŠ” ìˆœê°„ íˆ¬ëª…í•˜ê²Œ ë³´ì¼ ê²ƒ)
- ì•ë©´ì€ ë¹¨ê°•, ë’·ë©´ì€ íŒŒë‘ ì²˜ëŸ¼ ì•ë’·ë©´ì´ ì „í˜€ ë‹¤ë¥¸ ê±¸ ë³´ì—¬ì£¼ê³  ì‹¶ë‹¤ë©´ frontfaceê°€ ë¹¨ê°•, íŒŒë‘ì¸ ìš”ì†Œë¥¼ íšŒì „ì‹œí‚¤ë©° backfaceë¥¼ ì•ˆë³´ì´ê²Œ í•˜ë©´ ëœë‹¤.(backface ê¸°ë³¸ê°’ì´ ê·¸ë¦¬ê²Œ ë˜ì–´ìˆìœ¼ë¯€ë¡œ falseê°’ì„ ì£¼ë©´ backfaceë¥¼ ê·¸ë¦¬ì§€ ì•Šê²Œ í•  ìˆ˜ ìˆë‹¤)
- ì´ë ‡ê²Œ backfaceë¥¼ ë³´ì´ì§€ ì•Šê²Œ í•˜ëŠ” ê²ƒì€ ìœ ìš©í•  ë•Œê°€ ë§ë‹¤.
- ex) ì•ˆì€ ì•ˆ ë³´ì´ëŠ” íë¸Œë¥¼ ë„ìš¸ ê²½ìš°, ì»´í“¨í„°ëŠ” ë³´ì´ì§€ ì•ŠëŠ” ë©´ë„ ê·¸ë¦¬ê³  ìˆë‹¤. ë”°ë¼ì„œ ë‚´ë¶€ë¥¼ ê·¸ë¦¬ì§€ ì•Šê²Œ ì„¤ì •í•´ì£¼ë©´ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤. (ê·¸ë¦¼ ê·¸ë¦¬ëŠ” ì‘ì—…ì´ ë¶€í•˜ê°€ ê°€ì¥ í¬ë‹¤. ë¶€í•˜ë¥¼ ì¤„ì—¬ì•¼í•œë‹¤!)

> 3D ì‘ì—…ì€ ì „ë¶€ ë‹¤ GPUê°€ í•œë‹¤. ì¼ë¶€ëŸ¬ GPUê°€ ê·¸ë¦¼ì„ ê·¸ë¦¬ê²Œ í•˜ë ¤ê³  3D ì†ì„±ì„ ì£¼ëŠ” ê²½ìš°ë„ ìˆëŠ”ë° rotate 0degë¥¼ ì¤˜ì„œ CPUê°€ ì•„ë‹Œ GPUë¡œ ì‘ì—…ì„ í•˜ê²Œ í•˜ëŠ”ê²Œ í•œ ê°€ì§€ ì˜ˆì‹œë‹¤.

[`transform-origin`](#transformorigin) ì—ì„œ ë´¤ë˜ ì˜ˆì œì˜ `.test` style íƒœê·¸ì— `backface-visibility: hidden;` ì†ì„±ì„ ì¶”ê°€í•´ë³´ì. ì‚¬ê°í˜•ë“¤ì´ íšŒì „í•˜ë‹¤ê°€ ë’·ë©´ì„ ë³´ì´ëŠ” ìˆœê°„ë¶€í„° íˆ¬ëª…í•´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

# Comment

# References

# íŒ€ì›ë“¤ ê²°ê³¼ë¬¼â€

> **STEP 44**
>
> - ì‘ì„±ì: Wol-dan (@pul8219)
> - ìŠ¤í„°ë”” ì£¼ì œ: FrontEnd ë©´ì ‘ ìŠ¤í„°ë”” <https://gitlab.com/siots-study/topics/-/wikis/%EC%8B%AC%ED%99%941>
> - ê³µë¶€ ë²”ìœ„: STEP 43 [ì½”ë“œìŠ¤í”¼ì¸ 76 CSS Rendering - 4íšŒì°¨](https://www.youtube.com/watch?v=Tf5KvpYNNv8c) `2/3`
> - ê¸°í•œ: 07/03(í† ) ~ 07/06(í™”) (STEP 44)
> - [ğŸ“‹ ìŠ¤í„°ë”” ë¬¸ì„œ ëª©ë¡ ë°”ë¡œê°€ê¸°](https://github.com/pul8219/TIL/blob/master/Documents/FrontEnd-Study/README.md)

JSë¡œ 3D ë“œëŸ¼í†µ ê·¸ë¦¬ê¸°

# ë“œëŸ¼í†µ ê·¸ë¦¬ê¸°

CSSë¡œ íšŒì „í•˜ëŠ” ë“œëŸ¼í†µì„ ê·¸ë ¤ë³´ì. íŠ¸ëŸ¼í†µì€ ìˆ˜ë§ì€ ì§ì‚¬ê°í˜•ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì˜†ë©´ê³¼ ì›í˜•ì¸ ìƒí•˜íŒìœ¼ë¡œ ë§Œë“¤ì–´ì•¼í•œë‹¤.

## ë°©ë²•1. JS Mix

<img src="https://images.velog.io/images/pul8219/post/aaab4f7c-c637-41f5-b26a-cc42211e126e/ezgif.com-gif-maker.gif" width="40%">

ë¨¼ì € ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë“œëŸ¼í†µì„ ë§Œë“¤ì–´ë³´ì.

![](https://images.velog.io/images/pul8219/post/d1744b53-1641-4fd1-be4b-c93a695e5c54/image.png)

ë“œëŸ¼í†µì€ ìœ„ì™€ ê°™ì€ ì´ë¯¸ì§€ í•œê°œë¥¼ ì´ìš©í•´ CSS splitìœ¼ë¡œ ì˜ë¼ì„œ ì‚¬ìš©í•  ê²ƒì´ë‹¤.(ì—¬ëŸ¬ê°œì˜ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.)

> `3D` ìš©ì–´
>
> - ì•„í‹€ë¼ìŠ¤: `3D`ì—ì„œëŠ” ì´ë¯¸ì§€ ì†ŒìŠ¤ë¥¼ `í…ìŠ¤ì³`ë¼ê³  í•˜ëŠ”ë°, í•˜ë‚˜ì˜ í…ìŠ¤ì³ê°€ ì—¬ëŸ¬ê°€ì§€ í…ìŠ¤ì³(ë“œëŸ¼í†µ ì˜ˆì—ì„  ì˜†ë©´, ëšœê»‘ ë“±)ë¥¼ ëŒ€ì‹ í•˜ëŠ” ê²½ìš° `3D`ì—ì„  ê·¸ í…ìŠ¤ì³ë¥¼ `ì•„í‹€ë¼ìŠ¤`ë¼ê³  ë¶€ë¥¸ë‹¤.(CSSì—ì„  split) ì •ìœ¡ë©´ì²´ëŠ” 6ê°œì˜ ì‚¬ê°í˜• ë©´(face)ì„ ì˜ í•©ì¹˜ë©´ ì •ìœ¡ë©´ì²´ê°€ ëœë‹¤. ì´ëŸ° ê²ƒì²˜ëŸ¼ faceì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì•„í‹€ë¼ìŠ¤ë¡œ ê³µê¸‰ë°›ì•„ì„œ ì´ë¥¼ ì˜ ë³€í˜•í•˜ë©´ í•˜ë‚˜ì˜ ë“œëŸ¼í†µ, ì‚¬ëŒ, ì •ìœ¡ë©´ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
> - ë§¤ì‰¬(Mesh): ì´ë ‡ê²Œ ë©´(face)ì´ ëª¨ì¸ ê²ƒì€ í•˜ë‚˜ì˜ ì…ì²´ê°€ ë˜ê³  ì´ë¥¼ ë§¤ì‰¬ë¼ê³  ë¶€ë¥¸ë‹¤.

![](https://images.velog.io/images/pul8219/post/ac9b7f14-cd1b-45e6-81d6-fa2850f801a9/image.png)

- ë©´(face)ë“¤ì„ ë‚˜ëˆ„ê¸° ìœ„í•´ì„œëŠ” `x, y, z`, `height, width`ê°’ì´ í•„ìš”í•˜ë‹¤.
- ì•„í‹€ë¼ìŠ¤ ì•ˆì—ì„œì˜ ì˜ì—­ì„ ì¸ì‹í•˜ê¸° ìœ„í•´ `tx, ty`ê°’ì´ í•„ìš”í•˜ë‹¤.
- íšŒì „í•˜ê¸° ìœ„í•´ì„œ `rx, ry, rz` ê°’ì´ í•„ìš”í•˜ë‹¤.

```html
<style>
  @keyframes spin {
    to {
      transform: rotateY(360deg) rotateZ(360deg) rotateX(720deg);
    }
  }
  html,
  body {
    height: 100%;
  }
  body {
    perspective: 600px;
    background: #404040;
  }
  .ani {
    animation: spin 4s linear infinite;
  }
  .drum {
    background: url('http://keithclark.co.uk/labs/css-fps/drum2.png');
  }
</style>
```

```js
// divë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” El í´ë˜ìŠ¤
const El = class {
  constructor() {
    this.el = document.createElement('div');
  }
  set class(v) {
    this.el.className = v;
  }
};

// Elì„ ìƒì†ë°›ëŠ” Face í´ë˜ìŠ¤
const Face = class extends El {
  constructor(w, h, x, y, z, rx, ry, rz, tx, ty) {
    super();
    this.el.style.cssText = `
      position: absolute;
      width: ${w}px;
      height: ${h}px;
      margin: -${h / 2}px 0 0 -${w / 2}px;
      transform: translate3d(${x}px, ${y}px, ${z}px)
        rotateX(${rx}rad) rotateY(${ry}rad) rotateZ(${rz}rad);
      background-position: -${tx}px ${ty}px;
      backface-visibility: hidden; //â­
    `;
  }
};
```

![](https://images.velog.io/images/pul8219/post/2dd98101-5283-4d4b-84c4-14c80ae24d02/image.png)

- ê·¸ë¦¼ì´ ìƒê¸°ë©´ ì´ë ‡ê²Œ ì¢Œìƒë‹¨ ì ì´ ê¸°ì¤€ì´ ëœë‹¤. ê·¸ë¦¼ì„ ì˜®ê²¨ ì •ì¤‘ì•™ì ì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ë„ë¡ marginì— ì½”ë“œì²˜ëŸ¼ ê°’ì„ ì¤€ë‹¤.

> ì¤‘ì•™ ì •ë ¬
>
> - ìš”ì†Œê°€ absoluteê°€ ì•„ë‹ ë•Œ, marginì˜ left, rightì— autoë¥¼ ì£¼ë©´ ëœë‹¤.
> - ìš”ì†Œê°€ absoluteì¼ ë•Œ, marginì˜ topì— heightì˜ `1/2`ì„ ë°°ê³ , leftì— widthì˜ `1/2`ì„ ëº€ë‹¤.

> marginì€ top, right, bottom, leftìˆœ (ë°˜ì‹œê³„ ë°©í–¥)

```js
// Faceë¥¼ ëª¨ì•„ í•˜ë‚˜ì˜ Mesh(ë“œëŸ¼í†µ)ë¥¼ ë§Œë“œëŠ” í´ë˜ìŠ¤
const Mesh = class extends El {
  constructor(l, t) {
    super();
    this.el.style.cssText = `
      position: absolute;
      left: ${l}; top: ${t};
      transform-style: preserve-3d;
    `;
  }

  add(face) {
    if (!(face instanceof Face)) throw 'invalid face';
    this.el.appendChild(face.el);
    return face;
  }
};
```

- Meshë„ divë¡œ ì—¬ëŸ¬ divë“¤ì„ ê°€ë‘ëŠ” ì—­í• ì„ í•œë‹¤. (ê·¸ë˜ì„œ Elì„ ìƒì†ë°›ì•˜ë‹¤.)
- ìì‹ë“¤ë„ ìì‹ ê³¼ ê°™ì€ ì†ì„±ì„ ì´ì–´ë°›ì„ ìˆ˜ ìˆë„ë¡ `transform-style: preserve-3d`ë¡œ ì„¤ì •í•œë‹¤. ([STEP 43](https://pul8219.github.io/frontend-study/fe-study-step43/#transform-style) ì°¸ê³ )
- Meshê°€ ìœ„ì¹˜í•  ê°’ì„ `left`, `top`ë¡œ ì¤€ë‹¤.
- `add`ë©”ì†Œë“œ: ë‚˜ì˜ divì— Face element(ìì‹)ì„ ì¶”ê°€

```js
// ë³¸ê²©ì ìœ¼ë¡œ ë“œëŸ¼í†µì„ ë§Œë“¤ì–´ë³´ì
const mesh = new Mesh('50%', '50%');

const r = 100,
  height = 196,
  sides = 20;
const sideAngle = (Math.PI / sides) * 2;
const sideLen = r * Math.tan(Math.PI / sides);

for (let c = 0; c < sides; c++) {
  const x = (Math.sin(sideAngle * c) * r) / 2;
  const z = (Math.cos(sideAngle * c) * r) / 2;
  const ry = Math.atan2(x, z);
  const face = new Face(sideLen + 1, height, x, 0, z, 0, ry, 0, sideLen * c, 0);
  face.class = 'drum';
  mesh.add(face);
}

const tface = new Face(100, 100, 0, -98, 0, Math.PI / 2, 0, 0, 0, 100);
const bface = new Face(100, 100, 0, 98, 0, -Math.PI / 2, 0, 0, 0, 100);
tface.class = 'drum';
bface.class = 'drum';
mesh.add(tface);
mesh.add(bface);
mesh.class = 'ani';
document.body.appendChild(mesh.el);
```

- `r(ë°˜ì§€ë¦„)`, `height(ì›í†µì˜ ë†’ì´)`
- `sides`: ì˜†ë©´ì„ ì–¼ë§ˆë‚˜ ë“±ë¶„í•  ê±´ì§€ì— ëŒ€í•œ ë³€ìˆ˜ì´ë‹¤. ì—¬ê¸°ì„  20ë“±ë¶„ í–ˆë‹¤ëŠ” ê²ƒ
- `sideAnle`: ê° sideì—ì„œ ì›ì˜ ì¤‘ì‹¬ì ì„ í–¥í•˜ê²Œ í–ˆ`ì„ ë•Œ ê°ë„ì´ë‹¤. (ë¼ë””ì•ˆ ê¸°ì¤€ì—ì„œ PIëŠ” 180ë„ì´ê¸° ë•Œë¬¸ì— 360ë„ë¡œ ë§Œë“¤ê¸° ìœ„í•´ 2ë¥¼ ê³±í•´ì¤¬ë‹¤.)
- `sideLen`: ë‚˜ë‰œ ë©´ì´ ì›ì—ì„œ ì°¨ì§€í•˜ëŠ” ê¸¸ì´ (ì—¬ê¸°ì„œ `tan`ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  `sin`ì„ ì‚¬ìš©í•˜ë©´ ë‚˜ëˆ„ëŠ” ë©´ ê°œìˆ˜ê°€ ì ìœ¼ë©´ ì‚¬ì´ ê³µê°„ì´ ë¹Œ ìˆ˜ ìˆë‹¤)

- `forë¬¸`: forë¬¸ì„ ëŒë©´ì„œ sideê°€ 20ê°œë©´ 20ê°œì˜ Faceë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤.

  - `x, z` ë¥¼ ì£¼ëŠ” ì´ìœ ëŠ” ëˆ„ì›ŒìˆëŠ” ì›ì„ x,y,zë¡œ ì´ë£¨ì–´ì§„ í‰ë©´ì˜ x,zì— ê·¸ë ¤ì•¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
  - ì›ì£¼ì— ë‹¿ëŠ” ì ‘ì ì„ ê·¸ë¦¬ê¸° ìœ„í•´ `sin`, `cos`ì„ ì‚¬ìš©í•œë‹¤.(ì›ì—ì„œ ì›ì£¼ì— íŠ¹ì • ê°ë„ì— ìœ„ì¹˜í•œ ì ì„ êµ¬í•˜ë ¤ë©´, ë¼ë””ì•ˆê°’ì„ ì•Œê³  ìˆì„ ë•Œ sin,cosë¥¼ ì´ìš©í•´ x,zë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.)
  - x,zë¡œ `arc tan`ì„ ì´ìš©í•˜ë©´ ë¹—ë©´ë“¤ì„ ì–¼ë§ˆë§Œí¼ íœ˜ê²Œ í• ì§€ ì •í•  ìˆ˜ ìˆë‹¤. (ì¦‰ ëª‡ë„ë¥¼ ëŒë ¤ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.)
  - `ry`ëŠ” yì¶•ì„ ê¸°ì¤€ìœ¼ë¡œ íšŒì „í•˜ë©° ì˜†ë©´ì„ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— ì •ì˜í•œ ê²ƒì´ë‹¤.
  - `new Face` ë¼ì¸: `sideLen+1` í‹ˆ ë²Œì–´ì§€ì§€ ë§ë¼ê³  1ì„ ë”í•´ì¤¬ë‹¤. / x,z ì›ì£¼ì—ì„œì˜ ìœ„ì¹˜ / ê°ë„ëŠ” ryë§Œ íšŒì „ì‹œí‚¤ë©´ ë˜ë‹ˆê¹Œ ì´ë ‡ê²Œ ì„¤ì • / `sideLen*c` í•´ë‹¹ faceê°€ ëª‡ë²ˆì§¸ ìœ„ì¹˜ì¸ì§€ ì•Œ ìˆ˜ ìˆê²Œ ì¤€ ê°’
  - `face.class = 'drum';`: ì´ë¯¸ì§€ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ í•œë‹¤.
  - Meshì— ì§€ê¸ˆ ë§Œë“  Faceë¥¼ ì¶”ê°€í•œë‹¤.

**`backface-visibility` ì ìš©**

- Faceì— `backface-visibility: hidden`ì„ ì£¼ê³ (â­í‘œì‹œ ì½”ë“œë¼ì¸ ì°¸ê³ í•˜ê¸°) ìœ„ì•„ë˜ ëšœê»‘ì„ ì£¼ì„ìœ¼ë¡œ ì ê¹ ì—†ì• ë³´ì.
- ë’·ë©´ì´ ë³´ì¼ ë•Œë§ˆë‹¤ íˆ¬ëª…í•´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ëšœê»‘ì„ ë‹¤ì‹œ ì”Œìš°ë©´ ì˜ ì‘ë™ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
- ì´ë ‡ê²Œ ì•ˆ ë³´ì´ëŠ” ê³³ì„ ê·¸ë¦¬ì§€ ì•Šê²Œ `hidden`ì‹œí‚´ìœ¼ë¡œì¨ ìì›ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤. ([STEP 43](https://pul8219.github.io/frontend-study/fe-study-step43/#transform-style) ì°¸ê³ )

ë°©ë²•2ëŠ” ë‹¤ìŒ í¬ìŠ¤íŒ…ì— ê³„ì†

# Comment

# References

# íŒ€ì›ë“¤ ê²°ê³¼ë¬¼â€

## ë°©ë²•2. sass ë¡œëŠ” ì–´ë–»ê²Œ ë§Œë“œë‚˜. 58ë¶„ ì´í›„

ì˜ˆì •
