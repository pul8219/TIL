<!doctype html>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/danfojs@0.1.2/dist/index.min.js"></script>
    </head>
    <body>
        <div id="s_table"></div>
        <div id="s_line"></div>
        
        <div id="d_table"></div>
        <div id="d_line"></div>
        <script>
            
//             시리즈 생성 https://danfo.jsdata.org/getting-started#object-creation
            // const s = new dfd.Series([20, 21, 22, 23]); 
            // s.print();

            // //tensor로 시리즈 생성
            // const tf = dfd.tf
            // let tensor_arr = tf.tensor([12,34,56,2]);
            // let s = new dfd.Series(tensor_arr);
            // s.print();


//             시리즈 API https://danfo.jsdata.org/api-reference/series
            // s.describe().print(); // describe() 시리즈에 대한 통계정보를 담고 있는 새로운 시리즈가 만들어짐

//             시각화 https://danfo.jsdata.org/api-reference/plotting
// html안에 넣는 방법
            // s.plot('s_table').table(); // 표가 생성됨
            // s.plot('s_line').line(); // 시리즈에 대한 선 정보를 그리고 싶을 때

            
//             데이터프레임 생성 https://danfo.jsdata.org/getting-started#object-creation
//             배열 방식(만드는 방식1) // 행 하나하나를 나타냄
            const d1 = new dfd.DataFrame([
                {'온도':20, '요일':'월', '판매량':40},
                {'온도':21, '요일':'월', '판매량':42},
                {'온도':22, '요일':'월', '판매량':44},
                {'온도':23, '요일':'월', '판매량':46}
            ]);
            // d1.print();

            // json 데이터로 데이터프레임 생성
            // json_data = [{'온도':20, '요일':'월', '판매량':40},
            //     {'온도':21, '요일':'월', '판매량':42},
            //     {'온도':22, '요일':'월', '판매량':44},
            //     {'온도':23, '요일':'월', '판매량':46}]

            //     df = new dfd.DataFrame(json_data)
            //     df.print()
            
//             객체 방식(만드는 방식2) // 객체 프로퍼티 하나하나는 컬럼과 그 컬럼의 값들
            // const d2 = new dfd.DataFrame({
            //     '온도':[20,21,22,23],
            //     '요일':['월', '월', '월', '월'],
            //     '판매량':[40,42,44,46]
            // });
            // d2.print();
            
//             파일로부터 데이터프레임 생성 https://danfo.jsdata.org/api-reference/input-output
            
            // dfd.read_csv('https://gist.githubusercontent.com/egoing/43799f48b55b5eb2a8b37652eab72318/raw/3a207dd85d0b74968426e65ae2cee4cb1d4aef4f/lemon.csv')
            //     .then(function(data){//              
            //         data.print();
            //     });
               
            // d1.describe().print();

            // d1.plot('d_table').table();

            // d1.plot('d_line').line();

            // d1.print();


//             데이터 선택   https://danfo.jsdata.org/getting-started#selection
            // const s = new dfd.Series([20, 21, 22, 23]);
            // console.log(s, d1['온도'], d1); // s와 d1['온도']는 Series이다. 

//             label of content   https://danfo.jsdata.org/api-reference/dataframe/danfo.dataframe.loc
            // d1.loc({columns:['온도', '판매량']}).print(); // 컬럼 이름으로 가져오기 // 위치기반으로 가져올 땐 iloc 사용

            // d1.loc({rows:[1,3]}).print(); // 특정 행만 가져오고 싶을 때 (1,3행만 가져옴. 0,2행 제외)

            // d1.loc({columns:['온도', '판매량'], rows:[1,3]}).print();
            
//             논리비교를 이용한 필터링 https://danfo.jsdata.org/api-reference/dataframe/danfo.dataframe.query
            //     온도(컬럼)가 20보다 큰 경우 데이터 가져오기 // 이렇게 query로 가져오면 새로운 데이터프레임이 만들어지고 이걸 .print
            // d1
            //     .query({ "column": "온도", "is": ">", "to": 20 })
            //     .print();

            // d1
            //     .query({ "column": "온도", "is": ">", "to": 20 })
            //     .query({ "column": "판매량", "is": "<", "to": 46 })
            //     .print();
            //  이렇게 줄줄이 함수를 붙이는 방법은 체이닝 이라고 함


//             행 추가
            const newRow = new dfd.DataFrame({'온도':[24,25], '요일':['월','월'], '판매량':[48,50]});
            d1.append(newRow).print();
            
//             열 추가
            d1.addColumn({ "column": "비", "value": [1,0,1,0]});
            d1.print();


              
//             행삭제(행, x축 -> axis:0)
            d1.drop({axis:0, index:[0]}).print();
            // 열삭제(열, y축 -> axis:1)
            d1.drop({axis:1, columns:['온도']}).print();
                
//             to Array // 데이터들을 배열로 바꾸려면
//             d1.to_json().then(function(json){ // to_json() json 데이터를 가진 string으로 만들어줌
//                 console.log(JSON.parse(json)) // json 데이터를 자바스크립트의 데이터 스트럭쳐로 바꿔줌
//             });

//          tensorflow와 친한 danfo.js // d1이 가진 데이터를 tensor로 바꿔줌
//             d1.tensor.print();

        </script>   
    </body>
</html>