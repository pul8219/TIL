목표: 임베디드시스템, 스마트카 자율주행차에서 발생하는 다양한 보안 이슈에 대해 학습하기 위해

[200903](#200903)
[200910](#200910)
[200917](#200917)
[200924](#200924)
[201008](#201008)

# 200910

2주차

## 자동차 취약점 분석 및 해킹 동향

자동차가 외부 네트워크와 연결되는(커넥티드카) 때가 된 이후 해킹 위험 높아짐

자동차와 스마트키 사이 주파수 가로채서 문열어버리는 연구 동영상으로 보여주심

MSSDL 소프트웨어 전체 설계, 개발, ... 소프트웨어 전체 라이프 사이클 모든 단계에서 보안을 강화해야한다.라는 의미

escrypt? 독일 기업

자동차보안이라는 개념을 처음 제시한 독일의 어떤 대학교 안에 정보보호연구소에서 만들어낸 escrypt라는 회사
지금은 도씨의 모회사? 자동차 보안 1위 회사

윤리적 딜레마

```
윤리적 딜레마는 총 3가지 조건에 대해 생각해 보는 것입니다.

1. 정지하지 않고 계속 달리면, 10명의 사상자 발생

2. 왼쪽으로 틀면, 운전자 사망

3. 오른쪽으로 틀면, 정당한 보행자 1명 사망

이때 자율주행 알고리즘은 어떻게 해야 할까?

우리는 어떻게 이런 상황에 대비해야 할까?

```

이 알고리즘은 그냥 가야되나 1명을 쳐야되나 다른 대책이 있나 왜 이런 상황이 발생할 수 밖에 없는가 등등을 고민해보기
중간평가로 내든 그 전에 물어보든 할거래 고민해보기!

## 학습했거나 들어본 것 정리

Fuzzing 무작위 데이터

# 200917

3주차(본격적인 범위는 여기부터)

2페이지

1. Module1 정보보호 기본 용어 분석

Module1에 입각해(여기서 배운 용어의 정의를 이해하고 사용해야함) 중간 과제를 수행해야됨

2. 사이버 킬 체인
   사이버 공격을 시작부터 끝까지 단계별로 분석하는 방법 중 하나

## Module1 정보보호 기본 용어 분석

보안자산
공격할 대상(공격자 입장) / 지켜야할 대상(방어자 관점)

5페이지

보안자산이란?
제품 이해 관계자에게 가치가 있는 (회사 서비스 입장에서) 서비스, 플랫폼, sw 등이나 여기서 지켜져야되는 것, 외부로 함부로 노출되어선 안되는 것
=> 쉽게 표현하여 사이버 공격으로부터 안전하게 지켜야되는 무언가(ex. 정보/데이터, 소프트웨어, 서버 같은 물리적 자산, 서비스, 인력 등)

유형 혹은 무형의 상태를 가짐

7페이지

취약점: 시스템을 위협에 노출시키는 시스템의 약점
(ex. 사용자에게 허용된 권한 이상의 동작 가능케하는 약점, 사용자 및 관리자의 부주의나 사회공학 기법에 의한 약점도 포함)

+보안 자산에 내재하고 있는 취약점은 공격에 사용될 수 있다.

8페이지

약점 vs 취약점

약점: 개발 단계 / 공격에 활용될 여지가 있는
취약점: 운영 단계 / 실제로 공격에 사용될 수 있는

9페이지

완전히 안전한 sw같은 걸 만들기란 불가능 + 발견되지 않은 약점이 있을 수도 있음 / 발견된 것(화이트 해커가 찾거나 회사에서 찾았거나 ...등)

sw 에는 약점이 있을 수 있고 그중엔 공격에 사용될 수 있는 취약점이 있을 수 있음

보안 약점(security weakness): 해킹 등 실제 보안사고에 악용될 수 있는 오류, 버그와 같은 근본 원인

보안 취약점(security vulnerability): 해커(위협원)가 보안 약점을 악용하여 발생하는 실제적인 위협

10페이지

해커 = 위협원 이라 표현

11페이지

위협원: 보안 자산에 손실을 초래할 수 있는 행위를 하는 것
보안 자산의 취약점을 이용해 해킹하려는 존재
(ex. 경쟁 기업, 사내 임직원, 해커, 테러리스트 등)

15페이지

위협원이 위험행동을 해서 (위협원이 원하는 결과를 달성시켰을때. 위협원이 자신의 목적을 달성했을 때) -> 위험

16페이지

위협 vs 위험

위협:

위험:

17페이지

위협vs위험을 잘 이해하기 위해서는 그림을 총체적으로 봐야해

위협을 하는 위협원은 끊임없이 취약점 분석 행위를 하려고 함 - 이걸 사전에 막을 수는 없음 (위협은 왜 제어할 수 없는가에 대한 답)

회사는 취약점을 최소화시키고 보안 조치를 해놓으면 위협원이 위협행동을 통해 일으킬 수 잇는 위험을 줄일 수 있음 (위험을 감소시키려면)

취약점을 정리한 게 있대 cve, cwe 등(보안 정보 공유 체계) - 시큐어 코딩에서 많이 가르친대

20페이지

이를 위해 해야하는게 위협모델링 -> 시큐어 코딩, 악성코드 분석 등에서 배움

- 정보보호이론 필요(기본적인 암호 알고리즘 공개키, 비밀키, 인증 방식 등)

21페이지

이제 방어자 관점!

어떠한 목적을 위해 조치를 취할 것인가?

22페이지

보안 목적(security objectives): 정보 보호 시스템을 통하여 궁극적으로 달성하고자 하는 최종 보안 요구 사항. (최종 보안 요구 사항으로는 기밀성, 무결성, 가용성 등이 있다.)

ex)
사용자 주소 정보를 안전하게 관리해야한다!면
목적: 사용자 주소 정보의 기밀성 보장해야한다>외부에 노출되면 안됨>노출되더라도 그 의미에 대해서 파악할 수 없어야한다.

23페이지

정보보호기술 사용하는 이유: 보안자산의 취약점 줄이고, 위협원으로부터의 위협을 사전에 방어하기 위해서 일 것

정보보호기술 도입하는 이유, 보안목적: 3요소 지키고 싶어서

- 정보 보안의 3요소(기본적인 3요소) CIA

기밀성
인가된 사용자만 정보자산에 접근할 수 있음.(ex.방화벽, 암호, 패스워드 등이 대표적인 예)

무결성
보안자산이 외부로부터 변조되지 않았다는 걸 알려주고싶고
(적절한 권한을 가진 사용자가 인가한 방법으로만 정보를 변경할 수 있도록 하는 것)

가용성
필요한 시점에 정보 자산에 대한 접근이 가능하도록 하는 것

26페이지

보안 요구사항(security requirement): 보안 목적을 달성하기 위한 매우 자세한 기능적/비 기능적 사양
을 명시하는 것!

27페이지

이제 보안 요구사항에 맞는 보안 조치를 취해야겠지

28페이지

보안조치(security measures): 기밀성, 무결성, 가용성의 손실을 예방, 탐지, 복구하는 기술적인 메커니즘 또는 조직적인 대책이다.

29페이지

여기 보이는 3가지 프로세스는 반복될 수 있음. 왜?
=> 보안조치 수행하기위해 또 다른 보안목적 나타날 수 있기 때문

31페이지

대칭키 알고리즘을 쓰겠다 했을 때 (보안조치 정의)
=>
그 키는 어떻게 안전하게 나누어줄 것이냐?
또 나누어준 키는 각각 어떻게 안전하게 보관할 것이냐?
등등의 새로운 문제 발생 가능

보안조치에서 새로운 요구사항 발생
AES 사용한 주소 정보 암호화
(대칭키를 써도 키가 안전하게 보호되지 않는다면 안전할 수 없다.)

- 키를 안전하게 관리해라
- 요구사항: (인증된 자만 접근할 수 있는)시큐어 스토리지에 키를 보관하겠다
- 기술은? 스마트 카드를 사용하겠다.

특정 사례를 (보안 사고 사례)기반으로 각각의 보안 용어 매칭시키면 더 이해가 쉬울 것

## Cyber Kill Chain

34페이지

사이버 킬 체인 (정의): 사이버 공격을 프로세스상으로 분석해, 각 공격 단계에서 조직, 서비스, 시스템 등에 가해지는 위협 요소를 파악하고, 공격자의 목적, 의도, 활동을 분쇄/완화해 보안 조직의 시스템을 확보하는 것.

간단히 말하면, 사이버 공격 활동을 파악, 분석해 공격 단계별로 조직에 가해지는 위협 요소를 제거하거나 완화하는 것.

36페이지

어떠한 공격들은 다 이런 단계를 가지고 있음

정찰 / 취약점 분석
무기화, 유포, 악용 / 취약점 이용해 위협을 가하기 위한 준비
설치, 명령&제어, 목적달성 / 만들어진 악성코드를 ~

각 단계별로 공격 특징이 나타나기 때문에
각 단계별로 그 공격 특징을 완화시키는 보안기술을 적용한다면 안전한 시스템을 만들 수 있지 않을까 라는 생각으로 사이버 킬 체인 운영.
이걸로 분석하면 사고 방지 할 수 있음

37페이지

잘 정의된 논문 소개

1. 정찰
   공격을 수행하기 위해 공격 목표물인 보안 자산에 대해 분석하는 단계
   공격자들은 상당히 오랜 기간 준비하는데 시간 제일 많이 소요하는게 정찰 단계

apt 공격(지능형 지속 위협)

취약점이 될 수 있는 것 : 시큐어 코딩을 안한 것, 사람의 사회적 습성, 하드웨어의 물리적 문제

2. 무기화

악성코드를 만드는 것 처럼

38페이지

3. 유포

만든 무기(악성 코드)를 보안 자산에 전달

(유포 단계에 적절하게 대응함으로써 이 단계를 막을 수도 있음)

4. 악용

악성코드가 보호대상에 깔리는. 설치될 수 있게끔 하는 과정. 공격자가 원하는 코드가 발현되는 시점

악용과 설치가 애매모호하긴 함

5. 설치

발현되서 본격적으로 악성코드들이 설치되는 과정. 백도어나 원격 접근 설치

6. 명령과 제어

7. 목적달성

39페이지

유포 악용 설치가 애매하면 카테고리를 합치거나 생각하는대로 분석해서 써도됨

40페이지

IPS 침입 방지 시스템
IDS 침입 탐지 시스템

42페이지

비행기 티켓 전체 찍어서 올리면 안돼!
일련번호 노출됨

44페이지

직접 읽어보래

46페이지

정찰: 모니터링, 패킷 분석

자동차를 강제로 제어하기 위한 패킷을 찾았다면

47페이지

방어대책 생각해보기(자유롭게)

48페이지

인터파크 해킹 사태

네이버와 비슷한 피싱 사이트 만들었대. 여기에 인터파크 직원이 로그인

49페이지

정찰 중

50페이지

동생이 보낸척 이메일을 보냄
가족은 이를 열어 실행

52페이지

설치되고나서 명령 기다리고 있음
백도어, 리모트 제어 환경이 완성된 상태임 이미

53페이지

특정 명령을 실행하면 데이터 수집해 공격자쪽으로 전송

인터파크의 사이버킬체인, 방어기법 표를 만들어보기

---

0924내용 추가함!
자동차에 스마트폰 앱 연결하는 방법은 2가지가 있음

1. 차량에 블루투스 혹은 와이파이 모듈 을 설치하여 연결
2. 차량에 내장된 내비게이션? 과 연결되는 것도 있음

각 단계별로 보안 기술을 넣어줌으로써 어떤 단계를 단절시켜 공격행위 자체의 위험도를 낮추는 것이 사이버 킬 체인의 개념임!

자동차 해킹 사례 - 사이버 킬체인 방어 대책 적어보기

**사이버 킬 체인 방어 대책**

- 정찰

패킷 암호화?

- 의미있는 패킷, 정보에 암호화를 통해 기밀성을 부여
- 모니터링 할 수 있는 비 인가 단말의 접근 제한

* 무기화

앱 검증 절차 도입

- (정찰이 뚫린 상태) 어떻게 막을까?
  moving target defense:보호하려는 대상의 모양을 주기적으로 바꿔 공격자의 공격을 막겠다는 것(패킷, 주소의 모양(ip주소를 동적으로 계속 바꾼다던가))

* 유포

앱 검증 절차 미통과 앱은 마켓에 업로드 X

- 악성 코드 내포 유무 검사

* 악용

회사와 출처가 불분명한 앱 다운로드 금지

- 비 인가 앱 사용 금지(자동차 제조사가 제공하는 정식 앱 사용)

* 설치

흠?

- 비 인가 앱 사용 금지(자동차 제조사가 제공하는 정식 앱 사용)

* 명령 및 제어

관리자 권한 없는 명령 불허. 네트워크 접속 불가하게 막기

- 비 인가 개체에 접근 제한

* 목적달성

어떻게막나? ㅠ

- 달성됐다면 위험도 낮추고 피해 최소화 해야겠지
  침입을 실시간으로 확인할 수 있게끔 침입탐지시스템
  요즘 침입탐지시스템 탑재하려고 기술 발전중이래(자동차도 전자화되고 외부 네트워크와 연결이 많아졌고 악성코드가 많아지고 있기 때문)
  비정상 행위 발생시 비상 정지 할 수 있는 시스템으로 위험도 최소화할 수 있게

---

인터파크 사례 - 사이버 킬체인 적어보기

**사이버 킬 체인**

- 정찰:

사람들이 도메인 주소창을 확인하지 않고 포털 로그인을 한다.

- 공격에 사용할 정보 확보(사회공학적 방법으로)

* 무기화:

네이버 포털 사이트 로그인 창을 유사하게 만든 피싱사이트를 제작한다.

- 악성코드만들고 바탕화면에 사용할 수 있는 사진인 것처럼 제작

* 유포:

도메인 주소를 비슷하게 만들어 사이트를 개설한다. (오탈자가 날 경우 피싱 사이트로 올 확률이 높아짐)

피싱 사이트를 통해 얻은 정보를 이용해 네이버 개인정보에 접근한다.

이메일정보를 이용하여 악성코드 파일이 담긴 피싱 메일을 보낸다.

- 동생을 사칭하여 이메일 전송

* 악용:

인터파크 직원은 네이버로 착각한 피싱 사이트에 접속하여 평소처럼 네이버 아이디와 패스워드를 입력하여 로그인버튼을 누른다.

직원 PC에서 피싱 메일의 첨부파일을 다운로드 받고 파일을 실행한다.

- 당부) 모르는 사람으로부터 온 메일의 첨부파일은 되도록 다운로드 받지 말라

* 설치:

공격 대상 서버에 접속하는 등의 행위를 하는 악성코드들도 추가로 설치되며 백도어, 원격접속허용 등이 이루어진다.

- 명령 및 제어:

취약점 공격 및 서버 접속, 명령어 실행

- 목적달성:

공격자는 DB 데이터를 수신하여 인터파크 사용자 정보를 최종적으로 탈취한다.

**사이버 킬 체인 방어 대책**

- 정찰:

개인 프라이버시 보안에 대한 교육, sw, 웹사이트 이용시 보안 주의사항 교육

- 웹 브라우저 url 확인
  비정상 단말 로그인 알림(국외 접근이나 단말별 2차 승인. 요즘 제공되고 있지)

* 무기화:

브라우저 업데이트 주기적으로(OS도?)

- 제로데이 외 취약점 긴급 패치(제로데이 공표되면 바로바로 취약점 긴급패치)
  제로데이 어택(아직 알려지지않은 취약점으로 공격하는 것)
  원데이 어택(취약점이 공개됐는데 패치를 하지 않은 것 공격할 수 있음)

* 유포:

사이트 개설시 지켜야하는 절차 법적 정의 및 관리?

- 악용:

이메일에서 정체가 불분명한 파일 다운로드 및 실행 금지

웹사이트 로그인 등 개인정보 입력시 주소 확인

- 설치:

흠?

- 명령 및 제어:

관리자 권한 없는 어플리케이션 설치 절차 불허

- 목적달성:

사이트, 서비스 이용시 개인정보만으로는 불가능한 추가 인증 절차 도입(2단계 인증)

+당부) 정찰, 무기화, 유포, 악용 은 개인 단계에서도 주의 기울일 필요 있음. 개인정보, 내 데이터, pc, 운영체제를 안전하게 지키기 위한 방편 / 학습을 통해 배운 내용을 일상생활에서도 정보보호를 적용하여 실천하자!

# 200924

4주차

STRIDE 위협모델링

DREAD 각 위협에 대한 위험도 측정

3페이지
보안조치 관련모듈2, 3은 나중에 배울 것

MS-SDL 설계부터 위협모델링을 하기 위해 사용, 시스템 개발하는 단계에서 적합

사이버 사고 대처에 적합한 것은 사이버 킬 체인인 것 같음

module1의 용어를 활용하여 사이버킬체인과 ms-sdl을 이해할 수 있어야함

~9페이지까지 저번에 해보라했던 사이버킬체인 관련 표 이야기

- 배울 것

소프트웨어 개발 보안 방법론은 무엇인지

ms-sdl는 다양한 소프트웨어 개발 보안방법론 중 하나/ 어떻게 구성?

ms-sdl 설계단계에서 수행하는 것이 위협모델링. 이건 무엇인지

⭐
**위협모델링 과정에서 수행되는 data flow diagram, dread(위험도 측정), stride(위협식별) 가장 잘 담고 잇는게 ms-sdl**

## 소프트웨어 개발 보안 방법론

보안기능을 맨 마지막에 하는 방법은
모든 요소마다 보안 노력을 수행하는 방법보다 비용많이듦. 유지보수 비용도 그렇고

13페이지

공격자들은 취약점을 오래 분석하여 공격 실행. 어떠한 프로그램도 공격대상이 될 수있음

약점, 취약점 설명할 때 말한 것 처럼 발견되지 않은 취약점이 있을 수도 있음
시스템 하드웨어 서비스를 장기간 지능화된 공격자들이 분석을하면 어떠한 허점을 찾아낼 수도 있음(apt 공격=지능형 지속 위협)

취약점을 찾아 패치해야함
이런 비용을 최소화하려면 위험도를 낮춰야하는데.. 위협모델링하고, 소웨 개발 보안 방법론 활용해 단계별 보안 인식 가져야함
이미 피해본 고객과 소통하는 단계도 사고 대응에서 필요

16페이지

설계과정 결함을 코딩단계에서 고치면 비용이 5배 든다는 것

보안테스트같은걸 제품출시 직전에 하거나 이런 개발 관행은 후에 사고시 비용 많이 들게 할 수 있음

18페이지

- 요구사항 분석

중요한 정보의 기밀성 보장
요구사항 명세(id,pw는 안전하게 저장되어야한다.)
지켜야할 보안 자산 식별, 정의 행위

- 설계

위협원 도출
외부인터페이스 식별(서비스의 입출력, 또다른 매체와의 연결 등을 식별하고 이 상황에서 일어날 수 있는 위험 상황 생각)
위협모델링
최대한 많은 위협을 도출할것
다양한 시각, 분야의 사람들이 모델링에 참여하는 것 중요

사이버킬체인은 공격 분석임. 설계단계에서 모델링하는 것은 아님

- 구현

표준 코딩 정의서 및 sw 개발 보안 가이드에 따라 개발
sw에 존재하는 취약점 최소화 할 수 있음

- 테스트

모의해킹 들어봤쥬?
베타테스트 때 스캐닝이나 모의침투 테스트함, 퍼징, ...
동적분석 -> 여러 입력값을 넣어 비정상적 행위를 하는지 안하는지 자동화된 툴로 분석 활동

## ms-sdl

sw보안개발방법론
대표적인 방법론 ex)ms-sdl, 오라클 sw 보안 인증 프로세스, 시큐어사 clsp?

20페이지
ms-sdl

약자의 s가 security!

기존의 개발 생명주기에 추가적인 보안 작업을 정의한 것
교육-대응까지 7단계

21페이지

- 교육 단계
  신선!
  각 단계별 보안 기능을 개발자들에게 사전교육으로 실시함으로써 안정화된 sdl단계 진행 가능

22페이지

- 요구사항 단계

보안책임자 선정

23페이지

눈여겨 봐야하는 단계

- 설계 단계

⭐
공격 요소가 될 수 있는 유형의 외형적 요소, 공격 진입점(어디로 공격이 들어오는지) 등 기록
왕 중요! 위협 모델링(구조화된 기법 이용, 보안 자산에 피해줄 수 있는 위협 찾아내고 위협으로 발생하는 위험에 대한 위험도 계산, 위협을 완화시킬 수 있는 대응조치를 파악해가는 과정)

위협모델링 1~1주반 정도 깊게 배울 것

24페이지

- 구현 단계

정적 분석
시큐어 코딩 가이드라인, 행안부 가이드라인에 따라 구현
ex) visual studio 개발 옵션에서 ms-sdl 사용체크해놓으면 c언어 중 scanf 사용하면 워닝 뜸. 이거 취약점있으니까 딴 거 쓰라고

안전하게 sw 개발 하는 과정

25페이지

- 시험 검증 단계

동적 분석 방법 사용
회계? 보안 컨설턴트 있대 화이트 해커도 있고

- 배포 운영 단계

배포 전 최종적 보안 점검

- 대응 단계

사고 발생시 어떻게 대응할 건지 미리 고민해야함
대응시 프로세스에 따라 철저하게 대응
지속적 모니터링 필요(자사의 sw에 대하여)
ex) 회사에 log 보내는거 accept할 것인가(프로그램 쓰다보면)

교수님 말씀) 교육, 대응 단계가 매우 신선했다
but ms-sdl이 지금 대중적이거나 절대적인 것은 아님. 다양한 방법 o

26페이지

보안 투자 했을 때 얻는 비용은
보안 고려하지 않앗을 때보다 크다.

다음시간) 실제 위협을 찾는. 위협모델링 배워볼 것

# 201008

- 수업 개요

중간고사는 위협모델링이 중점
기말고사 전에는 여러 해킹 사례를 위협모델링이랑 매칭해 알아볼것 / 위협막기 위한 보호기법

중간과제: 1~5주 내용. 그러나 위협모델링이 포인트니까 3,4,5주차 내용이 주로 나올 것

오늘 배울 것

ms-sdl의 위협 모델링
설계단계에서 수행하는 행위중 하나가 위협모델링인데...
DFD, STRIDE, DREAD

- 수업 내용

4페이지

⭐
위협모델링은 설계과정에서 진행하는데
실제 해킹 사례를 복기하는 과정에 쓸 수도 있음

⭐
위협모델링을 통해
위협요소 체크 , 위험도 계산, 위험도 완화시킬 수 있는 대응조치도 생각할 수 있음 -> 안전한 시스템만들기위해 필수적인 요소

5페이지

위협모델링을 왜하는가?
보안이 내재화된 sW, 서비스를 개발하기 위해서 하는거고
이렇게하면 공격자 관점에서 우리 서비스의 문제점을 예측하고 선제대응할 수 있기 때문에
외부로부터 들어오는 위협행위로 부터 발생하는 위험을 최소화할 수 있다.

6페이지

⭐
세가지 과정이 있음

## 1. 배경정보수집(dfd)

8페이지

우리 서비스에서 보안자산 어떻게 사용하고 있는지 사용사례, 시나리오 파악
위협모델을 만들기위한 배경이 되는

우리 서비스의 데이터플로우다이어그램 그리는것
(서버, 우리, 그안에 요청하는 서버, ...등)
자세하게 그릴 수록 배경에 대한 정보 수집이 완벽하게 될 수 있음

9페이지

외부개체
ex) 데이터베이스 서버, 외부 서버 등

양방향이면 화살표 두개로. 왜냐면 각각 플로우 마다 보안이슈 다르게 발생할 수 있기 때문

트러스트바운더리는 가장 마지막에 긋는게 좋음

다이어그램이 주관적일 수 있음. 서로서로 그린 것을 비판하는게 아니라 이해하려고 노력하고 토론하는 것이 중요

10페이지

dfd 예시(아직 추상적인 단계)

11페이지

조금 더 구체화

모니터링 프로그램은 어디 있는 데이터를 가져오거나 그런 작업을 할 것

모니터링 프로그램이랑 저장소가 내부라고 생각하고
관리자가 외부라 생각하면 그 사이에 트러스트 바운더리를 칠 수 있겠지!

dfd를 자세히 그릴 수록 stride 과정에서 다양한 위험 요소를 더 식별해낼 수 있음
(물론 stride과정에서도 이런 상황에선 이런 위험이 있지 않을까 같은 상상의 나래를 펼쳐야함)

12페이지

데이터 유실(플로우 몇개를 놓친 경우)

## 2. 위협 모델 만들기 및 분석(stride)

13페이지

자동차용 랜섬웨어
자동차 시동을 끌 수 있음(전자제어장치 락)
모든 전자제어장치 에 있는 sw를 리셋시키거나 펌웨어를 갈아엎지 않으면 주행할 수 없게 만드는
자동차 분야 전문가 + 보안 전문가 (여러분야의 전문가가 모여서 stride하는 것의 중요성)

⭐
위협을 해결하려는게 목적이 아니라
목표: 최대한 많은 위협을 식별해내자
dfd를 보고 위협을 최대한 많이 찾아내자. 시나리오별로 dfd 검토하고, 신뢰 경계랑 데이터 들어오는 진입점과 최종으로 어디로 흘러가는지 이런거 보고 , dfd 참조하면서 위협 찾아가는 과정이 stride임

설계 과정에 개발자, 엔지니어, 보안전문가, 다른 사람들 참여하면 좋다
개발자나 엔지니어들은 내부 동작에 집중하는 경향이 있어 시나리오를 구성하는 아이디어들에 대한 신뢰성을 의도치않게 떨어뜨리는 경우가 많음

14페이지

stride의 6가지 위협 범주
사용해 위협 식별하는 과정 나타낼 수 있음

15페이지
그럼 stride 가 무엇을 의미하나?

16페이지

스푸핑: 위장, 신분위장
권한 없는 사람이 위장하는 것

ex내가 다른 사용자의 id pw 입력하는 것

인증 엄격하게 하면 막을 수 있대

자동차가 위장공격에 얼마나 취약한지 다음주에 배울거래

17페이지

변조
보호 대상 데이터를 변경하거나 삭제하는 것

사담
돈이 목적이 아닌 해킹 중에
보안 공부하는 사람의 웹페이지를 해킹하는 것

ex 웹서버 타고 들어가서 소스코드의 메인페이지 내용을 해킹하는
ex 워너 크라이 사태. 엄청나게 많은 기업에서 피해를 봤대.

중요한 자료는 백업을 해놓을것

18페이지

부인

트랜잭션과 관련된 보안주체가 증거가 남지않도록 트랜잭션을 숨기는 행위
-> 악의적인 활동을 하고 이를 부인하는

ex 은행권, 전자거래
송금하고나서 그 내용에 대해 거부하는. 금전적 사고 발생시키기 아주 적합한 위협

전자서명을 이용하면 부인 공격 어느정도 차단 가능

19페이지

정보 유출
개인정보를 도용하거나 유출시키는 행위, 외부에 노출되면 안되는 정보가 외부로 유출되는 위협

ex 인터파크 유출 사례

방어: 유출될 정보를 애초에 저장하지 않는 것
ex. 주민등록 뒷자리 지우면서 저장
ex. 각 사이트에서 pw 그대로 저장하지 않음. 해시방법으로 저장해서 해커가 이를 빼가더라도 알 수 없게 함

20페이지

서비스 거부(Dos)

특정 서비스에 합법적인 유저가 접근하지 못하도록 하는 행위

ex. 막대한 트래픽 발생시켜 웹서버에 과부하를 주거나
악의적인 요청을 보내 해당 리소스에 오작동을 유발

dos를 분산시켜 다양한 좀비피씨가 공격을 가하는 걸 ddos라함
ex. 농담인데 수강신청

21페이지

권한 상승

공격 과정 중 하나임

권한 상승을 거쳐 데이터가 유출될 수 있음(ex인터파크)

stride 요소들은 복합적으로 작용하기도 함

22페이지

상세한 방법들은 12, 13주차에 얘기할거래

일단 지금은 위협을 잘 찾아내는 것에 초점

가용성(웹서버말고 백업서버를 둬서 가용성 확보 등)

인증(시스템에 접근하게 해주는 것) 인가(인증한 다음에 그 시스템에서 사용할 수 있는 권한을 부여하는 것)
인증과 인가를 적절히 활용한다면 권한 상승도 막을 수 있을 것

## 3. dread

25페이지

위험도를 어떻게 계산할 것이냐

26페이지

dread라는 등급 체계
상당히 주관적

stride에서 발견된 각각의 위협에 대해서 dread를 평가

재현확률(ex. 100번 하면 1번정도 되는 확률이더라 재현확률이 낮다)

28페이지

실습관련 책 보면서 하면 좋을 것

주교재 1장에 36페이지
dfd 꼼꼼히 따져보고 책에서 사용한 방식으로 위협 식별해봐.(이걸 우리가 배운 stride에 매칭시켜봐)
(위협모델의 이해)

새로운 용어
dfd그릴 때 특이사항
설명해주고
위협식별, 위험도 계산은 우리가 해보기

29페이지

공격 지점: 자산을 사이버 공격에 취약하게 만드는 약점이나 결함이 존재하는 영역
공격자는 이 영역에 접근해 취약점을 악용

30페이지

자동차에 영향을 줄 수 있는 차량구성요소가 장착되어있는 부분이나 접근할 수 있는 부분

31페이지

자동차의 공격지점이 이렇게 많다는 것

라디오 신호, 시디 삽입되는 부분, 엠피쓰리 연결되는 부분, 공기압 측정 tpms , ...
자동차는 더이상 폐쇄적인 시스템이 아니고 다양한 공격지점이 존재한다. 연결고리가 많다

32페이지

⭐
공격지점을 잘 식별해야
dfd 그릴 때 ... 내부 보호 자산이랑 외부개체가 잇잖아. 외부개체가 결국은 이런 진입지점을 통해 들어오는거기 때문에 그걸 잘 식별해야해. 이게 어떻게 악용되고 이 진입점을 통해 외부 개체와 어떻게 연결되고 어떤 데이터가 주고받아지는지 데이터 플로우를 잘 그려주는것이 dfd의 핵심

34페이지

자동차 다중프로세스로 표현(자동차 내 여러 기능있어 어려 프로세스로 나타낼 수 있으니까)

들어오는 정보
tpms(타이어 공기압 측정하는 무선 센서)
kes

내부에도 다양한 통신포트들이 있다.

35페이지

차량이라는 객체를 구성하고 있는 프로세스를 자세히 나타낼 필요 있음

그안에서도 infotainment 네비게이션에대해 자세하게 알아보겠다.
1.0 프로세스의 세부이니 1.1, 1.2, 1.3 이렇게 넘버링해줌

38페이지

단순한 시스템을 굳이 세부적인 레벨로 똑같이 나눌 필요는 없음.

dfd 레벨 0,1,2에 따라 위협 식별하는 과정이 책에 자세히 나와있대
책에선 문장으로 설명한 위협을 stride에서 무엇인지 매칭시켜보기

# 201015

- 수업 개요

특별 세미나는 출결체크하지 않을거래
다음주에 올라올 중간과제 설명영상은 꼭 봐야함

29일, 30일 중에 언제 과제 수행할지 선택. (오후 7시부터 시작할 것)

배울 것
In-vehicle network(자동차 내부 네트워크)개요
minor protocol
major protocol(자주쓰는 프로토콜)
can and can-fd (major 프로토콜 중에서도 controller area network 배울 것)

차량용 통신 기법에 관한 개요.

중간 이후 배우는 해킹 3주치에 대한 배경지식을 배우는 것이라 볼 수 있음

- 수업 내용

5페이지

자동차 내부 네트워크에 접속할 수 있는 obd-ii zjsprxj
자동차 내부 네트워크는 다양한 프로토콜로 이루어져있다.

아래 파랑색은 major protocol

가장 중요한 건 can과 여기에 연결할 수 있는 obd-ii 포트에 대한 이해임

7페이지

자동차가 진화하는 과정

e-call emergency

x-by-wire
전기적 통신을 하겠다.
전자제어장치 도입되기 시작

connectivity
외부와 통신 늘어남

자동차의 전자화 속도 급속도로 증가

10페이지

ecu
다양한 전자제어장치 탑재중

아두이노랑 성능비슷한데 엄청 비싸대 . 저온 고온 등 다 견뎌야하기 때문에

기어변속, 측면/후면물체감지, 운전대, 계기판, 에어백, 등등...

전자제어시스템들은 서로 정해진 통신프로토콜을 이용해 통신을 하고 있음

12페이지

자동차안 통신회선 다 늘여놨더니 4키로 였대

지금은 선 길이가 기하급수적으로 늘어나진 않음.

13페이지

선이 많아지면(구리선이 많아지는 것) 자체 중량도 무거워지고 회선 어딘가 단절되면 고장 원인 파악하는 것도 어려워짐

선을 단순화시키는 것은 무게 줄이고 연비도 줄고 점검도 용이해짐

그래서 만든게 IVN인데 그중에서도 can이 짱
can 도입되니 버스선
새로운 개체 접합할 때도 용이
can 통신 safety하대. 안정적

14페이지

class a
창문 내리고 이런거

b
계기판

c
엔진쪽, 브레이크.

can은 class b(low speed can),c(high speed can)에서 쓰일 수 있음

15페이지

flexray 한단계 더 좋은 통신
most 자동차에서 멀티미디어 볼 수잇게

minor 프로토콜들은 제조사에 특화된 프로토콜이 많아 자세하게 살펴보진 않을 것

16페이지

자동차 내부는 검은 박스 등의 요소가 있음

- 자동차 몸통
  창문, 와이퍼 등

-> low speed can, lin

- infotainment
  인포메이션+엔터테인먼트
  자동차 내부에서 다양한 멀티미디어 기능
  ex.네비게이션

-> most

- power(자동차 움직이는 힘과 관련)
  자동차 엔진쪽이나 구조
  연료 분사해 빠르게 나아가고 ,기어변속하고 이런거

-> can, flexray

- 샤씨(자동차가 움직이는 정교한 조작과 관련)
  자동차의 조향(핸들꺾어 방향 잡는)
  safety시스템들어감
  충돌 감지, 차선

-> can, flexray

통신들은 프로토콜 별로 서브 네트워크 구성하고 있음

특정 속도 이상되면 문 잠기는것 예로 들면...
powertrain -> body 정보 줘야함
그 기능을 gateway(각 서브 네트워크에서 발생한 일을 집합시키고 나눠주는 곳)가 하는 것
gateway는 obd2라는 포트가 있음(자동차 안 제어기들의 상태 확인하는 포트임)

17페이지

정비시 이 포트 사용
특정 제어기가 받을 수 있는 요청 이 포트로 보냄

obd-2
이는 공격 지점으로 사용될 수 있다.

18페이지

can은 두개의 fin 커넥터 사용할 수 있는데
여기서 can high = 아까 말한 high speed can 이 둘이 같은 것 아님
기본적으로 can통신은 두가닥의 구리선으로 이루어져서 그런 것

19페이지

obd2
정보보호 관점에선 무서운... 진입점이 될 수 있으니
안전관점에서 정비 때 쓰니
양면적

20페이지

자동차 정보
제조사, 연식, 옵션, 모델에 따라 다 다름
해킹을 그럼 어떻게 하나 ? 다 검색해서. 한대한대 리버싱한다음에 특정 차종에서 사용될 수 있는 해킹 코드 짜는것

21페이지

근데
obd2는 정비를 위해 만들엇는데 자동차의 상태를 알려는 것
obd2는 표준으로 쓰는 것. 표준 포트를 통해 정보를 얻어오는데 얻어오는 방법도 당연히 표준이 정해져있을 것
-> obd-2 pid

24페이지

저거 포트에 꼽고
휴대폰에 앱(차량용 어플리케이션) 깔아서 정보 볼 수 있음

앱이악성이면 공격될 수도 있음

25페이지

공격지점이 될 수 있음에도 이를 쓰는 이유
정비하는데 가장 많이 사용

엔진 소리가 이상해요 -> 엔진을 뜯어서 볼 순 없음

제어장치에 요청 보낼 수 있음
단절되어잇으면 on off 줘야되고 켜져있는데도 그러면 명령을 줄 것
정비진단기 이용하면 엔진도 끌 수 있고 와이퍼, 헤드라이트도 조작가능 > 자동차를 강제로 제어 가능. 보안에는 위험한 덩어리가 될 수도...

정비진단기 이용한 해킹 공부도 나중에 수업에서 한대

26페이지

minor프로토콜

이런게 있구나만 알면됨

32페이지

major 프로토콜

flexray는 can과 비슷해.. 일부 차종에서만 사용

ethernet 혁신적
자율주행차가 나오면서 고용량의 빠른 데이터 통신 필요해짐. 지금은 실제로 이더넷이 탑재된 자동차가 달리고 있음

33페이지

제어기들 온오프 정도 lin 사용

low speed can

can 영역의 일부를 flexray 사용하기도 함

34페이지

lin

간단한 데이터 주고받을 때

35페이지

통신속도 느리고
저비용
가장 느리지만 가장 저렴한 -> 심플한 통신ㄴ에 사용

36페이지

보통... 제어장치간 통신은 can이런거 사용
제어장치가 전달받은 정보를 프로세싱해서 실제 장치를 움직이고 싶을 때는 lin 사용되는

37페이지

lin이 하는 동작을 low speed can 으로 구현한 차도 있대

39페이지

링형 토폴로지 로 이루어짐
(넣다 뺐다 하는게 쉬움. 플러그앤플레이)

40페이지

flexray

파워트레인, 섀시를 위해 통신 기반 구조 제공
파워트레인, 섀시에 들어간 전자제어장치 간 통신을 위해 사용!

can보다 빠르네
그래도 can을 뛰어넘진 못했음

프로토콜들의 상세 동작구조를 설명하진 않을 것. 역사, 개념, 현재 위치 정도 알면됨

42페이지

flexray가 사용된 차종

can을 대체하기 위해서 만들어졋으나 대체하진 못했음

backbone망에서 쓰이는 차세대 프로토콜 벗 가격이 비싸고 구축하는데 힘듦

44페이지

선 많이 들어가니까 연비도 많이 들어 flexray!

47페이지

가장 많이 쓰이지만 가장 많은 취약점 가지고 있는 can

49페이지

cdma/ca 사용
동일 시점에 두개 이상의 제어기들이 동시에 통신하려고 하면 충돌발생하고 이 충돌을 중재
-> 우선순위 설정(메시지 식별자로)

전자제어기들은 각자 고유한 id 갖는다

50페이지

분류는 통신속도가지고 나눔

51페이지

두개의 통신회선이 있고
(두개의 저항있고)
통신하고자하는 제어기는 두개의 선에 연결이 되어야함

외우진 않아도됨

52페이지

ecu 들여다보면 이래

microcontroller(cpu)
can controller 패킷을 can 형태로 만들어주는
can transceiver (디지털->아날로그, 아날로그->디지털) 디지털신호를 구리선에 보내려면 아날로그로 변환해야해

아두이노의 경우 씨피유, 캔 컨트롤러 내부에 있고 can transceiver 만 하드웨어 따로 써서 통신회선 꼽아 자동차에 연결하면 됨

53페이지
두개의 선에 서로 다른 전압이 흐르면 0, 같으면 1

이런 방식으로 캔 통신회선에서 특정 디지털 신호를 아날로그로 변환하고 수신자는 아날로그 읽어 디지털로 변환

54페이지

중요한건 구리선.
전압이이렇게 다르면
딱 둘만 참여하게 해야하는데 그걸 어떻게 하나?

충돌나면 회피하는 규칙

55페이지

동시에 저요!라고하면
우선순위에 따름

56페이지

id 가 낮을수록 우선순위가 높음

57페이지

자기 아이디를 2진수로 하나씩 꺼내보며
큰애를 걸러냄

node a는 계속 발언할 수 있는 것

58페이지

can2.0a 아이디임

아이디 부족하면 2.0b
쓰기도 함

data부분. 전달하려는 것

crc 무결성 검증
(인증을 수행하지는 않음. 보안이라곤 이거밖에 없는데 위조나 데이터 변경을 감지해낼 수 없음)

59페이지
한번 읽어봐

60페이지

전송 속도를 다르게 하자
can의 약 8배의 데이터 전달 가능
속도도 향상됨

그러나 이외의 것은 can과 동일

왜 해킹이 되나? 보안 기능이 crc밖에 없기 때문

⭐핵심
can에 관해 꼼꼼히 살펴보고
can의 중개 프로세스
can이 보안기능이라 말하는 crc의 특징 -> 통신 패킷이 안전하ㅣ게 통신회선에 잘 들어갔는지 확인(통신패킷에 대한 무결성 체크 정도만 되는거지 인증을 수행하지는 않음)
