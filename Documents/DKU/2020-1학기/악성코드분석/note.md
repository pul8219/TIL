목표: 임베디드시스템, 스마트카 자율주행차에서 발생하는 다양한 보안 이슈에 대해 학습하기 위해

[200903](#200903)
[200910](#200910)
[200917](#200917)
[200924](#200924)

# 200910

2주차

## 자동차 취약점 분석 및 해킹 동향

자동차가 외부 네트워크와 연결되는(커넥티드카) 때가 된 이후 해킹 위험 높아짐

자동차와 스마트키 사이 주파수 가로채서 문열어버리는 연구 동영상으로 보여주심

MSSDL 소프트웨어 전체 설계, 개발, ... 소프트웨어 전체 라이프 사이클 모든 단계에서 보안을 강화해야한다.라는 의미

escrypt? 독일 기업

자동차보안이라는 개념을 처음 제시한 독일의 어떤 대학교 안에 정보보호연구소에서 만들어낸 escrypt라는 회사
지금은 도씨의 모회사? 자동차 보안 1위 회사

윤리적 딜레마

```
윤리적 딜레마는 총 3가지 조건에 대해 생각해 보는 것입니다.

1. 정지하지 않고 계속 달리면, 10명의 사상자 발생

2. 왼쪽으로 틀면, 운전자 사망

3. 오른쪽으로 틀면, 정당한 보행자 1명 사망

이때 자율주행 알고리즘은 어떻게 해야 할까?

우리는 어떻게 이런 상황에 대비해야 할까?


```

이 알고리즘은 그냥 가야되나 1명을 쳐야되나 다른 대책이 있나 왜 이런 상황이 발생할 수 밖에 없는가 등등을 고민해보기
중간평가로 내든 그 전에 물어보든 할거래 고민해보기!

## 학습했거나 들어본 것 정리

Fuzzing 무작위 데이터

# 200917

3주차(본격적인 범위는 여기부터)

2페이지

중간과제 Module1에 입각해(여기서 배운 용어의 정의를 이해하고 사용해야함) 과제를 수행해야됨

사이버 킬 체인: 사이버 공격을 시작부터 끝까지 단계별로 분석하는 방법 중 하나

## Module1 정보보호 기본 용어 분석

보안자산
공격할 대상(공격자 입장) / 지켜야할 대상(방어자 관점)

5페이지

보안자산이란?

회사 서비스 입장에서 서비스, 플랫폼, sw 에서 지켜져야되는 것, 외부로 함부로 노출되어선 안되는 것
쉽게 표현하여 사이버 공격으로부터 안전하게 지켜야되는 무언가

7페이지

보안 자산에 내재하고 잇는 취약점은 공격에 사용될 수 잇다.

8페이지

약점 vs 취약점

약점: 개발 단계 / 공격에 활용될 수 잇는 여지가 있는
취약점: 운영 단계 / 실제로 공격에 사용될 수 있는

9페이지

완전히 안전한 sw같은 걸 만들기란 불가능 +발견되지 않은 약점이 있을 수도 있음 / 발견된 것(화이트 해커가 찾거나 회사에서 찾았거나 ...등)

sw 에는 약점이 있을 수 있고 그중엔 공격에 사용될 수 있는 취약점이 있을 수 있음

10페이지

해커 = 위협원 이라 표현

11페이지

위협원: 보안 자산에 손실을 초래할 수 있는 행위를 하는 것
보안 자산의 취약점을 이용해 해킹하려는 존재

15페이지

위협원이 위험행동을 해서 (위협원이 원하는 결과를 달성시켰을때. 위협원이 자신의 목적을 달성했을 때) -> 위험

16페이지

위협 vs 위험

위협:

위험:

17페이지

위협vs위험을 잘 이해하기 위해서는 그림을 총체적으로 봐야해

위협을 하는 위협원은 끊임없이 취약점 분석 행위를 하려고 함 - 이걸 사전에 막을 수는 없음 (위협은 왜 제어할 수 없는가에 대한 답)

회사는 취약점을 최소화시키고 보안 조치를 해놓으면 위협원이 위협행동을 통해 일으킬 수 잇는 위험을 줄일 수 있음 (위험을 감소시키려면)

취약점을 정리한 게 있대 cve, cwe 등(보안 정보 공유 체계) - 시큐어 코딩에서 많이 가르친대

20페이지

이를 위해 해야하는게 위협모델링 -> 시큐어 코딩, 악성코드 분석 등에서 배움

- 정보보호이론 필요(기본적인 암호 알고리즘 공개키, 비밀키, 인증 방식 등)

21페이지

이제 방어자 관점!

어떠한 목적을 위해 조치를 취할 것인가?

22페이지

ex)
사용자 주소 정보를 안전하게 관리해야한다!
목적: 사용자 주소 정보의 기밀성 보장해야한다>외부에 노출되면 안됨>노출되더라도 그 의미에 대해서 파악할 수 없어야한다.

23페이지

정보보호기술 사용하는 이유: 보안자산의 취약점 줄이고, 위협원으로부터의 위협을 사전에 방어하기 위해서 일 것

정보보호기술 도입하는 이유, 보안목적: 3요소 지키고 싶어서

- 정보 보안의 3요소(기본적인 3요소) CIA

기밀성

무결성
보안자산이 외부로부터 변조되지 않았다는 걸 알려주고싶고

가용성
쓸 수 있을 때마다 접근이 가능하도록

26페이지

보안 요구사항

~~를 명시하는 것!

27페이지

이제 보안 요구사항에 맞는 보안 조치를 취해야겠지

29페이지

반복될 수 있음. 왜?
보안조치 수행하기위해 또다른 보안목적 나타날 수 있기 때문

31페이지

대칭키 알고리즘을 쓰겠다 (보안조치) 했을 때
그 키는 어떻게 안전하게 나누어줄 것이냐?
또 나누어준 키는 각각 어떻게 안전하게 보관할 것이냐?
는 새로운 문제 발생 가능

보안조치에서 새로운 요구사항 발생
AES 사용한 주소 정보 암호화
(대칭키를 써도 키가 안전하게 보호되지 않는다면 안전할 수 없다.)

- 키를 안전하게 관리해라
- 요구사항: 시큐어 스토리지에 키를 보관하겠다(인증된 자만 접근할 수 있는)
- 기술은? 스마트 카드를 사용하겠다.

특정 사례를 (보안 사고 사레)기반으로 각각의 보안 용어 매칭시키면 더 이해가 쉬울 것

## Cyber Kill Chain

36페이지

어떠한 공격들은 다 이런 단계를 가지고 있음

정찰 / 취약점 분석
무기화 유포 악용 / 취약점 이용해 위협을 가하기 위한 준비
설치 명령&제어 목적달성 / 만들어진 악성코드를 ~

각 단계별로 공격 특징이 나타나기 때문에
각 단계별로 그 공격 특징을 완화시키는 보안기술을 적용한다면 안전한 시스템을 만들 수 있지 않을까 라는 생각으로 사이버 킬 체인 운영.
이걸로 분석하면 사고 방지 할 수 있음

37페이지

잘 정의된 논문 소개

1. 정찰
   공격을 수행하기 위해 공격 목표물인 보안 자산에 대해 분석하는 단계
   공격자들은 상당히 오랜 기간 준비하는데 시간 제일 많이 소요하는게 정찰 단계

apt 공격(지능형 지속 위협)

취약점이 될 수 있는 것 : 시큐어 코딩을 안한 것, 사람의 사회적 습성, 하드웨어의 물리적 문제

2. 무기화

악성코드를 만드는 것 처럼

38페이지

3. 유포

만든 무기(악성 코드)를 보안 자산에 전달

(유포 단계에 적절하게 대응함으로서 이 단계를 막을 수도 있음)

4. 악용

악성코드가 보호대상에 깔리는. 설치될 수 있게끔 하는 과정. 공격자가 원하는 코드가 발현되는 시점

악용과 설치가 애매모호하긴 함

5. 설치

발현되서 본격적으로 악성코드들이 설치되는 과정. 백도어나 원격 접근 설치

6. 명령과 제어

7. 목적달성

39페이지

유포 악용 설치가 애매하면 카테고리를 합치거나 생각하는대로 분석해서 써도됨

40페이지

IPS 침입 방지 시스템
IDS 침입 탐지 시스템

42페이지

비행기 티켓 전체 찍어서 올리면 안돼!
일련번호 노출됨

44페이지

직접 읽어보래

46페이지

정찰: 모니터링, 패킷 분석

자동차를 강제로 제어하기 위한 패킷을 찾았다면

47페이지

방어대책 생각해보기(자유롭게)

48페이지

인터파크 해킹 사태

네이버와 비슷한 피싱 사이트 만들었대. 여기에 인터파크 직원이 로그인

49페이지

정찰 중

50페이지

동생이 보낸척 이메일을 보냄
가족은 이를 열어 실행

52페이지

설치되고나서 명령 기다리고 있음
백도어, 리모트 제어 환경이 완성된 상태임 이미

53페이지

특정 명령을 실행하면 데이터 수집해 공격자쪽으로 전송

인터파크의 사이버킬체인, 방어기법 표를 만들어보기

---

0924내용 추가함!
자동차에 스마트폰 앱 연결하는 방법은 2가지가 있음

1. 차량에 블루투스 혹은 와이파이 모듈 을 설치하여 연결
2. 차량에 내장된 내비게이션? 과 연결되는 것도 있음

각 단계별로 보안 기술을 넣어줌으로써 어떤 단계를 단절시켜 공격행위 자체의 위험도를 낮추는 것이 사이버 킬 체인의 개념임!

자동차 해킹 사례 - 사이버 킬체인 방어 대책 적어보기

**사이버 킬 체인 방어 대책**

- 정찰

패킷 암호화?

- 의미있는 패킷, 정보에 암호화를 통해 기밀성을 부여
- 모니터링 할 수 있는 비 인가 단말의 접근 제한

* 무기화

앱 검증 절차 도입

- (정찰이 뚫린 상태) 어떻게 막을까?
  moving target defense:보호하려는 대상의 모양을 주기적으로 바꿔 공격자의 공격을 막겠다는 것(패킷, 주소의 모양(ip주소를 동적으로 계속 바꾼다던가))

* 유포

앱 검증 절차 미통과 앱은 마켓에 업로드 X

- 악성 코드 내포 유무 검사

* 악용

회사와 출처가 불분명한 앱 다운로드 금지

- 비 인가 앱 사용 금지(자동차 제조사가 제공하는 정식 앱 사용)

* 설치

흠?

- 비 인가 앱 사용 금지(자동차 제조사가 제공하는 정식 앱 사용)

* 명령 및 제어

관리자 권한 없는 명령 불허. 네트워크 접속 불가하게 막기

- 비 인가 개체에 접근 제한

* 목적달성

어떻게막나? ㅠ

- 달성됐다면 위험도 낮추고 피해 최소화 해야겠지
  침입을 실시간으로 확인할 수 있게끔 침입탐지시스템
  요즘 침입탐지시스템 탑재하려고 기술 발전중이래(자동차도 전자화되고 외부 네트워크와 연결이 많아졌고 악성코드가 많아지고 있기 때문)
  비정상 행위 발생시 비상 정지 할 수 있는 시스템으로 위험도 최소화할 수 있게

---

인터파크 사례 - 사이버 킬체인 적어보기

**사이버 킬 체인**

- 정찰:

사람들이 도메인 주소창을 확인하지 않고 포털 로그인을 한다.

- 공격에 사용할 정보 확보(사회공학적 방법으로)

* 무기화:

네이버 포털 사이트 로그인 창을 유사하게 만든 피싱사이트를 제작한다.

- 악성코드만들고 바탕화면에 사용할 수 있는 사진인 것처럼 제작

* 유포:

도메인 주소를 비슷하게 만들어 사이트를 개설한다. (오탈자가 날 경우 피싱 사이트로 올 확률이 높아짐)

피싱 사이트를 통해 얻은 정보를 이용해 네이버 개인정보에 접근한다.

이메일정보를 이용하여 악성코드 파일이 담긴 피싱 메일을 보낸다.

- 동생을 사칭하여 이메일 전송

* 악용:

인터파크 직원은 네이버로 착각한 피싱 사이트에 접속하여 평소처럼 네이버 아이디와 패스워드를 입력하여 로그인버튼을 누른다.

직원 PC에서 피싱 메일의 첨부파일을 다운로드 받고 파일을 실행한다.

- 당부) 모르는 사람으로부터 온 메일의 첨부파일은 되도록 다운로드 받지 말라

* 설치:

공격 대상 서버에 접속하는 등의 행위를 하는 악성코드들도 추가로 설치되며 백도어, 원격접속허용 등이 이루어진다.

- 명령 및 제어:

취약점 공격 및 서버 접속, 명령어 실행

- 목적달성:

공격자는 DB 데이터를 수신하여 인터파크 사용자 정보를 최종적으로 탈취한다.

**사이버 킬 체인 방어 대책**

- 정찰:

개인 프라이버시 보안에 대한 교육, sw, 웹사이트 이용시 보안 주의사항 교육

- 웹 브라우저 url 확인
  비정상 단말 로그인 알림(국외 접근이나 단말별 2차 승인. 요즘 제공되고 있지)

* 무기화:

브라우저 업데이트 주기적으로(OS도?)

- 제로데이 외 취약점 긴급 패치(제로데이 공표되면 바로바로 취약점 긴급패치)
  제로데이 어택(아직 알려지지않은 취약점으로 공격하는 것)
  원데이 어택(취약점이 공개됐는데 패치를 하지 않은 것 공격할 수 있음)

* 유포:

사이트 개설시 지켜야하는 절차 법적 정의 및 관리?

- 악용:

이메일에서 정체가 불분명한 파일 다운로드 및 실행 금지

웹사이트 로그인 등 개인정보 입력시 주소 확인

- 설치:

흠?

- 명령 및 제어:

관리자 권한 없는 어플리케이션 설치 절차 불허

- 목적달성:

사이트, 서비스 이용시 개인정보만으로는 불가능한 추가 인증 절차 도입(2단계 인증)

+당부) 정찰, 무기화, 유포, 악용 은 개인 단계에서도 주의 기울일 필요 있음. 개인정보, 내 데이터, pc, 운영체제를 안전하게 지키기 위한 방편 / 학습을 통해 배운 내용을 일상생활에서도 정보보호를 적용하여 실천하자!

# 200924

4주차

STRIDE 위협모델링

DREAD 각 위협에 대한 위험도 측정

3페이지
보안조치 관련모듈2, 3은 나중에 배울 것

MS-SDL 설계부터 위협모델링을 하기 위해 사용, 시스템 개발하는 단계에서 적합

사이버 사고 대처에 적합한 것은 사이버 킬 체인인 것 같음

module1의 용어를 활용하여 사이버킬체인과 ms-sdl을 이해할 수 있어야함

~9페이지까지 저번에 해보라했던 사이버킬체인 관련 표 이야기

- 배울 것

소프트웨어 개발 보안 방법론은 무엇인지

ms-sdl는 다양한 소프트웨어 개발 보안방법론 중 하나/ 어떻게 구성?

ms-sdl 설계단계에서 수행하는 것이 위협모델링. 이건 무엇인지

위협모델링 과정에서 수행되는 data flow diagram, dread(위험도 측정), stride(위협식별) 가장 잘 담고 잇는게 ms-sdl

## 소프트웨어 개발 보안 방법론

보안기능을 맨 마지막에 하는 방법은
모든 요소마다 보안 노력을 수행하는 방법보다 비용많이듦. 유지보수 비용도 그렇고

13페이지

공격자들은 취약점을 오래 분석하여 공격 실행. 어떠한 프로그램도 공격대상이 될 수있음

약점, 취약점 설명할 때 말한 것 처럼 발견되지 않은 취약점이 있을 수도 있음
시스템 하드웨어 서비스를 장기간 지능화된 공격자들이 분석을하면 어떠한 허점을 찾아낼 수도 있음(apt 공격=지능형 지속 위협)

취약점을 찾아 패치해야함
이런 비용을 최소화하려면 위험도를 낮춰야하는데.. 위협모델링하고, 소웨 개발 보안 방법론 활용해 단계별 보안 인식 가져야함
이미 피해본 고객과 소통하는 단계도 사고 대응에서 필요

16페이지

설계과정 결함을 코딩단계에서 고치면 비용이 5배 든다는 것

보안테스트같은걸 제품출시 직전에 하거나 이런 개발 관행은 후에 사고시 비용 많이 들게 할 수 있음

18페이지

- 요구사항 분석

중요한 정보의 기밀성 보장
요구사항 명세(id,pw는 안전하게 저장되어야한다.)
지켜야할 보안 자산 식별, 정의 행위

- 설계

위협원 도출
외부인터페이스 식별(서비스의 입출력, 또다른 매체와의 연결 등을 식별하고 이 상황에서 일어날 수 있는 위험 상황 생각)
위협모델링
최대한 많은 위협을 도출할것
다양한 시각, 분야의 사람들이 모델링에 참여하는 것 중요

사이버킬체인은 공격 분석임. 설계단계에서 모델링하는 것은 아님

- 구현

표준 코딩 정의서 및 sw 개발 보안 가이드에 따라 개발
sw에 존재하는 취약점 최소화 할 수 있음

- 테스트

모의해킹 들어봤쥬?
베타테스트 때 스캐닝이나 모의침투 테스트함, 퍼징, ...
동적분석 -> 여러 입력값을 넣어 비정상적 행위를 하는지 안하는지 자동화된 툴로 분석 활동

## ms-sdl

sw보안개발방법론
대표적인 방법론 ex)ms-sdl, 오라클 sw 보안 인증 프로세스, 시큐어사 clsp?

20페이지
ms-sdl

약자의 s가 security!

기존의 개발 생명주기에 추가적인 보안 작업을 정의한 것
교육-대응까지 7단계

21페이지

- 교육 단계
  신선!
  각 단계별 보안 기능을 개발자들에게 사전교육으로 실시함으로써 안정화된 sdl단계 진행 가능

22페이지

- 요구사항 단계

보안책임자 선정

23페이지

눈여겨 봐야하는 단계

- 설계 단계

공격 요소가 될 수 있는 유형의 외형적 요소, 공격 진입점(어디로 공격이 들어오는지) 등 기록
왕 중요! 위협 모델링(구조화된 기법 이용, 보안 자산에 피해줄 수 있는 위협 찾아내고 위협으로 발생하는 위험에 대한 위험도 계산, 위협을 완화시킬 수 있는 대응조치를 파악해가는 과정)

위협모델링 1~1주반 정도 깊게 배울 것

24페이지

- 구현 단계

정적 분석
시큐어 코딩 가이드라인, 행안부 가이드라인에 따라 구현
ex) visual studio 개발 옵션에서 ms-sdl 사용체크해놓으면 c언어 중 scanf 사용하면 워닝 뜸. 이거 취약점있으니까 딴 거 쓰라고

안전하게 sw 개발 하는 과정

25페이지

- 시험 검증 단계

동적 분석 방법 사용
회계? 보안 컨설턴트 있대 화이트 해커도 있고

- 배포 운영 단계

배포 전 최종적 보안 점검

- 대응 단계

사고 발생시 어떻게 대응할 건지 미리 고민해야함
대응시 프로세스에 따라 철저하게 대응
지속적 모니터링 필요(자사의 sw에 대하여)
ex) 회사에 log 보내는거 accept할 것인가(프로그램 쓰다보면)

교수님 말씀) 교육, 대응 단계가 매우 신선했다
but ms-sdl이 지금 대중적이거나 절대적인 것은 아님. 다양한 방법 o

26페이지

보안 투자 했을 때 얻는 비용은
보안 고려하지 않앗을 때보다 크다.

다음시간) 실제 위협을 찾는. 위협모델링 배워볼 것
