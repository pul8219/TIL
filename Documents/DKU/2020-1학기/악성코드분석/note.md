목표: 임베디드시스템, 스마트카 자율주행차에서 발생하는 다양한 보안 이슈에 대해 학습하기 위해

[200903](#200903)
[200910](#200910)
[200917](#200917)
[200924](#200924)
[201008](#201008)

# 200910

2주차

## 자동차 취약점 분석 및 해킹 동향

자동차가 외부 네트워크와 연결되는(커넥티드카) 때가 된 이후 해킹 위험 높아짐

자동차와 스마트키 사이 주파수 가로채서 문열어버리는 연구 동영상으로 보여주심

MSSDL 소프트웨어 전체 설계, 개발, ... 소프트웨어 전체 라이프 사이클 모든 단계에서 보안을 강화해야한다.라는 의미

escrypt? 독일 기업

자동차보안이라는 개념을 처음 제시한 독일의 어떤 대학교 안에 정보보호연구소에서 만들어낸 escrypt라는 회사
지금은 도씨의 모회사? 자동차 보안 1위 회사

윤리적 딜레마

```
윤리적 딜레마는 총 3가지 조건에 대해 생각해 보는 것입니다.

1. 정지하지 않고 계속 달리면, 10명의 사상자 발생

2. 왼쪽으로 틀면, 운전자 사망

3. 오른쪽으로 틀면, 정당한 보행자 1명 사망

이때 자율주행 알고리즘은 어떻게 해야 할까?

우리는 어떻게 이런 상황에 대비해야 할까?

```

이 알고리즘은 그냥 가야되나 1명을 쳐야되나 다른 대책이 있나 왜 이런 상황이 발생할 수 밖에 없는가 등등을 고민해보기
중간평가로 내든 그 전에 물어보든 할거래 고민해보기!

## 학습했거나 들어본 것 정리

Fuzzing 무작위 데이터

# 200917

3주차(본격적인 범위는 여기부터)

2페이지

1. Module1 정보보호 기본 용어 분석

Module1에 입각해(여기서 배운 용어의 정의를 이해하고 사용해야함) 중간 과제를 수행해야됨

2. 사이버 킬 체인
   사이버 공격을 시작부터 끝까지 단계별로 분석하는 방법 중 하나

## Module1 정보보호 기본 용어 분석

보안자산
공격할 대상(공격자 입장) / 지켜야할 대상(방어자 관점)

5페이지

보안자산이란?
제품 이해 관계자에게 가치가 있는 (회사 서비스 입장에서) 서비스, 플랫폼, sw 등이나 여기서 지켜져야되는 것, 외부로 함부로 노출되어선 안되는 것
=> 쉽게 표현하여 사이버 공격으로부터 안전하게 지켜야되는 무언가(ex. 정보/데이터, 소프트웨어, 서버 같은 물리적 자산, 서비스, 인력 등)

유형 혹은 무형의 상태를 가짐

7페이지

취약점: 시스템을 위협에 노출시키는 시스템의 약점
(ex. 사용자에게 허용된 권한 이상의 동작 가능케하는 약점, 사용자 및 관리자의 부주의나 사회공학 기법에 의한 약점도 포함)

+보안 자산에 내재하고 있는 취약점은 공격에 사용될 수 있다.

8페이지

약점 vs 취약점

약점: 개발 단계 / 공격에 활용될 여지가 있는
취약점: 운영 단계 / 실제로 공격에 사용될 수 있는

9페이지

완전히 안전한 sw같은 걸 만들기란 불가능 + 발견되지 않은 약점이 있을 수도 있음 / 발견된 것(화이트 해커가 찾거나 회사에서 찾았거나 ...등)

sw 에는 약점이 있을 수 있고 그중엔 공격에 사용될 수 있는 취약점이 있을 수 있음

보안 약점(security weakness): 해킹 등 실제 보안사고에 악용될 수 있는 오류, 버그와 같은 근본 원인

보안 취약점(security vulnerability): 해커(위협원)가 보안 약점을 악용하여 발생하는 실제적인 위협

10페이지

해커 = 위협원 이라 표현

11페이지

위협원: 보안 자산에 손실을 초래할 수 있는 행위를 하는 것
보안 자산의 취약점을 이용해 해킹하려는 존재
(ex. 경쟁 기업, 사내 임직원, 해커, 테러리스트 등)

15페이지

위협원이 위험행동을 해서 (위협원이 원하는 결과를 달성시켰을때. 위협원이 자신의 목적을 달성했을 때) -> 위험

16페이지

위협 vs 위험

위협:

위험:

17페이지

위협vs위험을 잘 이해하기 위해서는 그림을 총체적으로 봐야해

위협을 하는 위협원은 끊임없이 취약점 분석 행위를 하려고 함 - 이걸 사전에 막을 수는 없음 (위협은 왜 제어할 수 없는가에 대한 답)

회사는 취약점을 최소화시키고 보안 조치를 해놓으면 위협원이 위협행동을 통해 일으킬 수 잇는 위험을 줄일 수 있음 (위험을 감소시키려면)

취약점을 정리한 게 있대 cve, cwe 등(보안 정보 공유 체계) - 시큐어 코딩에서 많이 가르친대

20페이지

이를 위해 해야하는게 위협모델링 -> 시큐어 코딩, 악성코드 분석 등에서 배움

- 정보보호이론 필요(기본적인 암호 알고리즘 공개키, 비밀키, 인증 방식 등)

21페이지

이제 방어자 관점!

어떠한 목적을 위해 조치를 취할 것인가?

22페이지

보안 목적(security objectives): 정보 보호 시스템을 통하여 궁극적으로 달성하고자 하는 최종 보안 요구 사항. (최종 보안 요구 사항으로는 기밀성, 무결성, 가용성 등이 있다.)

ex)
사용자 주소 정보를 안전하게 관리해야한다!면
목적: 사용자 주소 정보의 기밀성 보장해야한다>외부에 노출되면 안됨>노출되더라도 그 의미에 대해서 파악할 수 없어야한다.

23페이지

정보보호기술 사용하는 이유: 보안자산의 취약점 줄이고, 위협원으로부터의 위협을 사전에 방어하기 위해서 일 것

정보보호기술 도입하는 이유, 보안목적: 3요소 지키고 싶어서

- 정보 보안의 3요소(기본적인 3요소) CIA

기밀성
인가된 사용자만 정보자산에 접근할 수 있음.(ex.방화벽, 암호, 패스워드 등이 대표적인 예)

무결성
보안자산이 외부로부터 변조되지 않았다는 걸 알려주고싶고
(적절한 권한을 가진 사용자가 인가한 방법으로만 정보를 변경할 수 있도록 하는 것)

가용성
필요한 시점에 정보 자산에 대한 접근이 가능하도록 하는 것

26페이지

보안 요구사항(security requirement): 보안 목적을 달성하기 위한 매우 자세한 기능적/비 기능적 사양
을 명시하는 것!

27페이지

이제 보안 요구사항에 맞는 보안 조치를 취해야겠지

28페이지

보안조치(security measures): 기밀성, 무결성, 가용성의 손실을 예방, 탐지, 복구하는 기술적인 메커니즘 또는 조직적인 대책이다.

29페이지

여기 보이는 3가지 프로세스는 반복될 수 있음. 왜?
=> 보안조치 수행하기위해 또 다른 보안목적 나타날 수 있기 때문

31페이지

대칭키 알고리즘을 쓰겠다 했을 때 (보안조치 정의)
=>
그 키는 어떻게 안전하게 나누어줄 것이냐?
또 나누어준 키는 각각 어떻게 안전하게 보관할 것이냐?
등등의 새로운 문제 발생 가능

보안조치에서 새로운 요구사항 발생
AES 사용한 주소 정보 암호화
(대칭키를 써도 키가 안전하게 보호되지 않는다면 안전할 수 없다.)

- 키를 안전하게 관리해라
- 요구사항: (인증된 자만 접근할 수 있는)시큐어 스토리지에 키를 보관하겠다
- 기술은? 스마트 카드를 사용하겠다.

특정 사례를 (보안 사고 사례)기반으로 각각의 보안 용어 매칭시키면 더 이해가 쉬울 것

## Cyber Kill Chain

34페이지

사이버 킬 체인 (정의): 사이버 공격을 프로세스상으로 분석해, 각 공격 단계에서 조직, 서비스, 시스템 등에 가해지는 위협 요소를 파악하고, 공격자의 목적, 의도, 활동을 분쇄/완화해 보안 조직의 시스템을 확보하는 것.

간단히 말하면, 사이버 공격 활동을 파악, 분석해 공격 단계별로 조직에 가해지는 위협 요소를 제거하거나 완화하는 것.

36페이지

어떠한 공격들은 다 이런 단계를 가지고 있음

정찰 / 취약점 분석
무기화, 유포, 악용 / 취약점 이용해 위협을 가하기 위한 준비
설치, 명령&제어, 목적달성 / 만들어진 악성코드를 ~

각 단계별로 공격 특징이 나타나기 때문에
각 단계별로 그 공격 특징을 완화시키는 보안기술을 적용한다면 안전한 시스템을 만들 수 있지 않을까 라는 생각으로 사이버 킬 체인 운영.
이걸로 분석하면 사고 방지 할 수 있음

37페이지

잘 정의된 논문 소개

1. 정찰
   공격을 수행하기 위해 공격 목표물인 보안 자산에 대해 분석하는 단계
   공격자들은 상당히 오랜 기간 준비하는데 시간 제일 많이 소요하는게 정찰 단계

apt 공격(지능형 지속 위협)

취약점이 될 수 있는 것 : 시큐어 코딩을 안한 것, 사람의 사회적 습성, 하드웨어의 물리적 문제

2. 무기화

악성코드를 만드는 것 처럼

38페이지

3. 유포

만든 무기(악성 코드)를 보안 자산에 전달

(유포 단계에 적절하게 대응함으로써 이 단계를 막을 수도 있음)

4. 악용

악성코드가 보호대상에 깔리는. 설치될 수 있게끔 하는 과정. 공격자가 원하는 코드가 발현되는 시점

악용과 설치가 애매모호하긴 함

5. 설치

발현되서 본격적으로 악성코드들이 설치되는 과정. 백도어나 원격 접근 설치

6. 명령과 제어

7. 목적달성

39페이지

유포 악용 설치가 애매하면 카테고리를 합치거나 생각하는대로 분석해서 써도됨

40페이지

IPS 침입 방지 시스템
IDS 침입 탐지 시스템

42페이지

비행기 티켓 전체 찍어서 올리면 안돼!
일련번호 노출됨

44페이지

직접 읽어보래

46페이지

정찰: 모니터링, 패킷 분석

자동차를 강제로 제어하기 위한 패킷을 찾았다면

47페이지

방어대책 생각해보기(자유롭게)

48페이지

인터파크 해킹 사태

네이버와 비슷한 피싱 사이트 만들었대. 여기에 인터파크 직원이 로그인

49페이지

정찰 중

50페이지

동생이 보낸척 이메일을 보냄
가족은 이를 열어 실행

52페이지

설치되고나서 명령 기다리고 있음
백도어, 리모트 제어 환경이 완성된 상태임 이미

53페이지

특정 명령을 실행하면 데이터 수집해 공격자쪽으로 전송

인터파크의 사이버킬체인, 방어기법 표를 만들어보기

---

0924내용 추가함!
자동차에 스마트폰 앱 연결하는 방법은 2가지가 있음

1. 차량에 블루투스 혹은 와이파이 모듈 을 설치하여 연결
2. 차량에 내장된 내비게이션? 과 연결되는 것도 있음

각 단계별로 보안 기술을 넣어줌으로써 어떤 단계를 단절시켜 공격행위 자체의 위험도를 낮추는 것이 사이버 킬 체인의 개념임!

자동차 해킹 사례 - 사이버 킬체인 방어 대책 적어보기

**사이버 킬 체인 방어 대책**

- 정찰

패킷 암호화?

- 의미있는 패킷, 정보에 암호화를 통해 기밀성을 부여
- 모니터링 할 수 있는 비 인가 단말의 접근 제한

* 무기화

앱 검증 절차 도입

- (정찰이 뚫린 상태) 어떻게 막을까?
  moving target defense:보호하려는 대상의 모양을 주기적으로 바꿔 공격자의 공격을 막겠다는 것(패킷, 주소의 모양(ip주소를 동적으로 계속 바꾼다던가))

* 유포

앱 검증 절차 미통과 앱은 마켓에 업로드 X

- 악성 코드 내포 유무 검사

* 악용

회사와 출처가 불분명한 앱 다운로드 금지

- 비 인가 앱 사용 금지(자동차 제조사가 제공하는 정식 앱 사용)

* 설치

흠?

- 비 인가 앱 사용 금지(자동차 제조사가 제공하는 정식 앱 사용)

* 명령 및 제어

관리자 권한 없는 명령 불허. 네트워크 접속 불가하게 막기

- 비 인가 개체에 접근 제한

* 목적달성

어떻게막나? ㅠ

- 달성됐다면 위험도 낮추고 피해 최소화 해야겠지
  침입을 실시간으로 확인할 수 있게끔 침입탐지시스템
  요즘 침입탐지시스템 탑재하려고 기술 발전중이래(자동차도 전자화되고 외부 네트워크와 연결이 많아졌고 악성코드가 많아지고 있기 때문)
  비정상 행위 발생시 비상 정지 할 수 있는 시스템으로 위험도 최소화할 수 있게

---

인터파크 사례 - 사이버 킬체인 적어보기

**사이버 킬 체인**

- 정찰:

사람들이 도메인 주소창을 확인하지 않고 포털 로그인을 한다.

- 공격에 사용할 정보 확보(사회공학적 방법으로)

* 무기화:

네이버 포털 사이트 로그인 창을 유사하게 만든 피싱사이트를 제작한다.

- 악성코드만들고 바탕화면에 사용할 수 있는 사진인 것처럼 제작

* 유포:

도메인 주소를 비슷하게 만들어 사이트를 개설한다. (오탈자가 날 경우 피싱 사이트로 올 확률이 높아짐)

피싱 사이트를 통해 얻은 정보를 이용해 네이버 개인정보에 접근한다.

이메일정보를 이용하여 악성코드 파일이 담긴 피싱 메일을 보낸다.

- 동생을 사칭하여 이메일 전송

* 악용:

인터파크 직원은 네이버로 착각한 피싱 사이트에 접속하여 평소처럼 네이버 아이디와 패스워드를 입력하여 로그인버튼을 누른다.

직원 PC에서 피싱 메일의 첨부파일을 다운로드 받고 파일을 실행한다.

- 당부) 모르는 사람으로부터 온 메일의 첨부파일은 되도록 다운로드 받지 말라

* 설치:

공격 대상 서버에 접속하는 등의 행위를 하는 악성코드들도 추가로 설치되며 백도어, 원격접속허용 등이 이루어진다.

- 명령 및 제어:

취약점 공격 및 서버 접속, 명령어 실행

- 목적달성:

공격자는 DB 데이터를 수신하여 인터파크 사용자 정보를 최종적으로 탈취한다.

**사이버 킬 체인 방어 대책**

- 정찰:

개인 프라이버시 보안에 대한 교육, sw, 웹사이트 이용시 보안 주의사항 교육

- 웹 브라우저 url 확인
  비정상 단말 로그인 알림(국외 접근이나 단말별 2차 승인. 요즘 제공되고 있지)

* 무기화:

브라우저 업데이트 주기적으로(OS도?)

- 제로데이 외 취약점 긴급 패치(제로데이 공표되면 바로바로 취약점 긴급패치)
  제로데이 어택(아직 알려지지않은 취약점으로 공격하는 것)
  원데이 어택(취약점이 공개됐는데 패치를 하지 않은 것 공격할 수 있음)

* 유포:

사이트 개설시 지켜야하는 절차 법적 정의 및 관리?

- 악용:

이메일에서 정체가 불분명한 파일 다운로드 및 실행 금지

웹사이트 로그인 등 개인정보 입력시 주소 확인

- 설치:

흠?

- 명령 및 제어:

관리자 권한 없는 어플리케이션 설치 절차 불허

- 목적달성:

사이트, 서비스 이용시 개인정보만으로는 불가능한 추가 인증 절차 도입(2단계 인증)

+당부) 정찰, 무기화, 유포, 악용 은 개인 단계에서도 주의 기울일 필요 있음. 개인정보, 내 데이터, pc, 운영체제를 안전하게 지키기 위한 방편 / 학습을 통해 배운 내용을 일상생활에서도 정보보호를 적용하여 실천하자!

# 200924

4주차

STRIDE 위협모델링

DREAD 각 위협에 대한 위험도 측정

3페이지
보안조치 관련모듈2, 3은 나중에 배울 것

MS-SDL 설계부터 위협모델링을 하기 위해 사용, 시스템 개발하는 단계에서 적합

사이버 사고 대처에 적합한 것은 사이버 킬 체인인 것 같음

module1의 용어를 활용하여 사이버킬체인과 ms-sdl을 이해할 수 있어야함

~9페이지까지 저번에 해보라했던 사이버킬체인 관련 표 이야기

- 배울 것

소프트웨어 개발 보안 방법론은 무엇인지

ms-sdl는 다양한 소프트웨어 개발 보안방법론 중 하나/ 어떻게 구성?

ms-sdl 설계단계에서 수행하는 것이 위협모델링. 이건 무엇인지

⭐
**위협모델링 과정에서 수행되는 data flow diagram, dread(위험도 측정), stride(위협식별) 가장 잘 담고 잇는게 ms-sdl**

## 소프트웨어 개발 보안 방법론

보안기능을 맨 마지막에 하는 방법은
모든 요소마다 보안 노력을 수행하는 방법보다 비용많이듦. 유지보수 비용도 그렇고

13페이지

공격자들은 취약점을 오래 분석하여 공격 실행. 어떠한 프로그램도 공격대상이 될 수있음

약점, 취약점 설명할 때 말한 것 처럼 발견되지 않은 취약점이 있을 수도 있음
시스템 하드웨어 서비스를 장기간 지능화된 공격자들이 분석을하면 어떠한 허점을 찾아낼 수도 있음(apt 공격=지능형 지속 위협)

취약점을 찾아 패치해야함
이런 비용을 최소화하려면 위험도를 낮춰야하는데.. 위협모델링하고, 소웨 개발 보안 방법론 활용해 단계별 보안 인식 가져야함
이미 피해본 고객과 소통하는 단계도 사고 대응에서 필요

16페이지

설계과정 결함을 코딩단계에서 고치면 비용이 5배 든다는 것

보안테스트같은걸 제품출시 직전에 하거나 이런 개발 관행은 후에 사고시 비용 많이 들게 할 수 있음

18페이지

- 요구사항 분석

중요한 정보의 기밀성 보장
요구사항 명세(id,pw는 안전하게 저장되어야한다.)
지켜야할 보안 자산 식별, 정의 행위

- 설계

위협원 도출
외부인터페이스 식별(서비스의 입출력, 또다른 매체와의 연결 등을 식별하고 이 상황에서 일어날 수 있는 위험 상황 생각)
위협모델링
최대한 많은 위협을 도출할것
다양한 시각, 분야의 사람들이 모델링에 참여하는 것 중요

사이버킬체인은 공격 분석임. 설계단계에서 모델링하는 것은 아님

- 구현

표준 코딩 정의서 및 sw 개발 보안 가이드에 따라 개발
sw에 존재하는 취약점 최소화 할 수 있음

- 테스트

모의해킹 들어봤쥬?
베타테스트 때 스캐닝이나 모의침투 테스트함, 퍼징, ...
동적분석 -> 여러 입력값을 넣어 비정상적 행위를 하는지 안하는지 자동화된 툴로 분석 활동

## ms-sdl

sw보안개발방법론
대표적인 방법론 ex)ms-sdl, 오라클 sw 보안 인증 프로세스, 시큐어사 clsp?

20페이지
ms-sdl

약자의 s가 security!

기존의 개발 생명주기에 추가적인 보안 작업을 정의한 것
교육-대응까지 7단계

21페이지

- 교육 단계
  신선!
  각 단계별 보안 기능을 개발자들에게 사전교육으로 실시함으로써 안정화된 sdl단계 진행 가능

22페이지

- 요구사항 단계

보안책임자 선정

23페이지

눈여겨 봐야하는 단계

- 설계 단계

⭐
공격 요소가 될 수 있는 유형의 외형적 요소, 공격 진입점(어디로 공격이 들어오는지) 등 기록
왕 중요! 위협 모델링(구조화된 기법 이용, 보안 자산에 피해줄 수 있는 위협 찾아내고 위협으로 발생하는 위험에 대한 위험도 계산, 위협을 완화시킬 수 있는 대응조치를 파악해가는 과정)

위협모델링 1~1주반 정도 깊게 배울 것

24페이지

- 구현 단계

정적 분석
시큐어 코딩 가이드라인, 행안부 가이드라인에 따라 구현
ex) visual studio 개발 옵션에서 ms-sdl 사용체크해놓으면 c언어 중 scanf 사용하면 워닝 뜸. 이거 취약점있으니까 딴 거 쓰라고

안전하게 sw 개발 하는 과정

25페이지

- 시험 검증 단계

동적 분석 방법 사용
회계? 보안 컨설턴트 있대 화이트 해커도 있고

- 배포 운영 단계

배포 전 최종적 보안 점검

- 대응 단계

사고 발생시 어떻게 대응할 건지 미리 고민해야함
대응시 프로세스에 따라 철저하게 대응
지속적 모니터링 필요(자사의 sw에 대하여)
ex) 회사에 log 보내는거 accept할 것인가(프로그램 쓰다보면)

교수님 말씀) 교육, 대응 단계가 매우 신선했다
but ms-sdl이 지금 대중적이거나 절대적인 것은 아님. 다양한 방법 o

26페이지

보안 투자 했을 때 얻는 비용은
보안 고려하지 않앗을 때보다 크다.

다음시간) 실제 위협을 찾는. 위협모델링 배워볼 것

# 201008

- 수업 개요

중간고사는 위협모델링이 중점
기말고사 전에는 여러 해킹 사례를 위협모델링이랑 매칭해 알아볼것 / 위협막기 위한 보호기법

중간과제: 1~5주 내용. 그러나 위협모델링이 포인트니까 3,4,5주차 내용이 주로 나올 것

오늘 배울 것

ms-sdl의 위협 모델링
설계단계에서 수행하는 행위중 하나가 위협모델링인데...
DFD, STRIDE, DREAD

- 수업 내용

4페이지

⭐
위협모델링은 설계과정에서 진행하는데
실제 해킹 사례를 복기하는 과정에 쓸 수도 있음

⭐
위협모델링을 통해
위협요소 체크 , 위험도 계산, 위험도 완화시킬 수 있는 대응조치도 생각할 수 있음 -> 안전한 시스템만들기위해 필수적인 요소

5페이지

위협모델링을 왜하는가?
보안이 내재화된 sW, 서비스를 개발하기 위해서 하는거고
이렇게하면 공격자 관점에서 우리 서비스의 문제점을 예측하고 선제대응할 수 있기 때문에
외부로부터 들어오는 위협행위로 부터 발생하는 위험을 최소화할 수 있다.

6페이지

⭐
세가지 과정이 있음

## 1. 배경정보수집(dfd)

8페이지

우리 서비스에서 보안자산 어떻게 사용하고 있는지 사용사례, 시나리오 파악
위협모델을 만들기위한 배경이 되는

우리 서비스의 데이터플로우다이어그램 그리는것
(서버, 우리, 그안에 요청하는 서버, ...등)
자세하게 그릴 수록 배경에 대한 정보 수집이 완벽하게 될 수 있음

9페이지

외부개체
ex) 데이터베이스 서버, 외부 서버 등

양방향이면 화살표 두개로. 왜냐면 각각 플로우 마다 보안이슈 다르게 발생할 수 있기 때문

트러스트바운더리는 가장 마지막에 긋는게 좋음

다이어그램이 주관적일 수 있음. 서로서로 그린 것을 비판하는게 아니라 이해하려고 노력하고 토론하는 것이 중요

10페이지

dfd 예시(아직 추상적인 단계)

11페이지

조금 더 구체화

모니터링 프로그램은 어디 있는 데이터를 가져오거나 그런 작업을 할 것

모니터링 프로그램이랑 저장소가 내부라고 생각하고
관리자가 외부라 생각하면 그 사이에 트러스트 바운더리를 칠 수 있겠지!

dfd를 자세히 그릴 수록 stride 과정에서 다양한 위험 요소를 더 식별해낼 수 있음
(물론 stride과정에서도 이런 상황에선 이런 위험이 있지 않을까 같은 상상의 나래를 펼쳐야함)

12페이지

데이터 유실(플로우 몇개를 놓친 경우)

## 2. 위협 모델 만들기 및 분석(stride)

13페이지

자동차용 랜섬웨어
자동차 시동을 끌 수 있음(전자제어장치 락)
모든 전자제어장치 에 있는 sw를 리셋시키거나 펌웨어를 갈아엎지 않으면 주행할 수 없게 만드는
자동차 분야 전문가 + 보안 전문가 (여러분야의 전문가가 모여서 stride하는 것의 중요성)

⭐
위협을 해결하려는게 목적이 아니라
목표: 최대한 많은 위협을 식별해내자
dfd를 보고 위협을 최대한 많이 찾아내자. 시나리오별로 dfd 검토하고, 신뢰 경계랑 데이터 들어오는 진입점과 최종으로 어디로 흘러가는지 이런거 보고 , dfd 참조하면서 위협 찾아가는 과정이 stride임

설계 과정에 개발자, 엔지니어, 보안전문가, 다른 사람들 참여하면 좋다
개발자나 엔지니어들은 내부 동작에 집중하는 경향이 있어 시나리오를 구성하는 아이디어들에 대한 신뢰성을 의도치않게 떨어뜨리는 경우가 많음

14페이지

stride의 6가지 위협 범주
사용해 위협 식별하는 과정 나타낼 수 있음

15페이지
그럼 stride 가 무엇을 의미하나?

16페이지

스푸핑: 위장, 신분위장
권한 없는 사람이 위장하는 것

ex내가 다른 사용자의 id pw 입력하는 것

인증 엄격하게 하면 막을 수 있대

자동차가 위장공격에 얼마나 취약한지 다음주에 배울거래

17페이지

변조
보호 대상 데이터를 변경하거나 삭제하는 것

사담
돈이 목적이 아닌 해킹 중에
보안 공부하는 사람의 웹페이지를 해킹하는 것

ex 웹서버 타고 들어가서 소스코드의 메인페이지 내용을 해킹하는
ex 워너 크라이 사태. 엄청나게 많은 기업에서 피해를 봤대.

중요한 자료는 백업을 해놓을것

18페이지

부인

트랜잭션과 관련된 보안주체가 증거가 남지않도록 트랜잭션을 숨기는 행위
-> 악의적인 활동을 하고 이를 부인하는

ex 은행권, 전자거래
송금하고나서 그 내용에 대해 거부하는. 금전적 사고 발생시키기 아주 적합한 위협

전자서명을 이용하면 부인 공격 어느정도 차단 가능

19페이지

정보 유출
개인정보를 도용하거나 유출시키는 행위, 외부에 노출되면 안되는 정보가 외부로 유출되는 위협

ex 인터파크 유출 사례

방어: 유출될 정보를 애초에 저장하지 않는 것
ex. 주민등록 뒷자리 지우면서 저장
ex. 각 사이트에서 pw 그대로 저장하지 않음. 해시방법으로 저장해서 해커가 이를 빼가더라도 알 수 없게 함

20페이지

서비스 거부(Dos)

특정 서비스에 합법적인 유저가 접근하지 못하도록 하는 행위

ex. 막대한 트래픽 발생시켜 웹서버에 과부하를 주거나
악의적인 요청을 보내 해당 리소스에 오작동을 유발

dos를 분산시켜 다양한 좀비피씨가 공격을 가하는 걸 ddos라함
ex. 농담인데 수강신청

21페이지

권한 상승

공격 과정 중 하나임

권한 상승을 거쳐 데이터가 유출될 수 있음(ex인터파크)

stride 요소들은 복합적으로 작용하기도 함

22페이지

상세한 방법들은 12, 13주차에 얘기할거래

일단 지금은 위협을 잘 찾아내는 것에 초점

가용성(웹서버말고 백업서버를 둬서 가용성 확보 등)

인증(시스템에 접근하게 해주는 것) 인가(인증한 다음에 그 시스템에서 사용할 수 있는 권한을 부여하는 것)
인증과 인가를 적절히 활용한다면 권한 상승도 막을 수 있을 것

## 3. dread

25페이지

위험도를 어떻게 계산할 것이냐

26페이지

dread라는 등급 체계
상당히 주관적

stride에서 발견된 각각의 위협에 대해서 dread를 평가

재현확률(ex. 100번 하면 1번정도 되는 확률이더라 재현확률이 낮다)

28페이지

실습관련 책 보면서 하면 좋을 것

주교재 1장에 36페이지
dfd 꼼꼼히 따져보고 책에서 사용한 방식으로 위협 식별해봐.(이걸 우리가 배운 stride에 매칭시켜봐)
(위협모델의 이해)

새로운 용어
dfd그릴 때 특이사항
설명해주고
위협식별, 위험도 계산은 우리가 해보기

29페이지

공격 지점: 자산을 사이버 공격에 취약하게 만드는 약점이나 결함이 존재하는 영역
공격자는 이 영역에 접근해 취약점을 악용

30페이지

자동차에 영향을 줄 수 있는 차량구성요소가 장착되어있는 부분이나 접근할 수 있는 부분

31페이지

자동차의 공격지점이 이렇게 많다는 것

라디오 신호, 시디 삽입되는 부분, 엠피쓰리 연결되는 부분, 공기압 측정 tpms , ...
자동차는 더이상 폐쇄적인 시스템이 아니고 다양한 공격지점이 존재한다. 연결고리가 많다

32페이지

⭐
공격지점을 잘 식별해야
dfd 그릴 때 ... 내부 보호 자산이랑 외부개체가 잇잖아. 외부개체가 결국은 이런 진입지점을 통해 들어오는거기 때문에 그걸 잘 식별해야해. 이게 어떻게 악용되고 이 진입점을 통해 외부 개체와 어떻게 연결되고 어떤 데이터가 주고받아지는지 데이터 플로우를 잘 그려주는것이 dfd의 핵심

34페이지

자동차 다중프로세스로 표현(자동차 내 여러 기능있어 어려 프로세스로 나타낼 수 있으니까)

들어오는 정보
tpms(타이어 공기압 측정하는 무선 센서)
kes

내부에도 다양한 통신포트들이 있다.

35페이지

차량이라는 객체를 구성하고 있는 프로세스를 자세히 나타낼 필요 있음

그안에서도 infotainment 네비게이션에대해 자세하게 알아보겠다.
1.0 프로세스의 세부이니 1.1, 1.2, 1.3 이렇게 넘버링해줌

38페이지

단순한 시스템을 굳이 세부적인 레벨로 똑같이 나눌 필요는 없음.

dfd 레벨 0,1,2에 따라 위협 식별하는 과정이 책에 자세히 나와있대
책에선 문장으로 설명한 위협을 stride에서 무엇인지 매칭시켜보기

# 201015

- 수업 개요

특별 세미나는 출결체크하지 않을거래
다음주에 올라올 중간과제 설명영상은 꼭 봐야함

29일, 30일 중에 언제 과제 수행할지 선택. (오후 7시부터 시작할 것)

배울 것
In-vehicle network(자동차 내부 네트워크)개요
minor protocol
major protocol(자주쓰는 프로토콜)
can and can-fd (major 프로토콜 중에서도 controller area network 배울 것)

차량용 통신 기법에 관한 개요.

중간 이후 배우는 해킹 3주치에 대한 배경지식을 배우는 것이라 볼 수 있음

- 수업 내용

5페이지

자동차 내부 네트워크에 접속할 수 있는 obd-ii zjsprxj
자동차 내부 네트워크는 다양한 프로토콜로 이루어져있다.

아래 파랑색은 major protocol

가장 중요한 건 can과 여기에 연결할 수 있는 obd-ii 포트에 대한 이해임

7페이지

자동차가 진화하는 과정

e-call emergency

x-by-wire
전기적 통신을 하겠다.
전자제어장치 도입되기 시작

connectivity
외부와 통신 늘어남

자동차의 전자화 속도 급속도로 증가

10페이지

ecu
다양한 전자제어장치 탑재중

아두이노랑 성능비슷한데 엄청 비싸대 . 저온 고온 등 다 견뎌야하기 때문에

기어변속, 측면/후면물체감지, 운전대, 계기판, 에어백, 등등...

전자제어시스템들은 서로 정해진 통신프로토콜을 이용해 통신을 하고 있음

12페이지

자동차안 통신회선 다 늘여놨더니 4키로 였대

지금은 선 길이가 기하급수적으로 늘어나진 않음.

13페이지

선이 많아지면(구리선이 많아지는 것) 자체 중량도 무거워지고 회선 어딘가 단절되면 고장 원인 파악하는 것도 어려워짐

선을 단순화시키는 것은 무게 줄이고 연비도 줄고 점검도 용이해짐

그래서 만든게 IVN인데 그중에서도 can이 짱
can 도입되니 버스선
새로운 개체 접합할 때도 용이
can 통신 safety하대. 안정적

14페이지

class a
창문 내리고 이런거

b
계기판

c
엔진쪽, 브레이크.

can은 class b(low speed can),c(high speed can)에서 쓰일 수 있음

15페이지

flexray 한단계 더 좋은 통신
most 자동차에서 멀티미디어 볼 수잇게

minor 프로토콜들은 제조사에 특화된 프로토콜이 많아 자세하게 살펴보진 않을 것

16페이지

자동차 내부는 검은 박스 등의 요소가 있음

- 자동차 몸통
  창문, 와이퍼 등

-> low speed can, lin

- infotainment
  인포메이션+엔터테인먼트
  자동차 내부에서 다양한 멀티미디어 기능
  ex.네비게이션

-> most

- power(자동차 움직이는 힘과 관련)
  자동차 엔진쪽이나 구조
  연료 분사해 빠르게 나아가고 ,기어변속하고 이런거

-> can, flexray

- 샤씨(자동차가 움직이는 정교한 조작과 관련)
  자동차의 조향(핸들꺾어 방향 잡는)
  safety시스템들어감
  충돌 감지, 차선

-> can, flexray

통신들은 프로토콜 별로 서브 네트워크 구성하고 있음

특정 속도 이상되면 문 잠기는것 예로 들면...
powertrain -> body 정보 줘야함
그 기능을 gateway(각 서브 네트워크에서 발생한 일을 집합시키고 나눠주는 곳)가 하는 것
gateway는 obd2라는 포트가 있음(자동차 안 제어기들의 상태 확인하는 포트임)

17페이지

정비시 이 포트 사용
특정 제어기가 받을 수 있는 요청 이 포트로 보냄

obd-2
이는 공격 지점으로 사용될 수 있다.

18페이지

can은 두개의 fin 커넥터 사용할 수 있는데
여기서 can high = 아까 말한 high speed can 이 둘이 같은 것 아님
기본적으로 can통신은 두가닥의 구리선으로 이루어져서 그런 것

19페이지

obd2
정보보호 관점에선 무서운... 진입점이 될 수 있으니
안전관점에서 정비 때 쓰니
양면적

20페이지

자동차 정보
제조사, 연식, 옵션, 모델에 따라 다 다름
해킹을 그럼 어떻게 하나 ? 다 검색해서. 한대한대 리버싱한다음에 특정 차종에서 사용될 수 있는 해킹 코드 짜는것

21페이지

근데
obd2는 정비를 위해 만들엇는데 자동차의 상태를 알려는 것
obd2는 표준으로 쓰는 것. 표준 포트를 통해 정보를 얻어오는데 얻어오는 방법도 당연히 표준이 정해져있을 것
-> obd-2 pid

24페이지

저거 포트에 꼽고
휴대폰에 앱(차량용 어플리케이션) 깔아서 정보 볼 수 있음

앱이악성이면 공격될 수도 있음

25페이지

공격지점이 될 수 있음에도 이를 쓰는 이유
정비하는데 가장 많이 사용

엔진 소리가 이상해요 -> 엔진을 뜯어서 볼 순 없음

제어장치에 요청 보낼 수 있음
단절되어잇으면 on off 줘야되고 켜져있는데도 그러면 명령을 줄 것
정비진단기 이용하면 엔진도 끌 수 있고 와이퍼, 헤드라이트도 조작가능 > 자동차를 강제로 제어 가능. 보안에는 위험한 덩어리가 될 수도...

정비진단기 이용한 해킹 공부도 나중에 수업에서 한대

26페이지

minor프로토콜

이런게 있구나만 알면됨

32페이지

major 프로토콜

flexray는 can과 비슷해.. 일부 차종에서만 사용

ethernet 혁신적
자율주행차가 나오면서 고용량의 빠른 데이터 통신 필요해짐. 지금은 실제로 이더넷이 탑재된 자동차가 달리고 있음

33페이지

제어기들 온오프 정도 lin 사용

low speed can

can 영역의 일부를 flexray 사용하기도 함

34페이지

lin

간단한 데이터 주고받을 때

35페이지

통신속도 느리고
저비용
가장 느리지만 가장 저렴한 -> 심플한 통신ㄴ에 사용

36페이지

보통... 제어장치간 통신은 can이런거 사용
제어장치가 전달받은 정보를 프로세싱해서 실제 장치를 움직이고 싶을 때는 lin 사용되는

37페이지

lin이 하는 동작을 low speed can 으로 구현한 차도 있대

39페이지

링형 토폴로지 로 이루어짐
(넣다 뺐다 하는게 쉬움. 플러그앤플레이)

40페이지

flexray

파워트레인, 섀시를 위해 통신 기반 구조 제공
파워트레인, 섀시에 들어간 전자제어장치 간 통신을 위해 사용!

can보다 빠르네
그래도 can을 뛰어넘진 못했음

프로토콜들의 상세 동작구조를 설명하진 않을 것. 역사, 개념, 현재 위치 정도 알면됨

42페이지

flexray가 사용된 차종

can을 대체하기 위해서 만들어졋으나 대체하진 못했음

backbone망에서 쓰이는 차세대 프로토콜 벗 가격이 비싸고 구축하는데 힘듦

44페이지

선 많이 들어가니까 연비도 많이 들어 flexray!

47페이지

가장 많이 쓰이지만 가장 많은 취약점 가지고 있는 can

49페이지

cdma/ca 사용
동일 시점에 두개 이상의 제어기들이 동시에 통신하려고 하면 충돌발생하고 이 충돌을 중재
-> 우선순위 설정(메시지 식별자로)

전자제어기들은 각자 고유한 id 갖는다

50페이지

분류는 통신속도가지고 나눔

51페이지

두개의 통신회선이 있고
(두개의 저항있고)
통신하고자하는 제어기는 두개의 선에 연결이 되어야함

외우진 않아도됨

52페이지

ecu 들여다보면 이래

microcontroller(cpu)
can controller 패킷을 can 형태로 만들어주는
can transceiver (디지털->아날로그, 아날로그->디지털) 디지털신호를 구리선에 보내려면 아날로그로 변환해야해

아두이노의 경우 씨피유, 캔 컨트롤러 내부에 있고 can transceiver 만 하드웨어 따로 써서 통신회선 꼽아 자동차에 연결하면 됨

53페이지
두개의 선에 서로 다른 전압이 흐르면 0, 같으면 1

이런 방식으로 캔 통신회선에서 특정 디지털 신호를 아날로그로 변환하고 수신자는 아날로그 읽어 디지털로 변환

54페이지

중요한건 구리선.
전압이이렇게 다르면
딱 둘만 참여하게 해야하는데 그걸 어떻게 하나?

충돌나면 회피하는 규칙

55페이지

동시에 저요!라고하면
우선순위에 따름

56페이지

id 가 낮을수록 우선순위가 높음

57페이지

자기 아이디를 2진수로 하나씩 꺼내보며
큰애를 걸러냄

node a는 계속 발언할 수 있는 것

58페이지

can2.0a 아이디임

아이디 부족하면 2.0b
쓰기도 함

data부분. 전달하려는 것

crc 무결성 검증
(인증을 수행하지는 않음. 보안이라곤 이거밖에 없는데 위조나 데이터 변경을 감지해낼 수 없음)

59페이지
한번 읽어봐

60페이지

전송 속도를 다르게 하자
can의 약 8배의 데이터 전달 가능
속도도 향상됨

그러나 이외의 것은 can과 동일

왜 해킹이 되나? 보안 기능이 crc밖에 없기 때문

⭐핵심
can에 관해 꼼꼼히 살펴보고
can의 중개 프로세스
can이 보안기능이라 말하는 crc의 특징 -> 통신 패킷이 안전하ㅣ게 통신회선에 잘 들어갔는지 확인(통신패킷에 대한 무결성 체크 정도만 되는거지 인증을 수행하지는 않음)

# 201104

9주차 강의

- 수업 개요

중간대체과제 수행 결과

⭐

**다음 기말 대체 과제땐 정말 보.고.서 처럼 잘 설명하자**
보고서 같지 않은 보고서는 감점 요인.
표지 없는 보고서라던가(표지는 첫페이지에 필요한 걸 담은! 이름, 학번, 교과목명 이런건 기입이 되어있어야함)
단을 나눈다거나 1,2,3 매긴다거나 그런 보고서 구성이 필요
추가점수줬대 - 목차 구성, 보고서의 가독성(요점이 뭔지 ... 볼드체를 주거나 표를 다시 잘 설명해주거나 등등)
중간대체과제-> 그냥 수업에 있는 과제가 아니라 중간대체였음!

<평가 기준>

1번 사이버 킬 체인

1-1
7단계 있다. 한두줄 설명등으로 끝나면 안됐음
사이버 킬 체인 개념과 정의
스스로 찾아보고 분석된 내용도 넣어야됨

1-2
사고 사례에 대한 기술적 설명 없이 사고사례는 이렇고 표 띵띵 이렇게 있는 건 좋지 않음
사고사례가 무엇이고 스스로 생각한 기술적 특징 분석하고 그 내용 기반으로 사이버 킬 체인 분석해야되는데...

텍스트를 가득 채운 문서는 보고서가 아님

사이버킬체인분석의 좋은 예시는 이미지로 저장해뒀음

보고서는 상대방에 의미를 잘 전달해야함

2번 stride

2-1

2-2
정말 한두가지 사례만 있는 건 감점했대
휴....
하나의 사례라도 자세히 작성해야함

점수가 낮아서..간단하게 작성했는데 그게 큰 착오였네

3번

dfd그리는데
어떤 시스템을 대상으로 그리는지, 그 시스템은 어떤 기능인지
각 요소는 무엇을 의미하는지, 데이터 플로우가 의미하는 것은 무엇인지 아무 설명없이

그냥 앱에 대한 dfd 입니다 하고 끝나버리면
이런게 학생 중 30-40퍼센트였대 감점을 크게하진 않았지만 감점이래

캡스톤 디자인으로 그리더라도 그 플젝이 어떤 의미인지
레벨 1,2,3이 어떤 의미인지 한줄이라도 설명이 되어있으면 점수를 잘 줬대
아무 설명 없이 띡띡 그림만 있으면 감점

이게 무슨 시스템, 기술인지 설명
각 dfd레벨마다 설명

- 수업 내용

7~9 페이지

지금까진 분석방법론을 배웠음
자동차 환경에서 발생하는 악성코드에 이를 매칭시켜볼 것
6주차에 자동차 네트워크는 기반이 되는 내용!
직접 위협모델링 해볼 것
12,13주차는 실제 스마트카 보호기법 배울 것
9~11주차에서 분석한 모델링에 보호기법 끼워 넣을 것

자동차 환경에서 발생하는 해킹 사례 분석
사례는 논문 기반
기말 대체과제에 논문 사용하실 예정이시래
스스로 분석해야된대

10페이지

차량 해킹 을
사이버킬체인, 스트라이드, 드레드로 분석할 것

- 수업 내용

본격적인 9주차 수업 내용

11페이지

앞으로 볼 3가지 유형의 자동차 악성코드들은 모두
캔 버스 리버스엔지니어링 과정을 거쳐
얻어진 결과로 무기화를 하는 것

13페이지

캔 버스 리버스엔지니어링 하기 위한 a~z 다 공부해볼것

그 후
사이버 킬체인 등으로 분석할 실제 사례를 논문으로 볼 것
지금 수업에서는 1~3 항목까지 강의하신대

14페이지

캔 버스 리버스 엔지니어링은 정찰 단계에 해당됨
전체 공격의 90프로가 정찰 과정에 쓰인대 -> 취약점 찾음 -> 무기화에 이용

15페이지

stride 관점으로 보면 4가지 유형에 소속되어있을 것이다.!

인증없이 캔 통신에 참여할 수 있음(위장 공격을 통해 정보를 알아냄)
이렇게 알아낸 자동차 내부 네트워크 정보 외부로 유출(패킷의 의미 정보로 공격도구 만들고, 써드파티 모듈 등 정비기기 만들기도함)
(써드파티는 제조사에서 한거 말고 사제로 만든 것 의미)
자동차 각 제어기의 가용성 떨어뜨리는 도스 공격도 발생가능. -> 실제 자동차에서 멀 펑션?을 일으키는지 알 수 있음
제조사에서 정식으로 발매한 정비기계가 있는데 이걸 분석해서 정비 기기권한을 우회해서 공격 수행

T,R에 새로운 의견 줄 수도 있음

16페이지

12,13주 배우면 보호기법도 생각할 수 있을 것

17페이지

위험도 한번 산출해보기 dread

악용가능성
오늘 배우는 내용에 대해서는 유선으로 연결하니까 위험도 하를 준 것

영향 받는 사용자
분석되는 특정 자동차 모델에 한정되기 때문에 중

탐지 가능성
위험도 높아보이지 않는다,,

캔 리버스 엔지니어링 다 안다는 가정하에 dread 미리 해본 것

⭐
논문 보면
그 논문에 대해서
사이버 킬 체인, stride, dread, dfd 하면 됨

19페이지

1. 캔 버스 연결
   어떻게 하면 자동차 내부 네트워크를 분석할 수 있는 도구를 연결할 수 있나?

캔은 버스 프로토콜이고 그로 인해 제어장치들이 연결되어 있다(저번 수업 참고)

연결방법은 크게 3가지가 있다

- obd-ii 커넥터(운전석 옆쪽에) - 정비 위해 연결하는 포트

- 자동차를 직접 뜯어서 여러가지 구리선을 하나하나 분석하는 것

- 기타 통신 커넥터 - 차모델마다 좀 다르대, 봇네트를 열어보거나 엔진을 열어보면 포트 잇는데 그걸로 공격도 가능

20페이지

왼쪽 그림을 추상화해 늘여놓은 것 -> 오른쪽 그림

21페이지

2차 추상화 결과

(물리적 구성)실제 캔 선은 2개의 구리선으로 이루어져있음. 전자제어장치는 이 두 선(H,L선)에 모두 연결되어있어야함

22페이지

두 선의 전압의 차이 이용해
같으면 1, 다르면 0

오른쪽의 아날로그 시그널이 흘러가면(선에서 내뿜는 신호) 캔통신읽는 캔트랜시버 하드웨어장치가 디지털로 만들어줌
이 비트를 펌웨어 단에서 다시 연산을 해서 의미있는 데이터로 만드는 것!

23페이지

오비디투
운전석하단에 이렇게 있음
16핀을 꼽을 수 있음
커넥터(에뮬레이터?)를 여기에 꼽고 노트북에도 연결하면 패킷얻을 수 있음

24페이지

아두이노나 라즈베리파이는
캔 하이, 로우선 꽂으면 직접 연결도 가능
(6번과 14번 - 국제 표준이라 자동차마다 다 똑같음)

25페이지

조금 어려운 방법이래

h,l선이 꼬임선으로 되어있대
꼬임선이 캔통신 회선일 가능성이 높대
끊어서 오실로스코프에 연결하면 파형이 나타나는데 이게 캔 버스에 연결된 선이 맞구나 하면 피복 벗겨서 원하는 장치에 연결하면 됨

일반적으론 멀티미터를 이용해 전압 혹은 저항을 이용해 캔 버스임을 알아봄

26페이지

멀티미터 사용예

천재적인 해커가
통신 회선 찾는게 제일 어려웠대
해킹 테크닉은 현란하지 않은데 자동차에 대해 이해하는 과정이 어렵대

27페이지

기타 커넥터를 이용하는 방법

정비지침서 - 자동차의 다양한 통신 포트에 대한 설명이 있대
특정 포트에 캔 하이, 캔 로우 포트가 있다 ~ 이런거 알려줌

아두이노같은경우 3~4만원이면 캔 통신 모듈 만들 수 있고
이걸 연결하면 패킷을 받을 수도 보낼 수도 있기 때문에 자꾸 언급하는 것(굉장히 저렴한 비용)

28페이지

이렇게
통신회선 찾았으면
모니터링 툴 연결해
어떤 패킷 올라오는지 보고
패킷 의미를 보고
공격할 수 있는지 없는지 보자

무기화에 쓰일 수 있는 내용, 요소, 취약점 요소를 찾을 수 있는지 확인하는 과정

=> 캔 버스 통신 리버싱

4가지 과정으로 이루어짐

- 모니터링 툴 연결

- 모니터링 가능한 패킷들 그룹화

- 패킷 의미 분석해서 기록하고 리플레이 함으로써 자동차에 반응이 있는지 확인

- 특정 패킷 찾아냈으면 실제 공격되는지 확인

마지막 3가지는 거의 한 세트로 움직임

29페이지

캔 패킷 모니터링하고 패킷을 분석하는 과정이 첫번째

캔 패킷의 의미분석한 다음 그 패킷을 공격도구로 만들 수 있게끔하는 전체 과정을 리버스 엔지니어링이라고함

30페이지

하드웨어, 소프트웨어 거의 세트로 둘다 씀

캔 통신 시뮬레이터(캔 디바이스 + 캔 소프트웨어)

- 캔 디바이스: 캔 통신 회선에 두가닥의 선을 붙이고 거기서 나오는 아날로그시그널을 수신해서 디지털화(비트스트링) 할 수 있는

- 캔 소프트웨어: 디바이스가 만들어내는 비트를 캔 패킷형태로 만들어주는(가공해주는) 소프트웨어가 필요(특정 데이터 영역, id 영역, 시간 등 표시해주는)

31페이지

- 캔 디바이스

여기서 나온 디바이스들은 저가이고 정식으로 캔 버스를 리버스엔지니어링하려면 고가의 툴이 필요하긴 함(교수님 연구실에 있대)

- 캔 소프트웨어

다양함
프리웨어 형식(깃허브에서 다운받을 수 있는 것도 있음) 구매해야되는것도있고

우리 수준에서는 아두이노로 만들어보는게 좋음

캔통신에선 아날로그 시그널이 흐를텐데
캔디바이스에서 비트스트링 만들고
이걸 소프트웨어로 올려주면 프레임 형태로 만드는거지(구획 나눠서)

디바이스와 소프트웨어는 쌍으로 다녀야 분석하기 편함

또한
소프트웨어 이용 패킷 형성하고 이걸 비트형태로 만들고 이걸 디바이스로 전달하면 디바이스는 통신회선에 다시 원형태로 보낼 수 있어야함.
그래야 내용 맞는지 재확인 가능

32페이지

slcan0 컬럼
각 전자제어장치를 쓰고 있는 id(송신자의 아이디, 송신자의 네트워크 주소)

dlc
데이터 렝쓰 코드
앞으로 몇바이트 전송할 것인지
2이면 2바이트 전송한다는 것

뒤에는 데이터 부분

ex
120번 아이디가 속도 관련 엔진 이슈면
데이터중 일부는 속도 일부는 rpm 일부는 엑셀레이션 누르는 압력과 관련된 값일 것
어떻게 엑셀레이션할건지에대한 정보일 것

이런걸 분석해서 무기화 진행 가능한 것

33페이지

candump 이용한 것
다른 툴을 사용해도 이런식으로 보인대

34페이지

패킷 그룹화는 왜 시킬까?

35페이지

전자제어장치들은 10ms 마다 패킷을 전송
-> 하나의 전자제어장치가 1초마다 100번 패킷 발생시키는 것임
-> 자동차엔 100개가 넘는 전자제어장치가 있음
-> 1초동안 수천 수만개의 패킷 발생할 것 -> 분석하기 어려움

36페이지

빨간박스가 초인데
거의 0.5ms 마다 패킷이 있는걸 볼 수 있음
단순히 모두 캡처된것만으로는 분석 어려움

id와 데이터가 무슨의미를 가진지 알아야 분석할 수 있음

37페이지

id별로 패킷을 그룹화를 시킴(id별로 현 통신상황을 업데이트)
-> 특정 아이디에서 발생하는 데이터를 유심히 보는 것
그리고 갑작스럽게 데이터가 변경된 부분을 보는 것(흰색 찐한거 보기)

38페이지

그룹화는 일반적인 모니터링툴에서 모두 지원함

41페이지

캔 패킷 기록과 재생

- 기록(특정내용을 기록)

캔버스에서 나온 신호를 비트스트링으로 만들고 패킷으로 로그를 남기겠다는 거고(저장)

- 재생(흘려보는)

남겨진 로그중에 용의선상에 있는, 이건 어떤 행위를 하겠다 생각되는 것을
다시 자동차에 밀어넣는 것

42페이지

악성 코드 작성에 작성할 패킷을 찾아내야함 -> 캔 패킷 분석
ex
전수조사(일일이 다 재생해보는), fuzzing(공격), 정비기기 이용

43페이지

볼드된 2가지의 방법만 알아보려고 한대

3. 자동차 정비기기를 이용한 분석 은 논문에서 다루고 있어서 논문할 때 하시겠대

창의적보면 이게 정말 창의적인가 의문들 수 있을 텐데
수많은 패킷에서 의미를 갖는 것을 찾기위한 최적화된 방법이기 때문에 창의적인 방법이라고 한대

44페이지

1. 창의적 패킷 분석

이벤트 기반 조사

5가지 단계로 이루어짐

- 기록 시작

- 이벤트 한가지만 수행한대(동작)
  ex. 문 lock, unlock

- 그동안 기록하다가 수행되면 기록 멈춤

- 기록된 내용을 자동차에 그대로 밀어넣는대

- 자동차에서 동작이 발생하는지 확인
  (변화 발생시 그 패킷 위주 더 분석하며 좁혀가는거지)

이 작업을 반복적으로 하다보면
특정 패킷의 어떤 데이터부분이 어떤 부분을 자동차를 제어하는구나 알 수 있음

45페이지

차는 계기판에 시속 250km 까지만 표시되어있을 것
250를 비트로 표현하려면 표현하려면 1바이트 필요
엑셀 밟으면 0~250 사이 변하는 패킷이 생길것
이걸 기록했다가 리플레이해보고
자동차가 반응하면 그걸 범위를 좁혀나가다가
특정 범위에서 자동차 제어하는 것 알게되는거지

문 잠그고 여는거 알아보고싶을때
어떤게 a0 a1 이렇게 번갈아 변한다면 추측할 수 있겠지

이런방법은 노가다이긴함

46페이지

2. 캔 버스 퍼징(무작위 대입)

재생할때 id와 데이터를 무작위로 대입하는겨
상당히 비효율적인 방법

id 00~ff 이런식으로 엄청 많고
데이터가 엄청 많음

그럼 왜 쓸까?
문서화되지 않은 서비스
디자이너가 고려하지 않은 동작이 발생할 수 있기 때문에
특정 영역 이상의 데이터가 들어왔을 때 처리안하고 그냥 받아들인다거나
특정 영역에 대해서는 비트 스트링 받아서 상위 비트만 봐야되는데 하위비트 다본다거나 등등
코딩상 실수
에 퍼징이 효과적인 방법이기 때문

도스(특정 시스템의 가용성 떨어뜨리는)공격에도 쓰인대
자동차 내부 버스 네트워크를 무력화 시킨대(모든 기능이 버버벅 거려서 위험하게 만들 수 있게)

48페이지

트러블 슈팅!

현재시속 60인데 시속 100 패킷 넣어버리면 계기판에 에러 경고등 발생할 수 있겠지
자동차에 실험하고나서 자동차의 상태 변하는 경우도 있대
어떤 경우는 엔진에서 불도 났대

50페이지

정찰 단계에 포함됨
자동차에 대해 알아보고, 정보수집
캔버스 분석
버스에 연결하고
통신을 리버싱(그룹화, 기록재생, 의미분석 과정이 포함됨)
실제 자동차 강제 제어할 수 있는 패킷 알게되는데 이를 무기화에 사용하게 될 것

51페이지

50페이지의 과정들을 스트라이드 관점으로 본다면?

인증 없이 연결해
어떤 패킷을 재생하는 것은 A 제어장치가 썼던 패킷을 A인척 다시 흘려보내는 거니까 위장

패킷에 대한 의미를 알아냈다면
그 의미는 제조사에서 공개하기, 유출되기 싫어했던 것일테니
유출에도 해당할거고

퍼징기법 사용했을 때
통신환경에 위해가함으로서
제어장치들이 일시적으로 먹통되거나 버퍼걸릴 수 있다 ->도스공격 수행 가능
함 확인했음

52페이지

dread 관점

피해가능성(d) 강제제어하니까 위험할 것이다

...

자동차 내부 네트워크에서
특정 패킷의 의미 분석하는 것 배웠음
이 과정을 통해야 악성코드에 사용할 수 있는 패킷 찾을 수 있음

차량에서 활동하는 악성코드는 코드안에 특정 아이디와 8바이트 데이터를 하드코딩으로 갖고있거나
그 데이터를 만들 수 있는 코드를 가지고 있을 것

사이버 킬체인, 스트라이드 등등 활용하여
자동차에서 발생하는 특정 악성코드들이 어떻게 행동하는지 유형, 방어기법 생각할 수 있음

53페이지

논문보고 직접 분석해볼 것

attack experiment
오늘 배운 것 배우고나서 여기 이해 쉬울 것

논문을 보고 논문을 정리하고 논문 기반으로 사이버킬체인, 스트라이드 이런거 수행해야함

55페이지부터는~

인트로부분
자동차 내부 네트워크 특징
자동차 환경의 변화
자동차에서 쓰이고 있는 차량용 스마트폰 어플에 대한 특징
캔버스 리버싱 과정
위를 이용한 자동차 환경에서 일어날 수 있는 커넥션, 외부 네트워크 의 특징
공격모델
공격모델 기반으로 하는 공격 실험 - (주교재5장)강제제어패킷분석[정비기기 이용, 주행패킷이용(오늘 배운것, 주교재 5장 내용)] / 악성 스마트폰 앱 제작 및 배포(무기화)
목적 달성 내용

다음 주차에 배울 것

우리는 77페이지의
악성코드의 행위를 분석해
security modeling 직접 수행해봐야함

12,13주차에는 보안기법

사이버 킬 체인 각 단계를 끊기 위해서 어떤 보안기법 늘 수 있는지
stride 에서 말하는 각 위험요소를 방어하기 위해서 어떤 보안기법 늘수 있는지

배울 것

9~13주차 내용에서
논문중 특정 논문 2~3건에 대해 기말대체과제로 내신대
미리미리하기

# 201111

- 수업 개요

저번 수업에서
자동차 분석
어떤 정보를 이용해 자동차 해킹에 사용할 수 있는지
자동차 내부 네트워크 분석 및 해킹
배웠음

오늘은 인포테인먼트 시스템 해킹
차량용 네비게이션을 어떻게 해킹하는가
여기에 어떤 악성코드가 들어가는가
이 악성코드는 어떻게 만들어지는가

그전에 9주차 후반에
실 사례로 위협모델링 수행해 악성코드 어떻게 동작하고 어떻게 차단할지 실습해보기로 했지
차량용 악성코드가 어떻게 작성되었는지 설명해줄 것
(사이버 킬 체인, dfd, stride, dread 이용 모델링하는 실습 해보려함)

인포테인먼트 시스템 해킹 관련 주교재보다 자세한 참고논문 같이 알려줄 것

- 수업 내용

3페이지

후반부 수업은 사례는 논문으로 알려준대

이론적인거 설명해주고
논문 간단히 설명해주면
해당 논문을 기반으로
사이버 킬체인, 스트라이드 , 드레드, dfd를 실습해보기
어떻게 하면 방어를 할 수 있을까를 고민해보는 것이 중요⭐

우선 9주차 학습 연장선에서
a practicla wireless 논문 오늘 볼 것
(사이버 킬체인 스트라이드 드레드 등등으로 분석하기)

인포테인먼트는 vulnerabilities of Android OS .. 논문 볼 것
이것도 사이버킬체인 스트라이드 드레드 등등 분석해보기

4페이지

이 논문은
자동차 네트워크의 취약점 분석하고
9주차에서 배운것처럼 자동차 내부 네트워크 패킷 분석해 자동차 강제로 제어할 수 있는 패킷 찾고
이 패킷 기반 어떻게 공격도구 만들 수 있는지를 설명해주고 있는 논문
(공격도구 -> 공격 시나리오 -> 실제 자동차를 해킹하는 내용까지 진행됨)
방어방법까지 제시하고 있음 but 완벽하지 않음. 우리는 시큐리티 모델링을 해야함(사이버 킬체인, 스트라이드, dfd, 드레드 수행하고 사이버 킬체인, 스트라이드 과정속에서 방어기법에 대해서도 생각하면 정말 좋을 것!)

모델, 실험, 방어 부분은 어려울 수 있음 -> 논문 보기

6페이지

지금은 100-130 개 정도의 ECU가 차량에 들어간대

ex)
차량 창문 열고닫는거
속도 올라가면 차문 잠기는것
시트를 자동으로 앞뒤로 땡기는 것
하이패스 등
자동 변속기 -> 현재 자동차의 속도 보고 자동으로 기어 변속 해주는

다양한 전자제어장치가 차량에 들어감

7페이지
ECU간 데이터를 안전하게 송수신하기 위해
다양한 종류의 차량용 네트워크 개발

can이 제일 많이 쓰임, 표준

8페이지

자동차 외부 네트워크 특징

전자제어장치들이 can을 통해 연결되어있음

이제 외부에서도 내부 네트워크를 제어하고싶어짐 -> can과 외부 네트워크의 연결

커넥티드 카 서비스
-> 자동차 안에 텔레메틱스 ecu 또는 텔레메틱스 시스템이라는 이동통신단말을 삽입해놓고 외부에서 언제든지 자동차에 접근할 수 있는 형태의 플랫폼

요즘 차량
현대의 블루링크 / 기아의 유보
스마트폰으로 차량 시동 걸고 문열고닫고, 에어컨 히터 틀고, 위치 추적

gm, bmw에도 있음

- 차량에 타서
  운전자의 스마트폰과 자동차 네비게이션이 하나가 되는 시스템도 늘어나고 잇음
  ccc
  안드로이드 오토, 구글 카플레이어?
  스마트폰을 운전자 차량에 연결해 스마트폰에 있는 다양한 기능을 하게함. 전화번호부 받게해 차량에서 전화걸게 해주고 등등

=> 이제는 내부를 외부에서도 컨트롤 되는 환경이 만들어졌다는거지

9페이지

자동차와 연결할 수 있는 앱 정말 많다!

obd2 검색해보면 1000개 이상의 앱이 있음
운전석 좌측 하단에 있는 정비진단 포트임! obd2
(정비진단 포트에 블루투스나 와이파이로 연결할수있는 플러그인 디바이스를 연결하고 자동차 스마트폰을 페어링해 연결 할 수 있는...어플 이렇게 많다는 것)

구글, 애플이 자동차 시장에서
자신들의 플랫폼을 자동차에 설치하려하고있음
자동차 + ict 기술

핵심은 뭐냐면
외부에서 정보를 받아가는 행위
스마트폰과 연결하여 자동차와 연결해 제어하거나 정보를 얻어가는 행위
에서 정보보호가 없다면?
언제나 감시되고 침투받을 수 있는 상황이라면?
자동차 내부 네트워크, 제어기 등에 기본적인 정보보호 기능이 없다면?

10페이지

can은 어떠한 정보보호기능도 제공하지 않음
(워낙 예전에 만들어짐)

브로드캐스트가됨
통신회선에 떠다니는 패킷을 누구나 볼 수 있음

비암호화
떠다니는 패킷에 대해 기밀성 보장하지 않음

비인증
메시지가 어디로부터 온것인지, 위변조 확인하는 과정이 없음

=> 자동차는 해킹에 취약하다!

13페이지

내부 네트워크와 연결하는 방법 2가지 정도 있음

텔레메틱스 ecu 사용
or
obd2 포트 이용

내부와 연결이 되면
다양한 웹서비스, 모바일 서비스 이용 가능

중요한 것 자동차 내부에 어떠한 보안도 없다는 거지

14페이지

공격자, 자동차, 운전자의 특징에 대해 저자가 설명하고 있음

어떻게 현대 자동차에 공격이 가능한지 공격모델에 대해 설명해주고 있음

15페이지

- 공격자의 능력

패킷을 읽거나 쓰거나

정찰~목적달성
까지 모든게 가능하다(논문에 자세히 나와있음)

- 자동차의 취약점

정비기기에는 어떠한 접근제어도 없음

스트라이드
어떤 취약점이있어 어떤 공격이 되겠구나 잘 알 수 있을 것
공격자가 분석하는 과정속에서 나타나는 정보를 이용해 스트라이드 가능

- 운전자의 행위

16페이지

저자들이 내세우는
공격 모델 -> external attack(외부에서 안으로 들어가겠다!)

obd2를 기반으로
차량용 악성 스마트폰앱을 연결
obd2에 연결되는 작은 스캔 툴 이용

이런 external attack에 대한 공격 모델을 세우고 저자들은 연구를 진행해 실제 해킹을 수행하게됨

internal의 경우
악성도구를 만들어 자동차 안에 미리 심어놓겠다는 것
ecu를 미리 심는 건 어렵대

malicious tp avn(third party)
-> third party 제조사에서 판매하는게 아니라 제 3자, 아이나비같은거로 공격하겠다는 것

이따 얘기할 두번째 논문같은 경우는
thirdparty avn이 아닌 실제 제조사에서 만든 avn(현대나 기아)를 해킹하는 걸 얘기할 거래

모델이 정말 현실적일까? > 실험으로 입증해야함

18페이지

공격 실험 부분

이 내용 보면
정찰, 무기화, 배포, 설치, 목적달성, ...
의 포인트가 보이지?
앞부분의 내용과 실험부분을 살펴보며
사이버 킬 체인의 각 단계를 분석할 수 있음(우리가)

다만 모호한게...
무기화, 배포, 악용, 설치 부분이 논문에서는 경계가 모호하대. 사이버 킬 체인 수행시 경계가 모호하면 특정 단계는 합치래!
악용이랑 설치를 합치거나 배포나 악용을 합치거나
내 의견, 주관을 나타내며 분석해도 된대(권장)

19페이지

공격 준비 단계 상세하게 알려줌

내부네트워크에 어떤 취약점 있어서
어떻게 패킷 분석할 수 있는지 알게됨
-> stride 가능

- 자동차의 네트워크 구조를 봐야함

정비진단포트이용
캔통신회선을 찾아 직접 분석하는 방법
자동차 판매시 정비지침서 있대(자동차 제어기 어케 달려있고 통신회선 어떻게 달려있는지 나와있대) 이를 분석하면 통신에 참여할 수 있겠구나

- 패킷을 스니핑해 분석(패킷 모니터링)

- 리플레이 어택을 통해 타겟을 선정(분석한 패킷으로 자동차 제어할 수 있는지 확인하는 과정)

이 3개는 정찰 단계로 볼 수 있는데
이 과정속에서 작은 공격이 일어남. -> 이를 이용해 악성코드를 만들겠지(무기화 단계로 나아가는 것

논문의 핵심 4장일것

오늘은 보안기법에 대해 자세히 안다룬대
정보보호이론, 시큐어 코딩 안들으면 낯설수 있기 때문에 몇주 뒤에 설명하신대

20페이지

통신회선 분석시

실제로 까보거나
obd2 포트 이용하거나
엔진에 있는 정비포트 이용할 수 잇음

연결했으면

패킷 스니핑 & 분석 해야할 것

모니터링 툴을 연결하고 자동차에 특정 상황 만들어 패킷을 분석
-> 2가지 방법 사용
-> 주행을 하면서 or 정비진단기를 이용하면서 (diagnostic)

패킷이 오른쪽 하얀 그림처럼 생겼대
아이디-데이터 를 갖고 있대

지난번에 창의적분석방법
아이디별로 카테고라이즈 시키고
자동차에 특정상황 유발시킴으로써
어느 바이트가 변경되는지 확인하고
그 바이트 바뀐 영역을 가지고 재전송함으로써 공격에 쓰일 수 있는 패킷이구나 아는 것

패킷 리플레이
(그대로 다시 흘려보는것)
이 패킷 이용하면 자동차 엔진 켰다 껐다 할 수 있구나
엑셀레이터밟은 것과 동일한 효과 내구나
등등의 정보 얻을 수 있음

패킷이 이렇게 재사용되도
자동차가 인증도 없고 보호도 없으므로
(내가 재전송해도 반응하는구나)
이렇게 하면 공격 할 수 있겠구나
-> 정찰 단계 마무리

21페이지

분석을 통해 얻어진 정보
(논문에 나온 얘기)

급가속 가능
속도계 바꿀 수 있고
엔진 정지시킬 수 있고
...

얻어진 정보들에 대해 요약해준 것-> 무기화에 사용 가능

맨오른쪽 컬럼은 위에가 일반 주행 상황
아래가 정비 상황

22페이지

무기화 단계
(악성앱 제작)

obd2단자쪽에 블루투스 디바이스 설치하고 이거랑 자동차랑 페어링 맺어 사용할 수 있는 앱

자가진단 할 수 있는 앱
걷보기엔 멀쩡
그러나 내부적으론 자동차의 상황 읽고 원하는 패킷 삽입할 수 있는 구조의 악성앱을 만들겠다는 것

inject to can(패킷 삽입)
정찰 단계에서 얻어진 코드
차량용 어플리케이션이라 하면
어플리케이션 내부에 공격에 사용할 패킷이 하드코딩 되어있거나 패킷을 생성할 수 있는 코드가 안에 들어있을 것

정찰 및 무기화 과정으로 볼 수 있음
그 후엔 악성앱 마켓에 배포

23페이지

배포까진 일단 끝났어
~

앱마켓에서 운전자가 무심코 다운
자동차와 연결
자동차의 상황이 앱으로 실시간 모니터링됨
이 앱은 공격자 서버와 연결됨
(공격자는 계속 앱의 상황 모니터링 -> 자동차의 상황 모니터링)
사고나기 적절한 시점에 명령및제어에서 -> 목표달성(공격 성공)

여기선 1,2,3,4단계로 되어있지만
이부분이 배포 이후에
악용 설치 명령및제어 목적달성
이 이부분에 함축적으로 담겨있다고 볼 수 있음
모호한 부분있으면 여러개단계를 하나로 합쳐서 기술해도됨

오른쪽 그림 obd2포트에 연결되는 무선통신모듈을 보여줌

24페이지

공격 수행되는 영상 보여줌
이 내요엥
정찰 - 무기화 배포 악용 설치 명령및제어 목적달성 까지 모두 이루어지는 과정이래
총 5가지 종류의 공격을 수행한대

obd2포트랑 스마트폰이 연결된 상태에서
공격자가 공격을 하는 것임
그 스마트폰이 공격자의 서버랑 연결되어 언제 어디서나 공격할 수 있는 시나리오 보여줌(논문보면 더 자세히 나와있음)

교수님이 실제 박사과정중에 한 연구래

26페이지

방어부분(간단히 설명하고 넘어갈것)
보안기술에 대한 기초 부분 아직 안배웠기 때문에 12,13주차 진행하고 방어부분 다시 설명해주시겠대

기밀성
메시지 인증
키 관리
접근제어

캔의 제약사항, 캔 통신 환경, 비용
모두를 고려해 보안 기술을 만들어야 된대

27페이지

캔 통신의 기본 스펙을 확인하고 이를 어기지 않는 선에서 어떠한 메시지 인증 코드랑 기밀성을 부여하는 값을 만들어야되고

키를 어떻게 안전하게 관리하면서 메시지를 주고 받을 것인지도 안전하게 만들어야된대

아직 우리는 module1 만 배웠기 때문에 2,3 배우고 나서 방어쪽을 자세히 얘기하겠대

28페이지

교수님 설명하신 것 바탕으로
논문을 잘 정리해야함

시큐리티 모델링 (자율 과제)
-> 나중에 기말 대체 과제가 쉬울 것

30페이지

사이버 킬체인으로 나눠보기

31페이지

자동차의 obd2포트에 디바이스 연결하고
스마트폰 어플 이용하는 서비스(커넥티드 카) 동작도에 대한
dfd 그려보기

32페이지

dfd 기반으로 stride 수행

어찌보면 dfd,stride는 사고가 터지기 전에 하는건데
이미 논문을 통해 어떤 취약점이 있고 어떻게 공격된다는걸 다 앎
dfd, stride를 편하게 그릴 수 있다는 것임
논문에서 담지 못했던 stride 공격 유형이 같은 모델안에서 발생할 수 있다면 여러분의 생각을 적어보래. (없다면 논문 내용 잘 담기(없는건 없는대로))

33페이지

stride에서 뽑았던 위험 요소에 대해
dread 수행해
위험도가 얼마나 되는지 알아보는 시간까지 진행하기

9주차 학습 내용 기반으로 실제 사례를 기반으로 분석하는 것임

오늘은 9주차 학습 내용에 이어가서 9주차에서 배웠던 내용 중 실제 자동차 기반 해킹 내용
실제 논문 실렸던 것 기반으로 설명했음

## 영상2

주교재 9장의 내용임

2페이지

용어

- ivi
  자동차 안에서 인포메이션이랑 엔터테인먼트를 다 즐길 수 있는 장친데 주로 네비게이션을 말함

- avn
  오디오 비디오 네비게이션
  자동차 내부에 탑재되는 내립형 네비게이션

- 텔레메틱스 시스템
  자동차에 탑재된 이동통신 단말

요즘 자동차 트렌드 어떠냐면
자동차에 있는 avn이 인포테인먼트 기능을 수행하면서 이것이 텔레메틱 시스템과 연결되어있음

왜냐면
자동차에 이동통신단말이 연결되어있다면
이걸 써야되는데 어케쓸겨?
자동차에 전화기가잇는것도아니고
네비게이션에 있는 터치스크린을 이용해 다양한 어플리케이션, 네트워크 접속들을 하게되자녀

ivi는 쉽게
네비게이션에 텔레메틱스 시스템이 연동된 것이다~ 라고 보면됨
ivi이용하면 자동차 해킹할 수 있고
악성코드를 어케 만들어라~ 이거 알 수 있음

- 공격되는 대상 차량에 ivi기기를 식별하고 분석해봐라

- 악성코드 생성 및 공격 수행

  업데이트 과정에 취약점 있을 수 있대

  ivi용 os위에서 돌아가는 어플리케이션을 공격 도구로 해야한다~ 이 어플리케이션과 유사한 형태의 공격도구를 제작해보자

안드로이드 기반의 네비게이션인데 국내 차량인 것에 대해 이 과정을 똑같이 수행하고 연구결과보고했던 논문 참고할 것임

교수님 설명 + 두번째 논문 기준으로 공부하기!

3페이지

⭐우린 항상 시큐리티 모델링을 해야함!

- 사이버 킬 체인 분석 -> 기반 방어 기법 설명
- dfd
- stride
- stride 기반으로 어떻게 방어할 것인지
- dread

너무 다 알려주면 기말 대체 과제 쉬우니까
이번 영상은 한 50프로 비중으로 설명해주시겠대
(강의1은 70프로 비중정도로 설명하신 거래)

기말대체 과제 나올때까지 어떤 과제도 내지 않지만 자율적으로 해봐라는 것!

5페이지

논문의 결과를 보여주는 뉴스 영상 시청!

스마트카 해킹 예시

자동차 sd카드에 해킹 명령어 심으니
외부에서 자동차 고유번호로 전화걸면 차문 열림

gps 추적도 가능

이런 악성코드를 어떻게 만들었을까?(논문에 자세히 나와있대)
스마트폰으로 하는 건 별로 없고
이 자동차 안에 네비게이션에 이미 펌웨어가 감염되어 있기 때문임

6페이지

자동차의 진보로 이런 문제 발생

외부 네트워크ㄱ와 항상 연결되어있는 상태 -> 커넥티드 카

9주차에서 설명했던 공격과 동일하게
이런 커넥티드 카 서비스를 운영하고 있다 알려줌

7페이지

- can 분석

9주차에서 학습했던 내용
공격에 사용할 패킷을 찾는 걸 먼저 했대

- avn

avn 서비스 중에서도 기아에서 사용하는 uvo 서비스의 취약점 분석

- 실제 차량 적용 가능성 검증

앞의 두 과정에서 정찰이 일어날 것 같고
파랑 동그라미 어느 부분 부터 실제 차량에 적용하는 과정에서 공격도구 제작, 유포 , 악용 설치, 명령및 제어 내용이 다 담기겠지

실제 공격을 수행한게 아니라 이 부분이 애매모호할 수도 있음
논문의 내용을 최대한 참고할것!

8페이지

안드로이드 버전이 상당히 옛날(연구가 2014라)

자동차 도난시 알람, 인터넷 사용 가능, 음성 지원/전화가능

car care 원격지에서 내 차 문열어줘 하면 서버로 넘어가서 자동차로 넘어가면 텔레메틱스 시스템으로 넘어가서 자동차를 제어하는 거지
텔레메틱스 디바이스는 avn랑 하나의 덩어리로 되어잇어 이를 통째로 ivi라고 부를 것임

9페이지

uvo -> 안드로이드 기반으로 돌아가니까 안드로이드 os가 있을것

자동차 제조사 만을 위한 어떤 어플리케이션이 있을 것(스마트폰 살 때 통신사별로 폰받았을 때 특정 앱있는 것처럼)
업데이트 하고 관리해야할 것

os를 업그레이드 할 시점이 있을 것
공식 사이트 가면 특정 차량의 펌웨어 다운로드 받을 수 있음(펌웨어라함은 여기서 맞게 설명하면 내 차에 설치할 수 있는 안드로이드 os를 다운로드 받을 수 있다는 것)

11페이지

관련 연구 비교

자신들의 연구는 아주 원거리에서도 가능하다
공격의 확장성이 있다
안드로이드 기반의 ivi(네비게이션) 해킹했으니 -> 안드로이드 관련 시스템은 이들의 방법론 이용하면 모두 해킹할 수 있다는 것(확장성)

12페이지

백그라운드
이 연구가 어떤 환경속에서 구상되었고 수행되었다는 것을 알려주는 것
이부분 자세히 보면
정찰, 유포, 악용, 설치 단계에 대한 백그라운드 지식을 얻을 수 있대
어떤 배경속에서 만들어지는지

13페이지

첫 논문이랑 백그라운드 똑같음

커넥티드 카 환경 안에서 공격할 것

내부 네트워크 있는데 여기엔 텔레메틱스 시스템이 들어간다

이 시스템에 있는 os가 내가 원하는대로 조종할 수 있다면 나는 무선 네트워크망을 통해 공격할 것이다.

그 전에 왜 이 자동차를 타겟으로 잡았냐면,,,

이 자동차는 텔레메틱스 시스템이 들어가있고
외부에 웹서비스나 모바일 서비스를 갖고잇다
텔레메틱스 시스템에 악성행위 할 수 있는 코드를 넣는다면 외부에 있는 공격 서버에서 접근할 수도 있고 스마트폰으로도 자유롭게 제어할 수 있다는 것

텔레메틱스 시스템 의 os를 악성 os로 만들고 싶다는 것

14페이지

안드로이드 경우
특정 파일 구조를 가지고 있음
이 파일 구조를 unpack(압축되어있는걸 풀어서)
직접 소스레벨까지 볼 수 있다는 것

더무서운건
avn에 설치되는 os가 외부로 공개되지만 않으면 찾아낼 수 없지 않을까?
(물론 물리적으로 임베디드 시스템 덤프떠서 이미징을 복사하는 기술있긴한데 고급기술임.)

15페이지

최근에 부는 바람

이 기술이 각광받고 있음
왜냐면...
스마트폰 쓰지? (삼성이라면) 스마트폰 시스템 소프트웨어 업데이트 하라고 권고 받았어
만약에!
자동으로, 무선으로 펌웨어가 업데이트, 설치된다는 것

이 os의 이미지가 어딘가엔 올라가고 이게 설치될 거라는 것임

그렇다면 클라우드에서 다운할 수 있다는건
os의 이미지를 획득할 수 있다는 것

16페이지

새로운 공격 흐름

펌웨어 추출
-> 분석
-> 펌웨어의 로우 레벨의 소스코드를 변조
-> 다시금 하드웨어를 조작할 수 있는 악성 펌웨어를 제작하고 이를 설치함으로써 공격에 성공할 수 있다는 것

펌웨어 모디피케이션 공격임!

총 정리!

텔레메틱스 디바이스 이용한 커넥티드 카 활용 증가
안드로이드 기반의 os쓰는 네비게이션 나타나기 시작했고
안드로이드 시스템에 있는 펌웨어를 서비스센터에 가는게 아니라 유저가 직접 받거나 자동으로 차에 다운로드되는 오버더 에어라는 기술이 늘어나고 있다는 것

자동차 환경에서의 ota기술을 동영상으로 보고가자

현대 블루링크를 예시로 영상이 진행됨
원격으로 자동차 소프트웨어 업데이트 하게 하는
수정된 부분만 업데이트하는 기술 있음
fota이용 업데이트할 소프트웨어 데이터 사이즈 줄여서 전송 -> 이동통신 비용, 트래픽 감소 가능
국제 표준 oma dm 규격 준수(자동차에 소프트웨어 업데이트 전송할 때)

논문에서는 ota말고 클라우드에서 (유저가)받아서 사용(자동은 아니고)

자동으로 받는 형태더라도 펌웨어 형태가 외부로 유출되는 순간 이를 이용하여 공격할 수 있다는 거지

이 영상에서처럼
차분 데이터 분석-> 변경된 데이터만 보내면
공격자의 정찰을 조금 더 어렵게 만들 수 있겠지

(교수님 강조) 영상보면 특정 기술 자세히 설명하고 있음
현대자동차의 ota에 대해 설명한 것
영상에 있는 기술을 가지고 시큐리티 모델링 할 수 있을 것 같지않음?
(stride, dread)
해보는 시간 가지면 좋을 것 같음

서비스나 소프트웨어가 어떻게 동작하는지 얘기를 해주고
개체, 엔티티 알려준 다음에
dfd그리는 양식을 이용해 그려주고
데이터 플로우를 나타내야함
그 플로우가 무엇을 나타내는지도 나타내야함
(저번 중간대체과제때 그리기만띡 낸경우 많음)
단 이 영상은 stride는 안됨. 상상의 나래로 그려보기

공격모델, 공격시나리오
실제로 공격이 어케 되었는지
방어기법
이거는 다음 주차에 진행한대(중요 3가지 파트래)

# 201118

## 11-1 영상(첫번째영상)

지난주에 배운 스마트카 인포테인먼트 시스템의 백그라운드 공부였고
오늘부터는 스마트카 인포테인먼트 시스템에서 활동하는 악성코드가
정찰, 무기화, 유포 악용, 설치, 되어 목적달성 할 수 있는지
그때 발생하는 취약점을 어떻게 방어할 수 있는지 알아볼 것
-> 사이버 킬 체인, stride, dfd, dread 가능
-> 어떻게 방어할지 방어기법에 대해서도 고민할 수 있을 것
(뒷부분 사이버 킬 체인 공란으로 놔뒀는데 이런거 자율 학습해보기!)

3페이지

텔레메틱스 디바이스가 자동차 안에 들어있음
이동통신단말임
이게 내부 네트워크를 통해 네비게이션과 연결되어있음
텔레메틱스시스템이랑 네비게이션이 한 덩어리로 연결되어있는 경우가 많음
-> 스마트폰으로 문을 열거나 시동을 끄고 킬 수 있음/에어컨,히터/경적/
-> 원리는? 사용자가 스마트폰에서 앱열고 로그인하고 -> 명령을 주면 텔레메틱스 서버로 명령이감
어떤 유저가 어떤 명령을 했구나 확인하면 이 메시지를 텔레메틱스 디바이스에 전달함 -> 텔레메틱스는 문을 열거나 할 수 있는 센서로 메시지 보내는 구조

서비스는 크게 2가지
조금 느린거는 문 여닿는 정도의 통신
좀 빠른거는 긴밀하게 제어해야하니까 자동차의 움직임이나 파워와 연관된 것임 (자가진단-서로의 상태를 알아볼 수 있는)

4페이지

기아의 유보
차량의 avn(오디오비디오네비게이션-차량 네비게이션) -> 여기에 이동통신단말이 연결되어있어 외부와 통신할 수 있게 만들어줌
여기서 받아서
네비게이션에 연결하면
지금 문을 열라는 명령이 있구나 해서 문 센서 쪽에 메시지보내 문 열게함. 결과를 서버로 다시 보내서 사용자에게 처리 결과 알려줌

5페이지

만약 텔레메틱스 유닛에 있는 sw에 악성코드 잠입되면 어떻게 될까?

6페이지

앱으로 메시지 보내서
달라진 패킷 분석

7페이지

(정찰 단계)
본격적으로,,,네비게이션의 공격 가능한 요소가 어떻게 되는지 확인 위해

네비게이션의 정비 문서 열어봄

네비게이션에 뒤 통신포트에 can이 연결되어있더라~

자동차 내부 네트워크에서 가장 많이 사용되고 자동차에 있는 제어기들을 서로 제어할 때 사용되는 can(9주차)

c-can 자동차가 움직이는데 중요한(핸들, 가속, 브레이크)
b-can 창문, 문 여닫는거, 사이드미러 접는 것 등 차의 몸통과 관련된 것

8페이지

실제 avn에서 통신포트 찾아냄-> 선을따서 밖으로 뺌

자동차 내부 네트워크는 접근제어 안된다했지
통신회선 찾는 방법으로 모니터링 연결하면 이렇게 통신 내용을 볼 수 있음

지금까지는 모두 정찰 과정이라 보면됨
자동차엔 네비가 있고
이 네비는 외부와 통신한다는데
내부로 특정 제어메시지를 보낼까? -> 보내는게 맞음
구체적으로 내부에 연결되어있는 통신회선을 건드려 어떤 내용을 주고 받는지 알아보는 것

9페이지

문을 여닫는 것에 대해 어떤 id로 어떤 메시지를 보낸다는 것을 알게됨

본격적인 무기화에 돌입하게 됨

무기화 도입 전에 공격을 실제 할 수 있을까? 해서 공격 모델을 만듦

10페이지

누가
어떤 툴을 가지고
어떤 취약점을 이용해

명령을 하고

어떤 목적을 달성할건지

---

이 타겟 차량은 안드로이드 펌웨어를 쓴다는데
이걸 변조할 수 있을까?
설치한다면 무기화에 성공할 수 있을거야
취약점을 봤더니 그 펌웨어는 리패키징 가능(소스코드 다 열어본다음 내가 원하는대로 바꿔서 악성 펌웨어를 만들수있음 - 이유는 이들이 인증서 관리를 제대로 안하고 잇다면 문제가 될 것이다. )

어떻게 공격할거냐? 캔의 디자인 오류를 보겠다
캔은 인증, 접근제어도 없음. 누구나 붙어 획득한 메세지를 재전송 가능(스푸핑 이나 권한상승 공격일 것)

문을 열고 gps 신호를 받아보는
등등
목적달성함으로써
공격자는 운전자에게 위협을 가하고 프라이버시를 침해하는 공격을 할 수 있다.

라는 모델을 세워볼 수 있음

11페이지

공격을 위한 자세한 시나리오

1.  이런 메소드 있음을 확인

2.  악성코드가 심겨진 avn을 만들었다는것
    (공격에 사용할 무기 만듦)

3.  설치한 이후 자동차에 업데이트 수행

4.  자동차 문 엶
    자동차 상태 확인

이 중 핵심은...

12페이지

ota 오버더에어
ex. 스마트폰 운영체제가 스스로 업데이트하는 그런거

자동차도 똑같음. 자동차의 네비게이션에 있는 펌웨어를 업데이트 시킬 수 있는 루틴이 있는데 그 루틴을 이용해 이들은 공격도구를 만들고 공격을 수행하는 것

어떻게 ota 펌웨어를 수정했을까?

논문에도 5.1~5.4 이렇게 나와있대

13페이지

안드로이드 이미지를 역공학하는 과정
완전 이해하려하지 말고 대략 알면됨

간단하게 말해주겠대

---

이들이 타겟으로 한건 기아의 소울 차량안에 있는 유보시스템의 펌웨어래
이게 안드로이드 os 기반으로 만들어져있었대

os이미지 안에서 여러 어플리케이션있을거아녀

앱들이 가진 권한 확인

apk 파일
그 앱을 역공학함으로써
자바 소스 코드 쭉 본다음에

소스코드 분석
앱에서 외부로부터 통신요청이 들어왔을 때 어떻게 컨트롤하고 있는지 보겠다

어딜 고칠지 알겠다 싶으면 고침(오른쪽에 첫번째꺼)
내가 원하는 코드 형태로 변경

우리가 안드로이드 앱파일을 받아 악성코드를 받아 다시 구글 플레이스토어에 업로드 할 순 없음(인증절차받아야하기 때문에)
따라서 이를 어떻게 우회할 건지 우회하는 과정 오른쪽 첫번째 오른쪽에 있음

그다음 무기화 완성

이를 네비게이션에 설치하겠다

실제로 목적달성
네비에 전화를 걸어서 문을 열고닫는다거나
네비의 위치정보를 얻어와보겠다 라는 것

---

굵직한 개념만 알면되고
디컴파일한다 디오덱스한다 이런 자세한 내용은 몰라도됨

14페이지

기아 소울 웹페이지 갓더니 펌웨어 파일 올려놨더라
시스템 파일 중에서도 update.zip 보면
공격에 사용할 앱을 찾을 수 있을 것 같다 해서 이 걸 뒤지기 시작

15페이지

app -> 실제 스마트폰에 깔릴 앱들이니까 여길 중점적으로 뒤지자
앱들은 apk 파일 형태로 저장되어있음
apk파일에 대해 역공학을 통해 소스코드를 알아내는건 어렵지 않고 정말 쉽대. 특정 툴을 사용하면 바로 소스레벨까지 볼수 잇대(디컴파일)

소스파일 분석해서 자동차 제어가능한 앱이 있나 찾아보고 거기에 악성코드 심어야지 생각한 것임

16페이지

앱들이 sms 메시지 왓을 때 사용하는 여러 메서드 들이 있음을 확인

가독성 좋은 메서드 명(개발자들이 많이 사용)
을 악용하는거지 공격자가

친절하게 한글 주석 까지 달아놓은 코드가 있었대-> 분석당하기 쉽겠지

코드를 보기 어렵게 만드는 방식이 쓰이지 않은
앱에 대해서 디컴파일해 역공학 하면 소스코드가 그대로 보인대...

이제 이 메소드들을 악용할 방법은 없을까? 생각하겠지

17페이지

공격 코드를 작성해서

apk 파일로 만들고
(스마일리 코드로 만들고)

apk 파일 안에 injection시킨 다음에

하나의 apk 파일로 만듦

-> 이 과정도 아주 디테일하게 하지 않아도 된대
미흡해도 이해하실거래

---

어떤 sw 있는데 이걸 역공학(소스코드로)
소스코드에 특정부분에 악성코드를 넣을 수 있는지 보고 넣는다
다시 온전한 상태의 소스코드 모양인 것처럼 sw로 만들고
사용한다

---

원본 이미지가 있는데
그중에서 업데이트에 사용할 것 같은 걸 정찰 통해 찾아냄
특정 app 분석한 다음 악성코드 만들면 되겠다 라고 타겟 잡아서
그거에 대해서 소스코드 레벨까지 역공학
특정 메소드 찾아내
메소드에 있는 내용 이용해 공격포인트를 찾아내고 그 안에 메소드를 밀어넣는다

18페이지

앱 파일을 스마일리 코드로 (가시적으로 볼 수 있는 형태) 변형
코드 변조 한 다음
다시 apk 파일로 만들어
배포

apk파일을 만들고
(정당한 apk 파일인지)정상적인 사람이 만든 것인지 확인하는 서명 단계가 있는데 서명값을 그래서 잘 만들어야함
서명값만드는데 정상적인 보안기법 사용했으면 시도가 불가능한데
살펴보니 문제가 있더라

19페이지

안드로이드에서 업데이트 정당한지 확인할 때 2가지 방법있는데

1. md5 값 이용해 checksum 만듦
2. 개발자의 서명 이용한 otacerts.zip 저장

업데이트 루틴은 서명검증과 해시값검증 2단계로 이루어져있대
헛 망했네? 공격못하나?

20페이지

근데
avn 에서 사용하는 펌웨어의 이미지에 대한 서명값을 생성하는 인증서가
testkey.x509 였대(누구나 다 얻을 수 있는 인증서)

서명할 때는 제조사의 고유한 인증서 사용해야되는데
우리가 학교에서 안드로이드 인증서 만들어서 잠깐 쓰는 구글에서 제공하는 테스트 인증서 있는데
그걸 쓴거지

그걸 이용해 악성 펌웨어 만든 다음에 서명할 수 있었던거지

21페이지

md5값구해야되는데
md5값도 생성할 수 있는 생성기 있는데 이걸로 그냥 체크섬이 생성이 됐고 통과가 되더라!

문제점!
apk파일에 대해 소스코드에 대한 보안대책이 없는건 그렇다치고
소스코드의 무결성을 파악해야되는 서명이나 md5, 해시값쓸 때
누구나 사용가능한 테스트용인증서를 사용한 것, md5 사용한 것이 문제가 됨

악성코드 -> 테스트 인증서로 통과 -> md5로 통과

22페이지

리커버리 모드 이용 설치까지 완료

서명값도 md5값도 우회할 수 있었다
이걸 sd카드에 담아 자동차에 적용시켜보니까 적용이 되더라
(사실 적용할 때도 자동차는 어떤 이미지 로 업데이트할 때 고유 루틴이있는데 이걸 논문에서 언급하진 않았대. 실제 자동차 해킹에 악용될까봐)

이 논문이 발간되고 다 안정화가 됐대

23페이지

실제로 테스팅, 명령및제어 목적달성이 되는지

24페이지

어떻게 하면 되나?

25페이지

정찰, 및 무기화 과정 무력화
-> 난독화

정상적인 소스코드를 알아보기 힘든 형태로 변경함

26페이지

정상적인 기관에서 나와있는 서명키 사용하기

기본적으로 정보보호 관점에서 지켜야할 것은 지키기
-> 해당 sw의 무결성 보장 필요

27페이지

dfd
텔레메틱스 디바이스와 자동차, 운전자의 스마트폰, 텔레메틱스 서버
이런 엔티티 사이에서 어떻게 메시지 주고 받는지 그려보기

이걸 기반으로 stride
stride 기반으로 방어기법 설명해보고
dread 로 위험도 추측해보기

논문 꼭 읽어보고 위협모델링 꼭 진행해보기

다음 영상은 차량용 외부 통신 기법과 그것을 기반으로 발생하는 여러가지 악성코드 유형에 대해 알아볼 것

## 11-2 영상(두번째영상)

2페이지의 강의계획서의 11주차 내용을 오늘 배울 것

인포테인먼트시스템도 무선시스템이긴하지만
그 이외의 무선시스템 해킹을 볼 것
여기선 논문은 보지 않을 것

중요한 건
12,13주차를 배우면 스마트카 무선시스템해킹에 대해서도 보안기법을 설계할 수 있을거야 그러니 오늘 수업 잘 듣기

⭐
9,10,11주차 기반으로
12,13주차 에 배우는 보안기법을 매칭시켜
사이버킬체인이나,스트라이드, 드레드 상에서 발견되었던 위협상황들을 완화시킬 수 있어야함

4페이지

vehicle to vehicle (v2v)
자동차와 자동차의 통신(움직이는 것과 움직이는 것의 통신)

이거 공부 위해 확장된 개념들 알아야함(5페이지)
차량간 통신에 관련된 용어들임

6페이지

ITS
지능형 교통 체계

도로 차량 화물등의 교통 구성요소들이 통신하여 편리한 교통환경을 만들어줌

ex
버스 도착 안내 시스템
교차로에서 교통량에 따라 자동으로 신호가 바뀌는 시스템

자동차가 누군가에게 정보 주고 받음 자동차뿐만아니라 도로등의 사물도 통신에 포함됨을 알 수 있음

7페이지

C-ITS
ITS에서 한단계 진화된 형태의 지능형 교통 체계

필수요소
자동차와 도로간 통신 V2I
자동차간 V2V

도로 상황정보와 주변 차량 정보를 사전에 공유해 위험상황을 피하는

ex
티맵에서 앞차가 급정거했다 알림
티맵을 쓰는 사용자들끼리 C-its 통신 구성되어있는 것
gps로 급정거 판단
-> 결국 v2v (자동차의 정보가 어떤 매개를 통해 자동차로 전달된거니까)

8페이지

v2x

v2v, v2i가 일반적

9페이지

자동차끼리 통신
v2v는 근거리 통신망 많이 사용. 보통 웨이브 통신(뒤에서 다시 설명할 것)

차량간 무선으로 정보 주고 받는다

완벽하게 v2v가 되면 안전한 주행 상태 만들 수 있을 것
앞 차 급정거 v2v가 빠르게 전달 가능할 것(인간의 인지가 더 느릴것)

10페이지

v2i
가장 대표적인예
신호등이랑 통신하는 시스템
신호등이 차에게 7초 후 신호바뀜. 6초 후 신호바뀜...주변에 가는 차는 지나갈지, 정거할지 판단할 수 있게됨(급정거 줄일것. 사고도 줄고)

차량에 사용되는 무선시스템이 무엇이있는지 알려주는 영상
지능형 교통시스템(우리나라에서 만들어진)
영상보며
이 기술에서 정보보호가 없으면 어떻게 될까 생각해보기!

통행료 지불 시스템(하이패스)
운전자의 지불 수단 정보 유출 가능?

상당히 예전부터 진행된 기술
아직 its에 인간이 개입해야하는 경우가 많음
만약 자율주행이 되면 기계가 판단해 진행이되니까 도로도 원활해질 것(기계간 상호간 협력해서 운전하는게 빠르고 정확하니까)
but 이때 중요한게 지능형 교통시스템에서의 보안.

자율주행차가 상용화되면
its, c-its 기술 무궁무진해질 것(업데이트도 되어야하고)

12페이지

만약
v2x, 특히 v2i에서
차량이랑 신호등(인프라) 통신하는데 해킹한다면?
차가 빠른 속도로 오고있는데 신호등은 곧 보행자신호로 바뀔건데
공격자가 보행자신호 아니야로 통신 내용 바꾸면
차가 앞에 영상처리해서 빨간불로인지하고 멈추는 거 아니면
통신 구간 내용만 보고 결정하면 큰 문제 발생할 수 있겠지

13페이지

차량간 통신에는 어떤 통신방식을 쓰나?

- 이동통신망
  앞에서 말한 티맵 예

- dsrc
  작은 범위
  차들이 도로위에 오밀조밀 모여있을 때 쓰는

14페이지

dsrc
주로 단거리에서 사용
하이패스에서 많이 사용
v2i나 v2v인데 차량 간 거리 좁을 때 등

dsrc가 뭐고 어떻게 통신하고 어떻게 구현하고 이런건 몰라도됨

15페이지

웨이브 통신이 차량간 통신에선 가장 많이 쓰임
좁은 영역이긴 하지만 dsrc보다 좀 더 넓은 영역 커버

16페이지

dsrc송신기가 보내는 정보로 이런 차량 정보를 알 수 있대
ex
터널지날 때 높이 측정해서 해당 차량이 지나가지 못하는 높이인 경우 알림 띄워주고 그럴 수 있겠지

17페이지

v2v통신에서 발생할 수 있는 다양한 사고 유형

이 표를
깊숙이 파고들진 않아도 됨
스트라이드할 때 위협요소로 여기 표에 나와있는거 사용하기

18페이지

통신프로토콜에서는
송신자와 수신자의 주소를 꼭 사용할텐데
이걸 이용하면 차량 위치 정보 무단으로 알아낼 수 있을 것->프라이버시에 취약

나 지금 급정거했어 메시지를
캡처했다가 악용할 수도 있겠지

rse(인프라 스트럭쳐)
교통센터에서 이 신호등으로 신호를 잡아라 라고 했는데
이걸 신호를 파란색으로 풀어줘라고 악의적인 신호를 줄 수도 있음

실시간으로 이루어지는 통신에 불법 도청이 일어날 수도 있음

dfd
트러스트바운더리 넘어가는 데이터 플로우에 대해서는
도스, 스푸핑, 제밍 등으로 내용이 변경될 수 있음을 유념하고 stride, dread를 해야함

19페이지

v2i
인프라 시스템 공격 가능

v2v
특정 차량 정보 모아 차량 위치 확인 가능

v2n
차량과 스마트폰 연결된 상황에서
무선으로 차량 공격하는 해킹 있을 수 있음

20페이지

이런걸 막기 위해 쓰이고 있는 방법들..

차량이 주고받는 데이터에 대해
송신시 데이터에 대한 진본성(통신 주체가 누구인지), 믿을 수 있는 메시지인지 확인해줄 수 있는 전자서명기법(인증서 기반) (서명할 때도 공개키사용하는데 같은 공개키 계속 사용하면 차량이 어디서 어디로 흘러가는지 알 수 있으니까 공개키 변경할 수 있게끔 다양한 익명 인증서 사용하는 익명 인증법이 도로에 쓰이고 있대)

21페이지

pki기반 인증서를 이용하면 19페이지의 공격을 막을 수 있다는 것

자세히 설명은 안하지만
12,13주차 듣고나면
its환경에서 발생하는 위험상황 어떻게 막을 수 있겠구나 하는 추상적 아키텍쳐 만들 수 있을 것
이 때 pki같은 것 고려하면 좋을 것

22페이지

원래 보려고 했던 논문 어떤 내용이냐면...

23페이지

타이어의 공기압 체크해 자동차 안쪽으로 정보를 주는. tpms
공기압 문제있을 때 계기판에 알람 뜬대

타이어에서 무선통신해서 자동차 안으로 정보 들어올 텐데
이 통신구간을 해킹할 수 있대 그래서 알람 잘못 띄우는

keyless
스마트키가 근처에 가면 문이 자동으로 열리는 등
이것도 해킹당할 수 있대

둘다 무선통신임

tpms나 keyless
자동차와 이 엔트리간의 엔티티 그림을 그리고
dfd 그리고
신뢰구간(트러스트 바운더리)에서 메시지 안전성에 대해 고민하는 시간 갖는다면 stride, dread할 때 재밌을 것

24페이지

무선 시스템에서 보내는 신호 보려면 sdr을 통해 패킷 볼 수 있대
저가형 무선 네트워크 모니터링 툴
노트북에 꽂고 sw짜서 돌려보면 주변의 무선 신호 얻을 수 있을 것

25페이지

획득해보면
진폭변이변조나 주파수변이변조등의 통신을 사용하고 있는데,,,
요 장치가 디코딩해서 디지털 정보 얻어냄(오른쪽 그림)

26페이지

필수로 들어가는 tpms인데...정보보호 제로

27페이지

이 칩에 대한 명세 분석해서(구글링)
이 칩이 사용하는 주파수 대역등 알아내서...
sdr장치 등을 이용해 주파수 설정 가능

28페이지

칩에 대한 통신 특징도 분석

29페이지

데이터 포맷에 대한 정보도 확보
이 자동차는 tpms 이용해 통신할 때 이러한 정보를 주고 받고 있구나 알게됨. 공격자는 이거 이용 악성 패킷 만들 수 있는 것

30페이지

4가지 행위 가능

31페이지

신호 활성화
tpms 정상 동작 확인 위해 정비기계로 요청신호 주는 것

개체 인증이 없어서
이 요청 메시지를 킵해놨다가 공격자가 요청을 하면 거기에 대해서 응답하는 과정을 만들어 놓은 것
(공격자쪽 빨간 화살표 두개 반대방향으로 고치기)
tpms가 가진 배터리 (내장 되어있음) 요청 응답 계속 발생하니 배터리 소모가 증가하겠지(가용성을 떨어뜨림)

32페이지

tpms가 발생시키는 데이터중
센서 id가 잇대
이 id를 모니터링하면 차량이 어디서 어디로 흐르는지 알 수 있음

차 주변의 인프라에서 타이어 id 확인하면
어디서 어디로 흘러가는지 알 수 있을 것

33페이지

센서 id 수집하고 있다가
원하는 신호 발생시 이벤트 발생시킴(공격행위지)

34페이지

tpms가 자동차 안쪽으로 신호를 주는데
비정상 패킷을 미리 확보해놨다가
자동차에 흘려주면 계기판에 비정상이라 뜨는거지
운전자는 차를 세우고 차를 정비하게 될 것
가용성 떨어뜨리는 공격

35페이지

이거보다 9, 10주차 사이버킬체인 stride, dread 하길 추천

tpms 관련 논문도 요청하면 주신대
