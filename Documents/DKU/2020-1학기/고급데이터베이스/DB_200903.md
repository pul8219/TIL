1주차

[20.09.03(목)](#200903)

2주차

[20.09.08(화)](#200908)

[20.09.10(목)](#200910)

# 200903

## 수업 개요

1. 저번 Quiz(학습상태 확인) 기반으로 관계형 모델 복습 겸 설명
1. 수업에서 사용할 2개의 DB에 대한 설명
1. MS SQL Server 설명(웹사이트 문서 기반으로)

## 기타사항

- 다음 시간엔 Google meet 사용해 실시간 수업해볼것임
- 오늘 진행한 프로그램 설치 과정 import 과정 과제로 낼 것
- 다음 수업 시작할 때 퀴즈낼 것(ms sql server rdbms 설명한 구성요소들)

## 1. 저번 Quiz(학습상태 확인) 기반으로 관계형 모델 복습 겸 설명

- 최근 다양한 데이터 모델들이 사용되고 있으나 아직도 대부분의 시스템들은 관계형 모델을 지원하고 있다. 관계형 모델의 특징을 쓰시오.

관계형 모델: **릴레이션의 집합**으로 데이터를 표현하는 것
릴레이션 - raw(또는 tuple)들의 집합.
그 tuple 들은 릴레이션 스키마에 정의된 구조를 갖는 tuple
스키마: 릴레이션의 이름, 컬럼들의 이름과 형태를 정의

관계해석:
관계대수: 처리 절차?

- 관계형 모델에서 기본 키가 필요한 이유를 쓰시오.

ch3 ppt
13페이지
어떤 두 튜플도 같을 수 없다

기본키의 정의

p.16

- 외래 키(foreign key)의 의미를 쓰시오.

p.15
필드(혹은 필드의 집합)가 다른 릴레이션의 튜플을 참조할 때 그것을 외래키라고 한다.

- 저장 프로시저(stored procedure)의 의미와 특징을 쓰시오.

강의 콘텐츠에 저장 프로시저에 대한 내용 올려주신대(어디까지 설명해야될지 막막하시대) - sql server tutorial 웹사이트 참고

- Employee(직원)은 ID, Name, Department(부서 명), Title(직책), 그리고 ReportsTo(직속상관)의 속성을 갖는다. 이 테이블을 정의하는 Create table문을 쓰시오. 단 타입은 적당히 가정하고 기본 키와 외래 키를 포함하여 정의하시오.

## 2. 수업에서 사용할 MySQL에 대한 설명

- www.mysqltutorial.org 사이트 내용 참고
  - 설치 방법, 예제 DB 설명
  - 기본 문법 등의 설명 소개
  - 예제 DB 설치 script의 설명을 통해 기본 문법 설명
  - 관련 링크는 아래 제시됨.

mysql 설치 후 2가지 클라이언트를 통해 사용 가능

1. 콘솔기반
2. 워크벤치(설치필요)

첫번째 과제가 아마 employees 샘플 테이블 로 쿼리문 작성해보는 것

샘플데이터 import 하고

Create 문에서 KEY 라는 명령어는 인덱스를 생성하는 것

## 3. MS SQL Server 설명(웹사이트 문서 기반으로)

- www.sqlservertutorial.net
- Getting Started with SQL Server 부분 설명
- What is SQL Server 설명
  > Architecture (DBMS)
  > 주요 개념들: Storage Engine, Query Processor, File Manager, Buffer Manager, Bulk Load 등
- 설치, 예제 DB 생성 등 설명

https://www.sqlservertutorial.net/getting-started/what-is-sql-server/

sql server 관계형 데이터베이스를 관리하기 위한 시스템으로 RDBMS라고도함. 마이크로소프트사에 의해 개발되었다.

sql server architecture

![image](https://user-images.githubusercontent.com/33214449/92401720-30c07200-f169-11ea-9785-0fef9301934e.png)

아키텍처 이미지

Parser에 의해 관계대수로 나타내짐
Optimizer
그걸 처리하는 Query Executor

sqlos API
(os 기능의 일부를 자체 구현)

Relational Engine(Query processor)

### sql server 설치

Developer 버전 쓸 것(무료)

`14.` 과정에서 되면 Mixed Mode로 pw 설정하기
sql server 2019 버전은 설치과정의 상당부분의 스크린샷이 안 나올 수도 있음

## 과제

1. MySQL과 Workbench를 설치하고 예제DB(classicmodels)를 생성하는 내용입니다. 9/3 강의 내용 중 MySQL 관련 웹사이트 내용을 참고해서 MySQL, Workbench를 설치하고 사이트에서 제공하는 예제 DB(classicmodels)를 생성합니다. Workbench의 navigator 탭에서 classicmodels DB가 설치되었음을 확인하는 스크린캡처 화면을 제출하면 됩니다.

2. 본인 이름의 DB를 생성하고 이 데이터베이스 내에 퀴즈 문제의 Employee 테이블을 생성한 후 스크린캡처 화면을 제출하세요.

3. (선택사항) MS SQL Server와 SSMS도 설치해보고 BikeStores라는 예제 DB를 생성해보세요. 이는 선택 사항입니다.

---

# 200908

2주차

2020.09.08(화)

# MSSQL

스토리지엔진 - 데이터베이스 어떻게 처리하고 버퍼 어떻게 처리하는지

## 설치

windows authentication
자동으로 설정됨
윈도우 아이디, 비번 쓰면됨

SSMS도 설치(studio)

sample db(BikeStores)
mssql 여기서 스키마: 데이터베이스들 오브젝트들의 그룹을 만들어주는(ex 샘플데이터에서 sales, production 으로 테이블들이 그룹지어 나눠져있음)
(표준적으로 데이터베이스 = 스키마)

ER다이어그램 표기 알고있나?(선 포함)

까마귀발처럼 생긴거(일대다 할 때 다)
동글뱅이에 하나있으면 일대일(하나의 고객이 여러개의 주문가능하니까)
동글뱅이는 옵셔널(모든 고객이 주문을 했었어야하는 건 아니다)

sqlserver ppt

master db 없어서는 안됨

데이터베이스 생성시
행 데이터 : 실제 데이터 저장되는
로그: 로그파일(액티비티가 기록됨)

```sql
use master
go

create database database명
go
```

mysql은 저장프로시저를 써서해야됐었는데
sql server는 스크립트를 입력하기 쉬움

batch 개념 -> ppt
컴파일단위!
안에 에러있으면 전체 실행시키지 않음
go가 구분자
저장프로시저의 끝을 표현할 때도 go를 사용

T-sql ppt(두번째 피피티)

전역변수:이미 선언된 변수. 읽기전용으로 사용 가능

우리가 앞으로 배울 내용 핵심 sql server indexes
키값을 이용해 데이터가 어딨는지 빠르게 찾는. index가 각각 붙어있음 (실제 데이터는 맨 아래 데이터 페이지로 나눠져 저장되어있음)

순차탐색보다 depth타고 들어가 인덱스로 빠르게 찾는게 빠름

mssql 내부에서는 데이터를 데이터페이지라는 단위로 저장함(크기도 설정해놓을수있나 그럼)

---

# 200910

# 과제

mysql workbench에서 er다이어그램 쉽게 출력할 수 있대

4번문제는 3개의 테이블 필요할것
입력-> insert문 사용하라는 것
classmodel 디비에 customer이 일련의 회사인데 여기다가 주문, 주문상세 추가해보래
주문상세는 주문이 여러개일 수 있으니까 만드는 것

그 회사의 주문내역을 테이블에 만들어놓으라는 것

**ms sql server**

1번

- 유의 현재 데이터베이스를 삭제하려면 다른 데이터베이스로 옮겨야됨
  use master
  go

drop database testDB
go

이런식으로 해야함

그리고 테이블을 마스터에다 생성하지말 것

학사 db 파일은 제공될 것

```sql
/* 본 과제는 간단한 수준의 학사DB를 구성하는 내용으로
   student, course, department, instructor, course_taken으로
   구성된다. 본 과제를 통해 학생들은 테이블 간의 참조 관계를 고려한 테이븓들의 생성,
   그리고 자기 참조 테이블의 경우 데이터들 간의 참조 관계를 고려한 데이터 입력을 경험한다.
   또한 기본 키, 외래 키를 포함한 주요 제약조건 constraint의 이름을
   명시하여 오류 발생 시 어떤 오류인지 확인할 수 있도록 한다.
*/

# 데이터베이스의 생성
drop database if exists 학사DB;
CREATE DATABASE IF NOT EXISTS 학사DB;
USE 학사DB;

# department 테이블의 생성과 데이터 입력
CREATE TABLE IF NOT EXISTS department (
	id CHAR(10) NOT NULL,
	name CHAR(10),
	constraint pk_department PRIMARY KEY (id)
);

INSERT INTO department (id, name) VALUES
	('cs', '전산전공'),
	('ss', '통계전공');

# instructor 테이블의 생성과 데이터 입력
CREATE TABLE IF NOT EXISTS instructor (
	pid CHAR(10) NOT NULL,
	name CHAR(10) NOT NULL,
	dept CHAR(10),
	constraint pk_instructor PRIMARY KEY (pid),
	constraint uniq_instructor UNIQUE KEY (name),
	constraint fk_instructor_department foreign key(dept) references department(id)
);

INSERT INTO instructor (pid, name, dept) VALUES
	('cs10', '구자영', 'cs'),
	('cs11', '우진운', 'cs'),
	('cs12', '유해영', 'cs'),
	('cs13', '이석균', 'cs'),
	('cs14', '조경산', 'cs'),
	('cs15', '조성제', 'cs'),
	('ss16', '이강섭', 'ss'),
	('ss17', '황형태', 'ss'),
	('ss18', '이장택', 'ss');

# course 테이블의 생성과 데이터 입력
CREATE TABLE IF NOT EXISTS course (
	id CHAR(10) NOT NULL,
	name CHAR(20),
	instructor CHAR(10),
	prerequisite CHAR(10),
	PRIMARY KEY (id),
	Constraint fk_Course_Instructor foreign key(instructor) references instructor(pid),
	CONSTRAINT fk_Prerequisite_Course foreign key(prerequisite) references course(id)
);

INSERT INTO course (id, name, instructor, prerequisite)
VALUES 	('cs111', '기초전산', 'cs13', NULL);

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('ss111', '전산통계', 'ss18', NULL);

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs211', '수치해석', 'cs12', 'cs111');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs221', '자료구조론', 'cs11', 'cs111');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs222', '시스템프로그래밍', 'cs10', 'cs111');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs311', '컴퓨터 구조론', 'cs14', 'cs111');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs312', '알고리즘', 'cs11', 'cs221');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs321', '프로그래밍언어론', 'cs13', 'cs221');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs322', '운영체제', 'cs15', 'cs222');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs411', '데이타베이스', 'cs13', 'cs321');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs413', '컴퓨터네트워크', 'cs14', 'cs311');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('ss311', '응용해석학', 'ss17', 'ss111');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('ss312', '통계적 품질관리', 'ss16', 'ss111');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('cs421', '소프트웨어 공학', 'cs12', 'cs312');

INSERT INTO course (id, name, instructor, prerequisite)
VALUES	('ss321', '회귀분석', 'ss18', 'ss312');

# student 테이블의 생성과 데이터 입력
CREATE TABLE IF NOT EXISTS student (
	id CHAR(10) NOT NULL,
	name CHAR(10) NOT NULL,
	major CHAR(10) DEFAULT NULL,
	address CHAR(30) DEFAULT '단국대학교',
	gpa FLOAT,
	bdate date,
	constraint pk_student PRIMARY KEY (id),
	constraint fk_student_department foreign key(major) references department(id)
);

INSERT INTO student (id, name, major, address, gpa, bdate) VALUES
	('930405', '한나라', 'cs', '서울 마포구 원효로', 3.299999952, '1974-06-12'),
	('940123', '강동희', 'ss', '서울 중구 필동', 3.625, '1975-08-07'),
	('950564', '허영만', 'cs', '서울 강동구 풍납동', 1.75, '1976-12-21'),
	('960157', '이동주', 'cs', '서울 서초구 잠원동', 1.799999952, '1977-10-10'),
	('970734', '조용필', NULL, '서울 영등포구 영등포동', 2, '1978-07-12'),
	('980115', '이미숙', 'ss', '서울 서초구 반포동', 3.75, NULL),
	('980397', '조용기', NULL, '서울 서대문구 홍은동', 2.25, NULL);

# course_taken 테이블의 생성과 데이터 입력
CREATE TABLE IF NOT EXISTS course_taken (
	no INT(5) NOT NULL auto_increment,
	sid CHAR(10),
	cid CHAR(10),
	grade FLOAT,
	year_taken INT,
	PRIMARY KEY (no),
	foreign key(sid) references student(id),
	CONSTRAINT fk_CourseTaken_Course foreign key(cid) references course(id)
);


INSERT INTO course_taken (sid, cid, grade, year_taken) VALUES
	('930405', 'cs111', 2.0, 1993),
	('930405', 'cs211', 4.0, 1996),
	('930405', 'cs221', 3.0, 1996),
	('930405', 'cs222', 3.0, 1996),
	('930405', 'cs311', 3.0, 1997),
	('930405', 'cs321', 4.0, 1997),
	('930405', 'cs411', 4.0, 1998),
	('940123', 'ss111', 2.0, 1994),
	('940123', 'cs111', 4.0, 1997),
	('940123', 'cs221', 4.0, 1997),
	('940123', 'ss311', 4.0, 1997),
	('940123', 'ss312', 4.0, 1998),
	('940123', 'ss321', 3.0, 1998),
	('950564', 'cs111', 2.0, 1995),
	('950564', 'cs211', 2.0, 1996),
	('950564', 'cs222', 1.0, 1997),
	('950564', 'cs311', 2.0, 1998),
	('950564', 'cs411', 2.0, 1999),
	('960157', 'cs111', 1.0, 1996),
	('960157', 'cs211', 2.0, 1997),
	('970734', 'cs111', 1.0, 1997),
	('970734', 'cs211', 3.0, 1998),
	('970734', 'cs222', 2.0, 1998),
	('980115', 'ss111', 4.0, 1998),
	('980115', 'cs111', 3.0, 1998),
	('980115', 'cs221', 3.0, 1998),
	('980115', 'cs222', 4.0, 1998),
	('980115', 'cs311', 4.0, 1999),
	('980397', 'cs111', 2.0, 1998),
	('980397', 'cs211', 2.0, 1999);

```

# 관계대수(Relational Algebra) (이번 학기 내내 사용)

관계해석은 사용은 x

피피티:relational algebra

p.2
쿼리언어: 데이터 조작과 검색!

R모델은 파워풀한 쿼리언어 제공

- 관계해석 - 의미 전달이 명확하게 이루어지는 것(sql은 관계해석에 더 가까움)
- 관계대수

turing machine관련해서 설명하심
앨런튜링

3페이지

관계대수 - 절차적 실행플랜 표현하기 용이
관계해석 - 어떻게 계산하는지는 표현할 수 없음

4페이지
쿼리는 릴레이션 인스턴스에 적용됨
쿼리의 결과 역시 릴레이션 인스턴스

그리고 우리 주로 필드명 썼는데 숫자도가능(1번째면 1)

5페이지

뱃사람이 배예약하는 경우

6페이지

관계대수

셀렉션: 조건을 걸고 행들을 추출
프로젝션: 원치않는 컬럼을 제외

추가적인 연산:
교집합, 조인, 디비전, 리네이밍(테이블 혹은 필드명 변경)

연산의 결과가 또 다른 연산의 입력으로 될 수 있음.(sql 쓸때 중첩 질의문처럼)

7페이지

오른쪽 위 그림은
sname, rating 빼고 제외하고 가져오는 것

결과의 스키마-필드들이 될 것(?)

중복을 제거한다(but 리얼시스템에선 중복을 제거하지 않는다고 보는게 맞대)

9페이지

합집합/교집합/차집합하려면 필드수가 같아야되고 각각 대응하는 위치에 필드가 같은 타입이어야함

단, 필드이름이 다를 수 있는데
첫번째 인수의 릴레이션의 이름을 따를 것

10페이지

크로스프로덕트

가능한 조합이 모두

5행 \* 10행 = 50행의 결과

같은 필드가 있으면 어떡하나?->리네이밍을 통해 컬럼이름을 변경할 수 있음

11페이지

r과 s를 조인하는데 조건은 c
(세타조인)

실제 조인을 구현할 땐 조인되는 필드 비교할 때 빠르게 하는 방법을 활용해서 한대

12페이지

이퀄리티조인(조건에 이퀄리티 비교만 사용되는 경우)
sid 같은거 조인하고 sid는 하나만 남김

내추럴조인
알아보기
이것도 컬럼명 쓸 필요 없다는데..

# Q&A

Q. 데이터베이스에서 스키마란?

# 200915

3주차

# 수업 개요

1. 과제 설명

2. Relational Algebra 설명

   - relational data model: set, relation의 개념을 기반으로 간단히 소개
   - 다음 링크 참조: https://en.wikipedia.org/wiki/Relational_algebra
   - Ch4(R-Algebra)의 PPT

3. relational algebra 연습

   - 다음 파일 참고: Ch4(RelationalAlgebraExampleFromBook).hwp

   # 수업 내용

저번시간 복습. ch4 피피티

8페이지

프로젝션, 셀렉션 같이 쓸 수 있음
쓰는 순서를 바꾸면 컬럼줄이고 검색하니 좀 효율적일 수도 있겠지
가독성엔 그대로가 좋고

16페이지
솔루션1 솔루션3 중 뭐가 빠른지는.
솔루션 1이 효율적일수있겠지만
조건이 저거인 결과가 많은 테이블일경우 빠르게 조인할 수 있는 인덱스가 있는 경우는 솔루션 3이 좋을 수도
경우에 따라 무엇이 효율적인지는 달라질 수 있음

17페이지
다양한 솔루션이 있을 수 있다.

18페이지
red인거는 temp1, green인거는 temp2
temp1, temp2 union하면 and 문제도 풀 수 있음

19페이지
교집합 쓰면 red 배 예약하고 green 배도 예약한 사람 나올 것

13페이지
디비전
모든 배를 예약한 sailors 구하라->디비전써야 구할 수 있음

14페이지
a/b1
b1에 모든 값을 포함한 a를 구하라

b의 값을 다 포함하되 a의 앞에 필드가 같아야돼

솔루션은 20페이지에 있음
